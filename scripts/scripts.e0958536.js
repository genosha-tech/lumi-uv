function init(a){function b(a){i.classed("is-active",function(b,c){return c===a.index});var b=eventBus[a.element.dataset.step];"function"==typeof b&&(b(),k&&(k=!1,setTimeout(function(){var a=$("#timelineScroll .is-active").data("step");a&&eventBus[a]&&eventBus[a](),kv=$("#scroll .is-active").data("step")},5e3)))}function c(a){}function d(a){}function e(){var a=Math.floor(.75*window.innerHeight);i.style("height",a+"px");var b=d3.select("body").node().offsetWidth;g.style("width",b+"px").style("height",window.innerHeight+"px");var c=32,d=h.node().offsetWidth,e=g.node().offsetWidth-d-c,f=d3.select("svg#svg-map");f.style("width",e+"px").style("height",Math.floor(window.innerHeight)+"px"),j.resize()}var f=d3.select(a),g=f.select(".scroll__graphic"),h=f.select(".scroll__text"),i=h.selectAll(".step"),j=scrollama(),k=!0;j.setup({container:a,graphic:a+" .scroll__graphic",text:a+" .scroll__text",step:a+" .scroll__text .step"}).onStepEnter(b).onContainerEnter(c).onContainerExit(d),window.addEventListener("resize."+a.substr(1),e),e()}!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.d3=a.d3||{})}(this,function(a){"use strict";function b(a){return function(b,c){return kj(a(b),c)}}function c(a,b){return[a,b]}function d(a,b,c){var d=(b-a)/Math.max(0,c),e=Math.floor(Math.log(d)/Math.LN10),f=d/Math.pow(10,e);return e>=0?(f>=zj?10:f>=Aj?5:f>=Bj?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(f>=zj?10:f>=Aj?5:f>=Bj?2:1)}function e(a,b,c){var d=Math.abs(b-a)/Math.max(0,c),e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),f=d/e;return f>=zj?e*=10:f>=Aj?e*=5:f>=Bj&&(e*=2),a>b?-e:e}function f(a){return a.length}function g(a){return"translate("+(a+.5)+",0)"}function h(a){return"translate(0,"+(a+.5)+")"}function i(a){return function(b){return+a(b)}}function j(a){var b=Math.max(0,a.bandwidth()-1)/2;return a.round()&&(b=Math.round(b)),function(c){return+a(c)+b}}function k(){return!this.__axis}function l(a,b){function c(c){var g=null==e?b.ticks?b.ticks.apply(b,d):b.domain():e,h=null==f?b.tickFormat?b.tickFormat.apply(b,d):Jj:f,r=Math.max(l,0)+n,s=b.range(),t=+s[0]+.5,u=+s[s.length-1]+.5,v=(b.bandwidth?j:i)(b.copy()),w=c.selection?c.selection():c,x=w.selectAll(".domain").data([null]),y=w.selectAll(".tick").data(g,b).order(),z=y.exit(),A=y.enter().append("g").attr("class","tick"),B=y.select("line"),C=y.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),y=y.merge(A),B=B.merge(A.append("line").attr("stroke","#000").attr(p+"2",o*l)),C=C.merge(A.append("text").attr("fill","#000").attr(p,o*r).attr("dy",a===Kj?"0em":a===Mj?"0.71em":"0.32em")),c!==w&&(x=x.transition(c),y=y.transition(c),B=B.transition(c),C=C.transition(c),z=z.transition(c).attr("opacity",Oj).attr("transform",function(a){return isFinite(a=v(a))?q(a):this.getAttribute("transform")}),A.attr("opacity",Oj).attr("transform",function(a){var b=this.parentNode.__axis;return q(b&&isFinite(b=b(a))?b:v(a))})),z.remove(),x.attr("d",a===Nj||a==Lj?"M"+o*m+","+t+"H0.5V"+u+"H"+o*m:"M"+t+","+o*m+"V0.5H"+u+"V"+o*m),y.attr("opacity",1).attr("transform",function(a){return q(v(a))}),B.attr(p+"2",o*l),C.attr(p,o*r).text(h),w.filter(k).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",a===Lj?"start":a===Nj?"end":"middle"),w.each(function(){this.__axis=v})}var d=[],e=null,f=null,l=6,m=6,n=3,o=a===Kj||a===Nj?-1:1,p=a===Nj||a===Lj?"x":"y",q=a===Kj||a===Mj?g:h;return c.scale=function(a){return arguments.length?(b=a,c):b},c.ticks=function(){return d=Ij.call(arguments),c},c.tickArguments=function(a){return arguments.length?(d=null==a?[]:Ij.call(a),c):d.slice()},c.tickValues=function(a){return arguments.length?(e=null==a?null:Ij.call(a),c):e&&e.slice()},c.tickFormat=function(a){return arguments.length?(f=a,c):f},c.tickSize=function(a){return arguments.length?(l=m=+a,c):l},c.tickSizeInner=function(a){return arguments.length?(l=+a,c):l},c.tickSizeOuter=function(a){return arguments.length?(m=+a,c):m},c.tickPadding=function(a){return arguments.length?(n=+a,c):n},c}function m(){for(var a,b=0,c=arguments.length,d={};c>b;++b){if(!(a=arguments[b]+"")||a in d)throw new Error("illegal type: "+a);d[a]=[]}return new n(d)}function n(a){this._=a}function o(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");if(d>=0&&(c=a.slice(d+1),a=a.slice(0,d)),a&&!b.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})}function p(a,b){for(var c,d=0,e=a.length;e>d;++d)if((c=a[d]).name===b)return c.value}function q(a,b,c){for(var d=0,e=a.length;e>d;++d)if(a[d].name===b){a[d]=Pj,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}function r(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===Qj&&b.documentElement.namespaceURI===Qj?b.createElement(a):b.createElementNS(c,a)}}function s(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function t(){return new u}function u(){this._="@"+(++Uj).toString(36)}function v(a,b,c){return a=w(a,b,c),function(b){var c=b.relatedTarget;c&&(c===this||8&c.compareDocumentPosition(this))||a.call(this,b)}}function w(b,c,d){return function(e){var f=a.event;a.event=e;try{b.call(this,this.__data__,c,d)}finally{a.event=f}}}function x(a){return a.trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");return c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),{type:a,name:b}})}function y(a){return function(){var b=this.__on;if(b){for(var c,d=0,e=-1,f=b.length;f>d;++d)c=b[d],a.type&&c.type!==a.type||c.name!==a.name?b[++e]=c:this.removeEventListener(c.type,c.listener,c.capture);++e?b.length=e:delete this.__on}}}function z(a,b,c){var d=Zj.hasOwnProperty(a.type)?v:w;return function(e,f,g){var h,i=this.__on,j=d(b,f,g);if(i)for(var k=0,l=i.length;l>k;++k)if((h=i[k]).type===a.type&&h.name===a.name)return this.removeEventListener(h.type,h.listener,h.capture),this.addEventListener(h.type,h.listener=j,h.capture=c),void(h.value=b);this.addEventListener(a.type,j,c),h={type:a.type,name:a.name,value:b,listener:j,capture:c},i?i.push(h):this.__on=[h]}}function A(b,c,d,e){var f=a.event;b.sourceEvent=a.event,a.event=b;try{return c.apply(d,e)}finally{a.event=f}}function B(){}function C(){return[]}function D(a,b){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=b}function E(a,b,c,d,e,f){for(var g,h=0,i=b.length,j=f.length;j>h;++h)(g=b[h])?(g.__data__=f[h],d[h]=g):c[h]=new D(a,f[h]);for(;i>h;++h)(g=b[h])&&(e[h]=g)}function F(a,b,c,d,e,f,g){var h,i,j,k={},l=b.length,m=f.length,n=new Array(l);for(h=0;l>h;++h)(i=b[h])&&(n[h]=j=fk+g.call(i,i.__data__,h,b),j in k?e[h]=i:k[j]=i);for(h=0;m>h;++h)(i=k[j=fk+g.call(a,f[h],h,f)])?(d[h]=i,i.__data__=f[h],k[j]=null):c[h]=new D(a,f[h]);for(h=0;l>h;++h)(i=b[h])&&k[n[h]]===i&&(e[h]=i)}function G(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function H(a){return function(){this.removeAttribute(a)}}function I(a){return function(){this.removeAttributeNS(a.space,a.local)}}function J(a,b){return function(){this.setAttribute(a,b)}}function K(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function L(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function M(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function N(a){return function(){this.style.removeProperty(a)}}function O(a,b,c){return function(){this.style.setProperty(a,b,c)}}function P(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function Q(a,b){return a.style.getPropertyValue(b)||gk(a).getComputedStyle(a,null).getPropertyValue(b)}function R(a){return function(){delete this[a]}}function S(a,b){return function(){this[a]=b}}function T(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function U(a){return a.trim().split(/^|\s+/)}function V(a){return a.classList||new W(a)}function W(a){this._node=a,this._names=U(a.getAttribute("class")||"")}function X(a,b){for(var c=V(a),d=-1,e=b.length;++d<e;)c.add(b[d])}function Y(a,b){for(var c=V(a),d=-1,e=b.length;++d<e;)c.remove(b[d])}function Z(a){return function(){X(this,a)}}function $(a){return function(){Y(this,a)}}function _(a,b){return function(){(b.apply(this,arguments)?X:Y)(this,a)}}function aa(){this.textContent=""}function ba(a){return function(){this.textContent=a}}function ca(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function da(){this.innerHTML=""}function ea(a){return function(){this.innerHTML=a}}function fa(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function ga(){this.nextSibling&&this.parentNode.appendChild(this)}function ha(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ia(){return null}function ja(){var a=this.parentNode;a&&a.removeChild(this)}function ka(a,b,c){var d=gk(a),e=d.CustomEvent;"function"==typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1)),a.dispatchEvent(e)}function la(a,b){return function(){return ka(this,a,b)}}function ma(a,b){return function(){return ka(this,a,b.apply(this,arguments))}}function na(a,b){this._groups=a,this._parents=b}function oa(){return new na([[document.documentElement]],hk)}function pa(){a.event.stopImmediatePropagation()}function qa(a,b){var c=a.document.documentElement,d=ik(a).on("dragstart.drag",null);b&&(d.on("click.drag",kk,!0),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in c?d.on("selectstart.drag",null):(c.style.MozUserSelect=c.__noselect,delete c.__noselect)}function ra(a,b,c,d,e,f,g,h,i,j){this.target=a,this.type=b,this.subject=c,this.identifier=d,this.active=e,this.x=f,this.y=g,this.dx=h,this.dy=i,this._=j}function sa(){return!a.event.button}function ta(){return this.parentNode}function ua(b){return null==b?{x:a.event.x,y:a.event.y}:b}function va(){return"ontouchstart"in this}function wa(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function xa(){}function ya(a){var b;return a=(a+"").trim().toLowerCase(),(b=rk.exec(a))?(b=parseInt(b[1],16),new Da(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1)):(b=sk.exec(a))?za(parseInt(b[1],16)):(b=tk.exec(a))?new Da(b[1],b[2],b[3],1):(b=uk.exec(a))?new Da(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=vk.exec(a))?Aa(b[1],b[2],b[3],b[4]):(b=wk.exec(a))?Aa(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=xk.exec(a))?Ea(b[1],b[2]/100,b[3]/100,1):(b=yk.exec(a))?Ea(b[1],b[2]/100,b[3]/100,b[4]):zk.hasOwnProperty(a)?za(zk[a]):"transparent"===a?new Da(NaN,NaN,NaN,0):null}function za(a){return new Da(a>>16&255,a>>8&255,255&a,1)}function Aa(a,b,c,d){return 0>=d&&(a=b=c=NaN),new Da(a,b,c,d)}function Ba(a){return a instanceof xa||(a=ya(a)),a?(a=a.rgb(),new Da(a.r,a.g,a.b,a.opacity)):new Da}function Ca(a,b,c,d){return 1===arguments.length?Ba(a):new Da(a,b,c,null==d?1:d)}function Da(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function Ea(a,b,c,d){return 0>=d?a=b=c=NaN:0>=c||c>=1?a=b=NaN:0>=b&&(a=NaN),new Ha(a,b,c,d)}function Fa(a){if(a instanceof Ha)return new Ha(a.h,a.s,a.l,a.opacity);if(a instanceof xa||(a=ya(a)),!a)return new Ha;if(a instanceof Ha)return a;var b=(a=a.rgb()).r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+6*(d>c):c===f?(d-b)/h+2:(b-c)/h+4,h/=.5>i?f+e:2-f-e,g*=60):h=i>0&&1>i?0:g,new Ha(g,h,i,a.opacity)}function Ga(a,b,c,d){return 1===arguments.length?Fa(a):new Ha(a,b,c,null==d?1:d)}function Ha(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function Ia(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Ja(a){if(a instanceof La)return new La(a.l,a.a,a.b,a.opacity);if(a instanceof Sa){var b=a.h*Ak;return new La(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof Da||(a=Ba(a));var c=Pa(a.r),d=Pa(a.g),e=Pa(a.b),f=Ma((.4124564*c+.3575761*d+.1804375*e)/Ck),g=Ma((.2126729*c+.7151522*d+.072175*e)/Dk);return new La(116*g-16,500*(f-g),200*(g-Ma((.0193339*c+.119192*d+.9503041*e)/Ek)),a.opacity)}function Ka(a,b,c,d){return 1===arguments.length?Ja(a):new La(a,b,c,null==d?1:d)}function La(a,b,c,d){this.l=+a,this.a=+b,this.b=+c,this.opacity=+d}function Ma(a){return a>Ik?Math.pow(a,1/3):a/Hk+Fk}function Na(a){return a>Gk?a*a*a:Hk*(a-Fk)}function Oa(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Pa(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Qa(a){if(a instanceof Sa)return new Sa(a.h,a.c,a.l,a.opacity);a instanceof La||(a=Ja(a));var b=Math.atan2(a.b,a.a)*Bk;return new Sa(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function Ra(a,b,c,d){return 1===arguments.length?Qa(a):new Sa(a,b,c,null==d?1:d)}function Sa(a,b,c,d){this.h=+a,this.c=+b,this.l=+c,this.opacity=+d}function Ta(a){if(a instanceof Va)return new Va(a.h,a.s,a.l,a.opacity);a instanceof Da||(a=Ba(a));var b=a.r/255,c=a.g/255,d=a.b/255,e=(Qk*d+Ok*b-Pk*c)/(Qk+Ok-Pk),f=d-e,g=(Nk*(c-e)-Lk*f)/Mk,h=Math.sqrt(g*g+f*f)/(Nk*e*(1-e)),i=h?Math.atan2(g,f)*Bk-120:NaN;return new Va(0>i?i+360:i,h,e,a.opacity)}function Ua(a,b,c,d){return 1===arguments.length?Ta(a):new Va(a,b,c,null==d?1:d)}function Va(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function Wa(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}function Xa(a,b){return function(c){return a+c*b}}function Ya(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function Za(a,b){var c=b-a;return c?Xa(a,c>180||-180>c?c-360*Math.round(c/360):c):Zk(isNaN(a)?b:a)}function $a(a){return 1==(a=+a)?_a:function(b,c){return c-b?Ya(b,c,a):Zk(isNaN(b)?c:b)}}function _a(a,b){var c=b-a;return c?Xa(a,c):Zk(isNaN(a)?b:a)}function ab(a){return function(b){var c,d,e=b.length,f=new Array(e),g=new Array(e),h=new Array(e);for(c=0;e>c;++c)d=Ca(b[c]),f[c]=d.r||0,g[c]=d.g||0,h[c]=d.b||0;return f=a(f),g=a(g),h=a(h),d.opacity=1,function(a){return d.r=f(a),d.g=g(a),d.b=h(a),d+""}}}function bb(a){return function(){return a}}function cb(a){return function(b){return a(b)+""}}function db(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function f(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:dl(a,e)},{i:i-2,x:dl(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}function g(a,b,c,f){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:dl(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:dl(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function i(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:dl(a,c)},{i:h-2,x:dl(b,d)})}else 1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];return b=a(b),c=a(c),f(b.translateX,b.translateY,c.translateX,c.translateY,d,e),g(b.rotate,c.rotate,d,e),h(b.skewX,c.skewX,d,e),i(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e),b=c=null,function(a){for(var b,c=-1,f=e.length;++c<f;)d[(b=e[c]).i]=b.x(a);return d.join("")}}}function eb(a){return((a=Math.exp(a))+1/a)/2}function fb(a){return((a=Math.exp(a))-1/a)/2}function gb(a){return((a=Math.exp(2*a))-1)/(a+1)}function hb(a){return function(b,c){var d=a((b=Ga(b)).h,(c=Ga(c)).h),e=_a(b.s,c.s),f=_a(b.l,c.l),g=_a(b.opacity,c.opacity);return function(a){return b.h=d(a),b.s=e(a),b.l=f(a),b.opacity=g(a),b+""}}}function ib(a){return function(b,c){var d=a((b=Ra(b)).h,(c=Ra(c)).h),e=_a(b.c,c.c),f=_a(b.l,c.l),g=_a(b.opacity,c.opacity);return function(a){return b.h=d(a),b.c=e(a),b.l=f(a),b.opacity=g(a),b+""}}}function jb(a){return function b(c){function d(b,d){var e=a((b=Ua(b)).h,(d=Ua(d)).h),f=_a(b.s,d.s),g=_a(b.l,d.l),h=_a(b.opacity,d.opacity);return function(a){return b.h=e(a),b.s=f(a),b.l=g(Math.pow(a,c)),b.opacity=h(a),b+""}}return c=+c,d.gamma=b,d}(1)}function kb(){return Cl||(Fl(lb),Cl=El.now()+Dl)}function lb(){Cl=0}function mb(){this._call=this._time=this._next=null}function nb(a,b,c){var d=new mb;return d.restart(a,b,c),d}function ob(){kb(),++xl;for(var a,b=Vk;b;)(a=Cl-b._time)>=0&&b._call.call(null,a),b=b._next;--xl}function pb(){Cl=(Bl=El.now())+Dl,xl=yl=0;try{ob()}finally{xl=0,rb(),Cl=0}}function qb(){var a=El.now(),b=a-Bl;b>Al&&(Dl-=b,Bl=a)}function rb(){for(var a,b,c=Vk,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:Vk=b);Wk=a,sb(d)}function sb(a){xl||(yl&&(yl=clearTimeout(yl)),a-Cl>24?(1/0>a&&(yl=setTimeout(pb,a-El.now()-Dl)),zl&&(zl=clearInterval(zl))):(zl||(Bl=El.now(),zl=setInterval(qb,Al)),xl=1,Fl(pb)))}function tb(a,b){var c=a.__transition;if(!c||!(c=c[b])||c.state>Jl)throw new Error("too late");return c}function ub(a,b){var c=a.__transition;if(!c||!(c=c[b])||c.state>Ll)throw new Error("too late");return c}function vb(a,b){var c=a.__transition;if(!c||!(c=c[b]))throw new Error("too late");return c}function wb(a,b,c){function d(i){var j,k,l,m;if(c.state!==Kl)return f();for(j in h)if((m=h[j]).name===c.name){if(m.state===Ml)return Gl(d);m.state===Nl?(m.state=Pl,m.timer.stop(),m.on.call("interrupt",a,a.__data__,m.index,m.group),delete h[j]):b>+j&&(m.state=Pl,m.timer.stop(),delete h[j])}if(Gl(function(){c.state===Ml&&(c.state=Nl,c.timer.restart(e,c.delay,c.time),e(i))}),c.state=Ll,c.on.call("start",a,a.__data__,c.index,c.group),c.state===Ll){for(c.state=Ml,g=new Array(l=c.tween.length),j=0,k=-1;l>j;++j)(m=c.tween[j].value.call(a,a.__data__,c.index,c.group))&&(g[++k]=m);g.length=k+1}}function e(b){for(var d=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(f),c.state=Ol,1),e=-1,h=g.length;++e<h;)g[e].call(null,d);c.state===Ol&&(c.on.call("end",a,a.__data__,c.index,c.group),f())}function f(){c.state=Pl,c.timer.stop(),delete h[b];for(var d in h)return;delete a.__transition}var g,h=a.__transition;h[b]=c,c.timer=nb(function(a){c.state=Kl,c.timer.restart(d,c.delay,c.time),c.delay<=a&&d(a-c.delay)},0,c.time)}function xb(a,b){var c,d;return function(){var e=ub(this,a),f=e.tween;if(f!==c)for(var g=0,h=(d=c=f).length;h>g;++g)if(d[g].name===b){(d=d.slice()).splice(g,1);break}e.tween=d}}function yb(a,b,c){var d,e;if("function"!=typeof c)throw new Error;return function(){var f=ub(this,a),g=f.tween;if(g!==d){e=(d=g).slice();for(var h={name:b,value:c},i=0,j=e.length;j>i;++i)if(e[i].name===b){e[i]=h;break}i===j&&e.push(h)}f.tween=e}}function zb(a,b,c){var d=a._id;return a.each(function(){var a=ub(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)}),function(a){return vb(a,d).value[b]}}function Ab(a){return function(){this.removeAttribute(a)}}function Bb(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Cb(a,b,c){var d,e;return function(){var f=this.getAttribute(a);return f===c?null:f===d?e:e=b(d=f,c)}}function Db(a,b,c){var d,e;return function(){var f=this.getAttributeNS(a.space,a.local);return f===c?null:f===d?e:e=b(d=f,c)}}function Eb(a,b,c){var d,e,f;return function(){var g,h=c(this);return null!=h?(g=this.getAttribute(a))===h?null:g===d&&h===e?f:f=b(d=g,e=h):void this.removeAttribute(a)}}function Fb(a,b,c){var d,e,f;return function(){var g,h=c(this);return null!=h?(g=this.getAttributeNS(a.space,a.local))===h?null:g===d&&h===e?f:f=b(d=g,e=h):void this.removeAttributeNS(a.space,a.local)}}function Gb(a,b){function c(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttributeNS(a.space,a.local,d(b))}}return c._value=b,c}function Hb(a,b){function c(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttribute(a,d(b))}}return c._value=b,c}function Ib(a,b){return function(){tb(this,a).delay=+b.apply(this,arguments)}}function Jb(a,b){return b=+b,function(){tb(this,a).delay=b}}function Kb(a,b){return function(){ub(this,a).duration=+b.apply(this,arguments)}}function Lb(a,b){return b=+b,function(){ub(this,a).duration=b}}function Mb(a,b){if("function"!=typeof b)throw new Error;return function(){ub(this,a).ease=b}}function Nb(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");return b>=0&&(a=a.slice(0,b)),!a||"start"===a})}function Ob(a,b,c){var d,e,f=Nb(b)?tb:ub;return function(){var g=f(this,a),h=g.on;h!==d&&(e=(d=h).copy()).on(b,c),g.on=e}}function Pb(a){return function(){var b=this.parentNode;for(var c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function Qb(a,b){var c,d,e;return function(){var f=Q(this,a),g=(this.style.removeProperty(a),Q(this,a));return f===g?null:f===c&&g===d?e:e=b(c=f,d=g)}}function Rb(a){return function(){this.style.removeProperty(a)}}function Sb(a,b,c){var d,e;return function(){var f=Q(this,a);return f===c?null:f===d?e:e=b(d=f,c)}}function Tb(a,b,c){var d,e,f;return function(){var g=Q(this,a),h=c(this);return null==h&&(this.style.removeProperty(a),h=Q(this,a)),g===h?null:g===d&&h===e?f:f=b(d=g,e=h)}}function Ub(a,b,c){function d(){var d=this,e=b.apply(d,arguments);return e&&function(b){d.style.setProperty(a,e(b),c)}}return d._value=b,d}function Vb(a){return function(){this.textContent=a}}function Wb(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function Xb(a,b,c,d){this._groups=a,this._parents=b,this._name=c,this._id=d}function Yb(a){return oa().transition(a)}function Zb(){return++Ul}function $b(a){return((a*=2)<=1?a*a:--a*(2-a)+1)/2}function _b(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}function ac(a){return(1-Math.cos(Zl*a))/2}function bc(a){return((a*=2)<=1?Math.pow(2,10*a-10):2-Math.pow(2,10-10*a))/2}function cc(a){return((a*=2)<=1?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}function dc(a){return(a=+a)<_l?im*a*a:bm>a?im*(a-=am)*a+cm:em>a?im*(a-=dm)*a+fm:im*(a-=gm)*a+hm}function ec(a,b){for(var c;!(c=a.__transition)||!(c=c[b]);)if(!(a=a.parentNode))return qm.time=kb(),qm;return c}function fc(){a.event.stopImmediatePropagation()}function gc(a){return{type:a}}function hc(){return!a.event.button}function ic(){var a=this.ownerSVGElement||this;return[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function jc(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}function kc(a){return a[0][0]===a[1][0]||a[0][1]===a[1][1]}function lc(b){function c(a){var c=a.property("__brush",h).selectAll(".overlay").data([gc("overlay")]);c.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Cm.overlay).merge(c).each(function(){var a=jc(this).extent;ik(this).attr("x",a[0][0]).attr("y",a[0][1]).attr("width",a[1][0]-a[0][0]).attr("height",a[1][1]-a[0][1])}),a.selectAll(".selection").data([gc("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Cm.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var e=a.selectAll(".handle").data(b.handles,function(a){return a.type});e.exit().remove(),e.enter().append("rect").attr("class",function(a){return"handle handle--"+a.type}).attr("cursor",function(a){return Cm[a.type]}),a.each(d).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",g)}function d(){var a=ik(this),b=jc(this).selection;b?(a.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),a.selectAll(".handle").style("display",null).attr("x",function(a){return"e"===a.type[a.type.length-1]?b[1][0]-n/2:b[0][0]-n/2}).attr("y",function(a){return"s"===a.type[0]?b[1][1]-n/2:b[0][1]-n/2}).attr("width",function(a){return"n"===a.type||"s"===a.type?b[1][0]-b[0][0]+n:n}).attr("height",function(a){return"e"===a.type||"w"===a.type?b[1][1]-b[0][1]+n:n})):a.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function e(a,b){return a.__brush.emitter||new f(a,b)}function f(a,b){this.that=a,this.args=b,this.state=a.__brush,this.active=0}function g(){function c(){var a=ak(w);!I||u||v||(Math.abs(a[0]-K[0])>Math.abs(a[1]-K[1])?v=!0:u=!0),K=a,t=!0,um(),f()}function f(){var a;switch(r=K[0]-J[0],s=K[1]-J[1],y){case wm:case vm:z&&(r=Math.max(E-h,Math.min(G-n,r)),j=h+r,o=n+r),A&&(s=Math.max(F-l,Math.min(H-p,s)),m=l+s,q=p+s);break;case xm:0>z?(r=Math.max(E-h,Math.min(G-h,r)),j=h+r,o=n):z>0&&(r=Math.max(E-n,Math.min(G-n,r)),j=h,o=n+r),0>A?(s=Math.max(F-l,Math.min(H-l,s)),m=l+s,q=p):A>0&&(s=Math.max(F-p,Math.min(H-p,s)),m=l,q=p+s);break;case ym:z&&(j=Math.max(E,Math.min(G,h-r*z)),o=Math.max(E,Math.min(G,n+r*z))),A&&(m=Math.max(F,Math.min(H,l-s*A)),q=Math.max(F,Math.min(H,p+s*A)))}j>o&&(z*=-1,a=h,h=n,n=a,a=j,j=o,o=a,x in Dm&&N.attr("cursor",Cm[x=Dm[x]])),m>q&&(A*=-1,a=l,l=p,p=a,a=m,m=q,q=a,x in Em&&N.attr("cursor",Cm[x=Em[x]])),B.selection&&(D=B.selection),u&&(j=D[0][0],o=D[1][0]),v&&(m=D[0][1],q=D[1][1]),D[0][0]===j&&D[0][1]===m&&D[1][0]===o&&D[1][1]===q||(B.selection=[[j,m],[o,q]],d.call(w),L.brush())}function g(){if(fc(),a.event.touches){if(a.event.touches.length)return;i&&clearTimeout(i),i=setTimeout(function(){i=null},500),M.on("touchmove.brush touchend.brush touchcancel.brush",null)}else qa(a.event.view,t),O.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);M.attr("pointer-events","all"),N.attr("cursor",Cm.overlay),B.selection&&(D=B.selection),kc(D)&&(B.selection=null,d.call(w)),L.end()}if(a.event.touches){if(a.event.changedTouches.length<a.event.touches.length)return um()}else if(i)return;if(k.apply(this,arguments)){var h,j,l,m,n,o,p,q,r,s,t,u,v,w=this,x=a.event.target.__data__.type,y="selection"===(a.event.metaKey?x="overlay":x)?vm:a.event.altKey?ym:xm,z=b===Am?null:Fm[x],A=b===zm?null:Gm[x],B=jc(w),C=B.extent,D=B.selection,E=C[0][0],F=C[0][1],G=C[1][0],H=C[1][1],I=z&&A&&a.event.shiftKey,J=ak(w),K=J,L=e(w,arguments).beforestart();"overlay"===x?B.selection=D=[[h=b===Am?E:J[0],l=b===zm?F:J[1]],[n=b===Am?G:h,p=b===zm?H:l]]:(h=D[0][0],l=D[0][1],n=D[1][0],p=D[1][1]),j=h,m=l,o=n,q=p;var M=ik(w).attr("pointer-events","none"),N=M.selectAll(".overlay").attr("cursor",Cm[x]);if(a.event.touches)M.on("touchmove.brush",c,!0).on("touchend.brush touchcancel.brush",g,!0);else{var O=ik(a.event.view).on("keydown.brush",function(){switch(a.event.keyCode){case 16:I=z&&A;break;case 18:y===xm&&(z&&(n=o-r*z,h=j+r*z),A&&(p=q-s*A,l=m+s*A),y=ym,f());break;case 32:y!==xm&&y!==ym||(0>z?n=o-r:z>0&&(h=j-r),0>A?p=q-s:A>0&&(l=m-s),y=wm,N.attr("cursor",Cm.selection),f());break;default:return}um()},!0).on("keyup.brush",function(){switch(a.event.keyCode){case 16:I&&(u=v=I=!1,f());break;case 18:y===ym&&(0>z?n=o:z>0&&(h=j),0>A?p=q:A>0&&(l=m),y=xm,f());break;case 32:y===wm&&(a.event.altKey?(z&&(n=o-r*z,h=j+r*z),A&&(p=q-s*A,l=m+s*A),y=ym):(0>z?n=o:z>0&&(h=j),0>A?p=q:A>0&&(l=m),y=xm),N.attr("cursor",Cm[x]),f());break;default:return}um()},!0).on("mousemove.brush",c,!0).on("mouseup.brush",g,!0);lk(a.event.view)}fc(),Rl(w),d.call(w),L.start()}}function h(){var a=this.__brush||{selection:null};return a.extent=j.apply(this,arguments),a.dim=b,a}var i,j=ic,k=hc,l=m(c,"start","brush","end"),n=6;return c.move=function(a,c){a.selection?a.on("start.brush",function(){e(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){e(this,arguments).end()}).tween("brush",function(){function a(a){g.selection=1===a&&kc(j)?null:k(a),d.call(f),h.brush()}var f=this,g=f.__brush,h=e(f,arguments),i=g.selection,j=b.input("function"==typeof c?c.apply(this,arguments):c,g.extent),k=il(i,j);return i&&j?a:a(1)}):a.each(function(){var a=this,f=arguments,g=a.__brush,h=b.input("function"==typeof c?c.apply(a,f):c,g.extent),i=e(a,f).beforestart();Rl(a),g.selection=null==h||kc(h)?null:h,d.call(a),i.start().brush().end()})},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(a){A(new tm(c,a,b.output(this.state.selection)),l.apply,l,[a,this.that,this.args])}},c.extent=function(a){return arguments.length?(j="function"==typeof a?a:sm([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),c):j},c.filter=function(a){return arguments.length?(k="function"==typeof a?a:sm(!!a),c):k},c.handleSize=function(a){return arguments.length?(n=+a,c):n},c.on=function(){var a=l.on.apply(l,arguments);return a===l?c:a},c}function mc(a){return function(b,c){return a(b.source.value+b.target.value,c.source.value+c.target.value)}}function nc(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function oc(){return new nc}function pc(a){return a.source}function qc(a){return a.target}function rc(a){return a.radius}function sc(a){return a.startAngle}function tc(a){return a.endAngle}function uc(){}function vc(a,b){var c=new uc;if(a instanceof uc)a.each(function(a,b){c.set(b,a)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(null==b)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b(d=a[e],e,a),d)}else if(a)for(var g in a)c.set(g,a[g]);return c}function wc(){return{}}function xc(a,b,c){a[b]=c}function yc(){return vc()}function zc(a,b,c){a.set(b,c)}function Ac(){}function Bc(a,b){var c=new Ac;if(a instanceof Ac)a.each(function(a){c.add(a)});else if(a){var d=-1,e=a.length;if(null==b)for(;++d<e;)c.add(a[d]);else for(;++d<e;)c.add(b(a[d],d,a))}return c}function Cc(a){return new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")}function Dc(a,b){var c=Cc(a);return function(d,e){return b(c(d),e,a)}}function Ec(a){var b=Object.create(null),c=[];return a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)}),c}function Fc(a,b,c,d){if(isNaN(b)||isNaN(c))return a;var e,f,g,h,i,j,k,l,m,n=a._root,o={data:d},p=a._x0,q=a._y0,r=a._x1,s=a._y1;if(!n)return a._root=o,a;for(;n.length;)if((j=b>=(f=(p+r)/2))?p=f:r=f,(k=c>=(g=(q+s)/2))?q=g:s=g,e=n,!(n=n[l=k<<1|j]))return e[l]=o,a;if(h=+a._x.call(null,n.data),i=+a._y.call(null,n.data),b===h&&c===i)return o.next=n,e?e[l]=o:a._root=o,a;do e=e?e[l]=new Array(4):a._root=new Array(4),(j=b>=(f=(p+r)/2))?p=f:r=f,(k=c>=(g=(q+s)/2))?q=g:s=g;while((l=k<<1|j)==(m=(i>=g)<<1|h>=f));return e[m]=n,e[l]=o,a}function Gc(a){return a[0]}function Hc(a){return a[1]}function Ic(a,b,c){var d=new Jc(null==b?Gc:b,null==c?Hc:c,NaN,NaN,NaN,NaN);return null==a?d:d.addAll(a)}function Jc(a,b,c,d,e,f){this._x=a,this._y=b,this._x0=c,this._y0=d,this._x1=e,this._y1=f,this._root=void 0}function Kc(a){for(var b={data:a.data},c=b;a=a.next;)c=c.next={data:a.data};return b}function Lc(a){return a.x+a.vx}function Mc(a){return a.y+a.vy}function Nc(a){return a.index}function Oc(a,b){var c=a.get(b);if(!c)throw new Error("missing: "+b);return c}function Pc(a){return a.x}function Qc(a){return a.y}function Rc(a){return new Sc(a)}function Sc(a){if(!(b=vn.exec(a)))throw new Error("invalid format: "+a);var b,c=b[1]||" ",d=b[2]||">",e=b[3]||"-",f=b[4]||"",g=!!b[5],h=b[6]&&+b[6],i=!!b[7],j=b[8]&&+b[8].slice(1),k=b[9]||"";"n"===k?(i=!0,k="g"):un[k]||(k=""),(g||"0"===c&&"="===d)&&(g=!0,c="0",d="="),this.fill=c,this.align=d,this.sign=e,this.symbol=f,this.zero=g,this.width=h,this.comma=i,this.precision=j,this.type=k}function Tc(b){return wn=zn(b),a.format=wn.format,a.formatPrefix=wn.formatPrefix,wn}function Uc(){this.reset()}function Vc(a,b,c){var d=a.s=b+c,e=d-b,f=d-e;a.t=b-f+(c-e)}function Wc(a){return a>1?0:-1>a?ko:Math.acos(a)}function Xc(a){return a>1?lo:-1>a?-lo:Math.asin(a)}function Yc(a){return(a=yo(a/2))*a}function Zc(){}function $c(a,b){a&&Do.hasOwnProperty(a.type)&&Do[a.type](a,b)}function _c(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function ad(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)_c(a[c],b,1);b.polygonEnd()}function bd(){Ho.point=dd}function cd(){ed(En,Fn)}function dd(a,b){Ho.point=ed,En=a,Fn=b,
Gn=a*=po,Hn=to(b=(b*=po)/2+mo),In=yo(b)}function ed(a,b){b=(b*=po)/2+mo;var c=(a*=po)-Gn,d=c>=0?1:-1,e=d*c,f=to(b),g=yo(b),h=In*g,i=Hn*f+h*to(e),j=h*d*yo(e);Fo.add(so(j,i)),Gn=a,Hn=f,In=g}function fd(a){return[so(a[1],a[0]),Xc(a[2])]}function gd(a){var b=a[0],c=a[1],d=to(c);return[d*to(b),d*yo(b),yo(c)]}function hd(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function id(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function jd(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function kd(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function ld(a){var b=Ao(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function md(a,b){Rn.push(Sn=[Jn=a,Ln=a]),Kn>b&&(Kn=b),b>Mn&&(Mn=b)}function nd(a,b){var c=gd([a*po,b*po]);if(Qn){var d=id(Qn,c),e=id([d[1],-d[0],0],d);ld(e),e=fd(e);var f,g=a-Nn,h=g>0?1:-1,i=e[0]*oo*h,j=qo(g)>180;j^(i>h*Nn&&h*a>i)?(f=e[1]*oo)>Mn&&(Mn=f):(i=(i+360)%360-180,j^(i>h*Nn&&h*a>i)?(f=-e[1]*oo)<Kn&&(Kn=f):(Kn>b&&(Kn=b),b>Mn&&(Mn=b))),j?Nn>a?td(Jn,a)>td(Jn,Ln)&&(Ln=a):td(a,Ln)>td(Jn,Ln)&&(Jn=a):Ln>=Jn?(Jn>a&&(Jn=a),a>Ln&&(Ln=a)):a>Nn?td(Jn,a)>td(Jn,Ln)&&(Ln=a):td(a,Ln)>td(Jn,Ln)&&(Jn=a)}else Rn.push(Sn=[Jn=a,Ln=a]);Kn>b&&(Kn=b),b>Mn&&(Mn=b),Qn=c,Nn=a}function od(){Jo.point=nd}function pd(){Sn[0]=Jn,Sn[1]=Ln,Jo.point=md,Qn=null}function qd(a,b){if(Qn){var c=a-Nn;Io.add(qo(c)>180?c+(c>0?360:-360):c)}else On=a,Pn=b;Ho.point(a,b),nd(a,b)}function rd(){Ho.lineStart()}function sd(){qd(On,Pn),Ho.lineEnd(),qo(Io)>jo&&(Jn=-(Ln=180)),Sn[0]=Jn,Sn[1]=Ln,Qn=null}function td(a,b){return(b-=a)<0?b+360:b}function ud(a,b){return a[0]-b[0]}function vd(a,b){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}function wd(a,b){a*=po;var c=to(b*=po);xd(c*to(a),c*yo(a),yo(b))}function xd(a,b,c){Vn+=(a-Vn)/++Tn,Wn+=(b-Wn)/Tn,Xn+=(c-Xn)/Tn}function yd(){Ko.point=zd}function zd(a,b){a*=po;var c=to(b*=po);fo=c*to(a),go=c*yo(a),ho=yo(b),Ko.point=Ad,xd(fo,go,ho)}function Ad(a,b){a*=po;var c=to(b*=po),d=c*to(a),e=c*yo(a),f=yo(b),g=so(Ao((g=go*f-ho*e)*g+(g=ho*d-fo*f)*g+(g=fo*e-go*d)*g),fo*d+go*e+ho*f);Un+=g,Yn+=g*(fo+(fo=d)),Zn+=g*(go+(go=e)),$n+=g*(ho+(ho=f)),xd(fo,go,ho)}function Bd(){Ko.point=wd}function Cd(){Ko.point=Ed}function Dd(){Fd(co,eo),Ko.point=wd}function Ed(a,b){co=a,eo=b,a*=po,b*=po,Ko.point=Fd;var c=to(b);fo=c*to(a),go=c*yo(a),ho=yo(b),xd(fo,go,ho)}function Fd(a,b){a*=po;var c=to(b*=po),d=c*to(a),e=c*yo(a),f=yo(b),g=go*f-ho*e,h=ho*d-fo*f,i=fo*e-go*d,j=Ao(g*g+h*h+i*i),k=Xc(j),l=j&&-k/j;_n+=l*g,ao+=l*h,bo+=l*i,Un+=k,Yn+=k*(fo+(fo=d)),Zn+=k*(go+(go=e)),$n+=k*(ho+(ho=f)),xd(fo,go,ho)}function Gd(a,b){return[a>ko?a-no:-ko>a?a+no:a,b]}function Hd(a,b,c){return(a%=no)?b||c?Mo(Jd(a),Kd(b,c)):Jd(a):b||c?Kd(b,c):Gd}function Id(a){return function(b,c){return b+=a,[b>ko?b-no:-ko>b?b+no:b,c]}}function Jd(a){var b=Id(a);return b.invert=Id(-a),b}function Kd(a,b){function c(a,b){var c=to(b),h=to(a)*c,i=yo(a)*c,j=yo(b),k=j*d+h*e;return[so(i*f-k*g,h*d-j*e),Xc(k*f+i*g)]}var d=to(a),e=yo(a),f=to(b),g=yo(b);return c.invert=function(a,b){var c=to(b),h=to(a)*c,i=yo(a)*c,j=yo(b),k=j*f-i*g;return[so(i*f+j*g,h*d+k*e),Xc(k*d-h*e)]},c}function Ld(a,b,c,d,e,f){if(c){var g=to(b),h=yo(b),i=d*c;null==e?(e=b+d*no,f=b-i/2):(e=Md(g,e),f=Md(g,f),(d>0?f>e:e>f)&&(e+=d*no));for(var j,k=e;d>0?k>f:f>k;k-=i)j=fd([g,-h*to(k),-h*yo(k)]),a.point(j[0],j[1])}}function Md(a,b){(b=gd(b))[0]-=a,ld(b);var c=Wc(-b[1]);return((-b[2]<0?-c:c)+no-jo)%no}function Nd(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Od(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Pd(a){return a.length>1}function Qd(a,b){return((a=a.x)[0]<0?a[1]-lo-jo:lo-a[1])-((b=b.x)[0]<0?b[1]-lo-jo:lo-b[1])}function Rd(a,b,c,d){var e,f,g=yo(a-c);return qo(g)>jo?ro((yo(b)*(f=to(d))*yo(c)-yo(d)*(e=to(b))*yo(a))/(e*f*g)):(b+d)/2}function Sd(a,b,c,d){function e(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function f(e,f,h,j){var k=0,l=0;if(null==e||(k=g(e,h))!==(l=g(f,h))||i(e,f)<0^h>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+h+4)%4)!==l)}else j.point(f[0],f[1])}function g(d,e){return qo(d[0]-a)<jo?e>0?0:3:qo(d[0]-c)<jo?e>0?2:1:qo(d[1]-b)<jo?e>0?1:0:e>0?3:2}function h(a,b){return i(a.x,b.x)}function i(a,b){var c=g(a,1),d=g(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(g){function i(a,b){e(a,b)&&w.point(a,b)}function j(){for(var b=0,c=0,e=m.length;e>c;++c)for(var f,g,h=m[c],i=1,j=h.length,k=h[0],l=k[0],n=k[1];j>i;++i)f=l,g=n,l=(k=h[i])[0],n=k[1],d>=g?n>d&&(l-f)*(d-g)>(n-g)*(a-f)&&++b:d>=n&&(n-g)*(a-f)>(l-f)*(d-g)&&--b;return b}function k(f,g){var h=e(f,g);if(m&&n.push([f,g]),u)o=f,p=g,q=h,u=!1,h&&(w.lineStart(),w.point(f,g));else if(h&&t)w.point(f,g);else{var i=[r=Math.max(hp,Math.min(gp,r)),s=Math.max(hp,Math.min(gp,s))],j=[f=Math.max(hp,Math.min(gp,f)),g=Math.max(hp,Math.min(gp,g))];fp(i,j,a,b,c,d)?(t||(w.lineStart(),w.point(i[0],i[1])),w.point(j[0],j[1]),h||w.lineEnd(),v=!1):h&&(w.lineStart(),w.point(f,g),v=!1)}r=f,s=g,t=h}var l,m,n,o,p,q,r,s,t,u,v,w=g,x=Zo(),y={point:i,lineStart:function(){y.point=k,m&&m.push(n=[]),u=!0,t=!1,r=s=NaN},lineEnd:function(){l&&(k(o,p),q&&t&&x.rejoin(),l.push(x.result())),y.point=i,t&&w.lineEnd()},polygonStart:function(){w=x,l=[],m=[],v=!0},polygonEnd:function(){var a=j(),b=v&&a,c=(l=Fj(l)).length;(b||c)&&(g.polygonStart(),b&&(g.lineStart(),f(null,null,1,g),g.lineEnd()),c&&_o(l,h,a,f,g),g.polygonEnd()),w=g,l=m=n=null}};return y}}function Td(){jp.point=jp.lineEnd=Zc}function Ud(a,b){No=a*=po,Oo=yo(b*=po),Po=to(b),jp.point=Vd}function Vd(a,b){a*=po;var c=yo(b*=po),d=to(b),e=qo(a-No),f=to(e),g=d*yo(e),h=Po*c-Oo*d*f,i=Oo*c+Po*d*f;ip.add(so(Ao(g*g+h*h),i)),No=a,Oo=c,Po=d}function Wd(a,b){return!(!a||!pp.hasOwnProperty(a.type))&&pp[a.type](a,b)}function Xd(a,b){return 0===np(a,b)}function Yd(a,b){var c=np(a[0],a[1]);return np(a[0],b)+np(b,a[1])<=c+jo}function Zd(a,b){return!!bp(a.map($d),_d(b))}function $d(a){return(a=a.map(_d)).pop(),a}function _d(a){return[a[0]*po,a[1]*po]}function ae(a,b,c){var d=yj(a,b-jo,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function be(a,b,c){var d=yj(a,b-jo,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function ce(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return yj(uo(f/q)*q,e,q).map(m).concat(yj(uo(j/r)*r,i,r).map(n)).concat(yj(uo(d/o)*o,c,o).filter(function(a){return qo(a%q)>jo}).map(k)).concat(yj(uo(h/p)*p,g,p).filter(function(a){return qo(a%r)>jo}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.extentMajor(b).extentMinor(b):a.extentMinor()},a.extentMajor=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.extentMinor=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.stepMajor(b).stepMinor(b):a.stepMinor()},a.stepMajor=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.stepMinor=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=ae(h,g,90),l=be(d,c,s),m=ae(j,i,90),n=be(f,e,s),a):s},a.extentMajor([[-180,-90+jo],[180,90-jo]]).extentMinor([[-180,-80-jo],[180,80+jo]])}function de(){tp.point=ee}function ee(a,b){tp.point=fe,Qo=So=a,Ro=To=b}function fe(a,b){sp.add(To*a-So*b),So=a,To=b}function ge(){fe(Qo,Ro)}function he(a,b){zp+=a,Ap+=b,++Bp}function ie(){Ip.point=je}function je(a,b){Ip.point=ke,he(Wo=a,Xo=b)}function ke(a,b){var c=a-Wo,d=b-Xo,e=Ao(c*c+d*d);Cp+=e*(Wo+a)/2,Dp+=e*(Xo+b)/2,Ep+=e,he(Wo=a,Xo=b)}function le(){Ip.point=he}function me(){Ip.point=oe}function ne(){pe(Uo,Vo)}function oe(a,b){Ip.point=pe,he(Uo=Wo=a,Vo=Xo=b)}function pe(a,b){var c=a-Wo,d=b-Xo,e=Ao(c*c+d*d);Cp+=e*(Wo+a)/2,Dp+=e*(Xo+b)/2,Ep+=e,Fp+=(e=Xo*a-Wo*b)*(Wo+a),Gp+=e*(Xo+b),Hp+=3*e,he(Wo=a,Xo=b)}function qe(a){this._context=a}function re(a,b){Pp.point=se,Kp=Mp=a,Lp=Np=b}function se(a,b){Mp-=a,Np-=b,Op.add(Ao(Mp*Mp+Np*Np)),Mp=a,Np=b}function te(){this._string=[]}function ue(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function ve(a){return function(b){var c=new we;for(var d in a)c[d]=a[d];return c.stream=b,c}}function we(){}function xe(a,b,c){var d=b[1][0]-b[0][0],e=b[1][1]-b[0][1],f=a.clipExtent&&a.clipExtent();a.scale(150).translate([0,0]),null!=f&&a.clipExtent(null),Eo(c,a.stream(yp));var g=yp.result(),h=Math.min(d/(g[1][0]-g[0][0]),e/(g[1][1]-g[0][1])),i=+b[0][0]+(d-h*(g[1][0]+g[0][0]))/2,j=+b[0][1]+(e-h*(g[1][1]+g[0][1]))/2;return null!=f&&a.clipExtent(f),a.scale(150*h).translate([i,j])}function ye(a,b,c){return xe(a,[[0,0],b],c)}function ze(a){return ve({point:function(b,c){b=a(b,c),this.stream.point(b[0],b[1])}})}function Ae(a,b){function c(d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=j-d,s=k-e,t=r*r+s*s;if(t>4*b&&p--){var u=g+m,v=h+n,w=i+o,x=Ao(u*u+v*v+w*w),y=Xc(w/=x),z=qo(qo(w)-1)<jo||qo(f-l)<jo?(f+l)/2:so(v,u),A=a(z,y),B=A[0],C=A[1],D=B-d,E=C-e,F=s*D-r*E;(F*F/t>b||qo((r*D+s*E)/t-.5)>.3||Rp>g*m+h*n+i*o)&&(c(d,e,f,g,h,i,B,C,z,u/=x,v/=x,w,p,q),q.point(B,C),c(B,C,z,u,v,w,j,k,l,m,n,o,p,q))}}return function(b){function d(c,d){c=a(c,d),b.point(c[0],c[1])}function e(){r=NaN,w.point=f,b.lineStart()}function f(d,e){var f=gd([d,e]),g=a(d,e);c(r,s,q,t,u,v,r=g[0],s=g[1],q=d,t=f[0],u=f[1],v=f[2],Qp,b),b.point(r,s)}function g(){w.point=d,b.lineEnd()}function h(){e(),w.point=i,w.lineEnd=j}function i(a,b){f(k=a,b),l=r,m=s,n=t,o=u,p=v,w.point=f}function j(){c(r,s,q,t,u,v,l,m,k,n,o,p,Qp,b),w.lineEnd=g,g()}var k,l,m,n,o,p,q,r,s,t,u,v,w={point:d,lineStart:e,lineEnd:g,polygonStart:function(){b.polygonStart(),w.lineStart=h},polygonEnd:function(){b.polygonEnd(),w.lineStart=e}};return w}}function Be(a){return ve({point:function(b,c){var d=a(b,c);return this.stream.point(d[0],d[1])}})}function Ce(a){return De(function(){return a})()}function De(a){function b(a){return a=k(a[0]*po,a[1]*po),[a[0]*q+h,i-a[1]*q]}function c(a){return(a=k.invert((a[0]-h)/q,(i-a[1])/q))&&[a[0]*oo,a[1]*oo]}function d(a,b){return a=g(a,b),[a[0]*q+h,i-a[1]*q]}function e(){k=Mo(j=Hd(v,w,x),g);var a=g(t,u);return h=r-a[0]*q,i=s+a[1]*q,f()}function f(){return o=p=null,b}var g,h,i,j,k,l,m,n,o,p,q=150,r=480,s=250,t=0,u=0,v=0,w=0,x=0,y=null,z=dp,A=null,B=qp,C=.5,D=Sp(d,C);return b.stream=function(a){return o&&p===a?o:o=Tp(Be(j)(z(D(B(p=a)))))},b.preclip=function(a){return arguments.length?(z=a,y=void 0,f()):z},b.postclip=function(a){return arguments.length?(B=a,A=l=m=n=null,f()):B},b.clipAngle=function(a){return arguments.length?(z=+a?ep(y=a*po):(y=null,dp),f()):y*oo},b.clipExtent=function(a){return arguments.length?(B=null==a?(A=l=m=n=null,qp):Sd(A=+a[0][0],l=+a[0][1],m=+a[1][0],n=+a[1][1]),f()):null==A?null:[[A,l],[m,n]]},b.scale=function(a){return arguments.length?(q=+a,e()):q},b.translate=function(a){return arguments.length?(r=+a[0],s=+a[1],e()):[r,s]},b.center=function(a){return arguments.length?(t=a[0]%360*po,u=a[1]%360*po,e()):[t*oo,u*oo]},b.rotate=function(a){return arguments.length?(v=a[0]%360*po,w=a[1]%360*po,x=a.length>2?a[2]%360*po:0,e()):[v*oo,w*oo,x*oo]},b.precision=function(a){return arguments.length?(D=Sp(d,C=a*a),f()):Ao(C)},b.fitExtent=function(a,c){return xe(b,a,c)},b.fitSize=function(a,c){return ye(b,a,c)},function(){return g=a.apply(this,arguments),b.invert=g.invert&&c,e()}}function Ee(a){var b=0,c=ko/3,d=De(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*po,c=a[1]*po):[b*oo,c*oo]},e}function Fe(a){function b(a,b){return[a*c,yo(b)/c]}var c=to(a);return b.invert=function(a,b){return[a/c,Xc(b*c)]},b}function Ge(a,b){function c(a,b){var c=Ao(f-2*e*yo(b))/e;return[c*yo(a*=e),g-c*to(a)]}var d=yo(a),e=(d+yo(b))/2;if(qo(e)<jo)return Fe(a);var f=1+d*(2*e-d),g=Ao(f)/e;return c.invert=function(a,b){var c=g-b;return[so(a,qo(c))/e*zo(c),Xc((f-(a*a+c*c)*e*e)/(2*e))]},c}function He(a){var b=a.length;return{point:function(c,d){for(var e=-1;++e<b;)a[e].point(c,d)},sphere:function(){for(var c=-1;++c<b;)a[c].sphere()},lineStart:function(){for(var c=-1;++c<b;)a[c].lineStart()},lineEnd:function(){for(var c=-1;++c<b;)a[c].lineEnd()},polygonStart:function(){for(var c=-1;++c<b;)a[c].polygonStart()},polygonEnd:function(){for(var c=-1;++c<b;)a[c].polygonEnd()}}}function Ie(a){return function(b,c){var d=to(b),e=to(c),f=a(d*e);return[f*e*yo(b),f*yo(c)]}}function Je(a){return function(b,c){var d=Ao(b*b+c*c),e=a(d),f=yo(e),g=to(e);return[so(b*f,d*g),Xc(d&&c*f/d)]}}function Ke(a,b){return[a,wo(Bo((lo+b)/2))]}function Le(a){function b(){var b=ko*h(),g=f(Yo(f.rotate()).invert([0,0]));return j(null==k?[[g[0]-b,g[1]-b],[g[0]+b,g[1]+b]]:a===Ke?[[Math.max(g[0]-b,k),c],[Math.min(g[0]+b,d),e]]:[[k,Math.max(g[1]-b,c)],[d,Math.min(g[1]+b,e)]])}var c,d,e,f=Ce(a),g=f.center,h=f.scale,i=f.translate,j=f.clipExtent,k=null;return f.scale=function(a){return arguments.length?(h(a),b()):h()},f.translate=function(a){return arguments.length?(i(a),b()):i()},f.center=function(a){return arguments.length?(g(a),b()):g()},f.clipExtent=function(a){return arguments.length?(null==a?k=c=d=e=null:(k=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),b()):null==k?null:[[k,c],[d,e]]},b()}function Me(a){return Bo((lo+a)/2)}function Ne(a,b){function c(a,b){f>0?-lo+jo>b&&(b=-lo+jo):b>lo-jo&&(b=lo-jo);var c=f/xo(Me(b),e);return[c*yo(e*a),f-c*to(e*a)]}var d=to(a),e=a===b?yo(a):wo(d/to(b))/wo(Me(b)/Me(a)),f=d*xo(Me(a),e)/e;return e?(c.invert=function(a,b){var c=f-b,d=zo(e)*Ao(a*a+c*c);return[so(a,qo(c))/e*zo(c),2*ro(xo(f/d,1/e))-lo]},c):Ke}function Oe(a,b){return[a,b]}function Pe(a,b){function c(a,b){var c=f-b,d=e*a;return[c*yo(d),f-c*to(d)]}var d=to(a),e=a===b?yo(a):(d-to(b))/(b-a),f=d/e+a;return qo(e)<jo?Oe:(c.invert=function(a,b){var c=f-b;return[so(a,qo(c))/e*zo(c),f-zo(e)*Ao(a*a+c*c)]},c)}function Qe(a,b){var c=to(b),d=to(a)*c;return[c*yo(a)/d,yo(b)/d]}function Re(a,b,c,d){return 1===a&&1===b&&0===c&&0===d?qp:ve({point:function(e,f){this.stream.point(e*a+c,f*b+d)}})}function Se(a,b){var c=b*b,d=c*c;return[a*(.8707-.131979*c+d*(d*(.003971*c-.001529*d)-.013791)),b*(1.007226+c*(.015085+d*(.028874*c-.044475-.005916*d)))]}function Te(a,b){return[to(b)*yo(a),yo(b)]}function Ue(a,b){var c=to(b),d=1+to(a)*c;return[c*yo(a)/d,yo(b)/d]}function Ve(a,b){return[wo(Bo((lo+b)/2)),-a]}function We(a,b){return a.parent===b.parent?1:2}function Xe(a){return a.reduce(Ye,0)/a.length}function Ye(a,b){return a+b.x}function Ze(a){return 1+a.reduce($e,0)}function $e(a,b){return Math.max(a,b.y)}function _e(a){for(var b;b=a.children;)a=b[0];return a}function af(a){for(var b;b=a.children;)a=b[b.length-1];return a}function bf(a){var b=0,c=a.children,d=c&&c.length;if(d)for(;--d>=0;)b+=c[d].value;else b=1;a.value=b}function cf(a,b){if(a===b)return a;var c=a.ancestors(),d=b.ancestors(),e=null;for(a=c.pop(),b=d.pop();a===b;)e=a,a=c.pop(),b=d.pop();return e}function df(a,b){var c,d,e,f,g,h=new hf(a),i=+a.value&&(h.value=a.value),j=[h];for(null==b&&(b=ef);c=j.pop();)if(i&&(c.value=+c.data.value),(e=b(c.data))&&(g=e.length))for(c.children=new Array(g),f=g-1;f>=0;--f)j.push(d=c.children[f]=new hf(e[f])),d.parent=c,d.depth=c.depth+1;return h.eachBefore(gf)}function ef(a){return a.children}function ff(a){a.data=a.data.data}function gf(a){var b=0;do a.height=b;while((a=a.parent)&&a.height<++b)}function hf(a){this.data=a,this.depth=this.height=0,this.parent=null}function jf(a){for(var b,c,d=a.length;d;)c=Math.random()*d--|0,b=a[d],a[d]=a[c],a[c]=b;return a}function kf(a,b){var c,d;if(nf(b,a))return[b];for(c=0;c<a.length;++c)if(lf(b,a[c])&&nf(qf(a[c],b),a))return[a[c],b];for(c=0;c<a.length-1;++c)for(d=c+1;d<a.length;++d)if(lf(qf(a[c],a[d]),b)&&lf(qf(a[c],b),a[d])&&lf(qf(a[d],b),a[c])&&nf(rf(a[c],a[d],b),a))return[a[c],a[d],b];throw new Error}function lf(a,b){var c=a.r-b.r,d=b.x-a.x,e=b.y-a.y;return 0>c||d*d+e*e>c*c}function mf(a,b){var c=a.r-b.r+1e-6,d=b.x-a.x,e=b.y-a.y;return c>0&&c*c>d*d+e*e}function nf(a,b){for(var c=0;c<b.length;++c)if(!mf(a,b[c]))return!1;return!0}function of(a){switch(a.length){case 1:return pf(a[0]);case 2:return qf(a[0],a[1]);case 3:return rf(a[0],a[1],a[2])}}function pf(a){return{x:a.x,y:a.y,r:a.r}}function qf(a,b){var c=a.x,d=a.y,e=a.r,f=b.x,g=b.y,h=b.r,i=f-c,j=g-d,k=h-e,l=Math.sqrt(i*i+j*j);return{x:(c+f+i/l*k)/2,y:(d+g+j/l*k)/2,r:(l+e+h)/2}}function rf(a,b,c){var d=a.x,e=a.y,f=a.r,g=b.x,h=b.y,i=b.r,j=c.x,k=c.y,l=c.r,m=d-g,n=d-j,o=e-h,p=e-k,q=i-f,r=l-f,s=d*d+e*e-f*f,t=s-g*g-h*h+i*i,u=s-j*j-k*k+l*l,v=n*o-m*p,w=(o*u-p*t)/(2*v)-d,x=(p*q-o*r)/v,y=(n*t-m*u)/(2*v)-e,z=(m*r-n*q)/v,A=x*x+z*z-1,B=2*(f+w*x+y*z),C=w*w+y*y-f*f,D=-(A?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{x:d+w+x*D,y:e+y+z*D,r:D}}function sf(a,b,c){var d=a.x,e=a.y,f=b.r+c.r,g=a.r+c.r,h=b.x-d,i=b.y-e,j=h*h+i*i;if(j){var k=.5+((g*=g)-(f*=f))/(2*j),l=Math.sqrt(Math.max(0,2*f*(g+j)-(g-=j)*g-f*f))/(2*j);c.x=d+k*h+l*i,c.y=e+k*i-l*h}else c.x=d+g,c.y=e}function tf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return e*e-1e-6>c*c+d*d}function uf(a){var b=a._,c=a.next._,d=b.r+c.r,e=(b.x*c.r+c.x*b.r)/d,f=(b.y*c.r+c.y*b.r)/d;return e*e+f*f}function vf(a){this._=a,this.next=null,this.previous=null}function wf(a){if(!(e=a.length))return 0;var b,c,d,e,f,g,h,i,j,k,l;if(b=a[0],b.x=0,b.y=0,!(e>1))return b.r;if(c=a[1],b.x=-c.r,c.x=b.r,c.y=0,!(e>2))return b.r+c.r;sf(c,b,d=a[2]),b=new vf(b),c=new vf(c),d=new vf(d),b.next=d.previous=c,c.next=b.previous=d,d.next=c.previous=b;a:for(h=3;e>h;++h){sf(b._,c._,d=a[h]),d=new vf(d),i=c.next,j=b.previous,k=c._.r,l=b._.r;do if(l>=k){if(tf(i._,d._)){c=i,b.next=c,c.previous=b,--h;continue a}k+=i._.r,i=i.next}else{if(tf(j._,d._)){(b=j).next=c,c.previous=b,--h;continue a}l+=j._.r,j=j.previous}while(i!==j.next);for(d.previous=b,d.next=c,b.next=c.previous=c=d,f=uf(b);(d=d.next)!==c;)(g=uf(d))<f&&(b=d,f=g);c=b.next}for(b=[c._],d=c;(d=d.next)!==c;)b.push(d._);for(d=Zp(b),h=0;e>h;++h)b=a[h],b.x-=d.x,b.y-=d.y;return d.r}function xf(a){return null==a?null:yf(a)}function yf(a){if("function"!=typeof a)throw new Error;return a}function zf(){return 0}function Af(a){return Math.sqrt(a.value)}function Bf(a){return function(b){b.children||(b.r=Math.max(0,+a(b)||0))}}function Cf(a,b){return function(c){if(d=c.children){var d,e,f,g=d.length,h=a(c)*b||0;if(h)for(e=0;g>e;++e)d[e].r+=h;if(f=wf(d),h)for(e=0;g>e;++e)d[e].r-=h;c.r=f+h}}}function Df(a){return function(b){var c=b.parent;b.r*=a,c&&(b.x=c.x+a*b.x,b.y=c.y+a*b.y)}}function Ef(a){return a.id}function Ff(a){return a.parentId}function Gf(a,b){return a.parent===b.parent?1:2}function Hf(a){var b=a.children;return b?b[0]:a.t}function If(a){var b=a.children;return b?b[b.length-1]:a.t}function Jf(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Kf(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)(b=e[f]).z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Lf(a,b,c){return a.a.parent===b.parent?a.a:c}function Mf(a,b){this._=a,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=b}function Nf(a){for(var b,c,d,e,f,g=new Mf(a,0),h=[g];b=h.pop();)if(d=b._.children)for(b.children=new Array(f=d.length),e=f-1;e>=0;--e)h.push(c=b.children[e]=new Mf(d[e],e)),c.parent=b;return(g.parent=new Mf(null,0)).children=[g],g}function Of(a,b,c,d,e,f){for(var g,h,i,j,k,l,m,n,o,p,q,r=[],s=b.children,t=0,u=0,v=s.length,w=b.value;v>t;){i=e-c,j=f-d;do k=s[u++].value;while(!k&&v>u);for(l=m=k,q=k*k*(p=Math.max(j/i,i/j)/(w*a)),o=Math.max(m/q,q/l);v>u;++u){if(k+=h=s[u].value,l>h&&(l=h),h>m&&(m=h),q=k*k*p,(n=Math.max(m/q,q/l))>o){k-=h;break}o=n}r.push(g={value:k,dice:j>i,children:s.slice(t,u)}),g.dice?aq(g,c,d,e,w?d+=j*k/w:f):eq(g,c,d,w?c+=i*k/w:e,f),w-=k,t=u}return r}function Pf(a,b){return a[0]-b[0]||a[1]-b[1]}function Qf(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;++e){for(;d>1&&iq(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Rf(a){this._size=a,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Sf(a){if(!a._start)try{Tf(a)}catch(b){if(a._tasks[a._ended+a._active-1])Vf(a,b);else if(!a._data)throw b}}function Tf(a){for(;a._start=a._waiting&&a._active<a._size;){var b=a._ended+a._active,c=a._tasks[b],d=c.length-1,e=c[d];c[d]=Uf(a,b),--a._waiting,++a._active,c=e.apply(null,c),a._tasks[b]&&(a._tasks[b]=c||kq)}}function Uf(a,b){return function(c,d){a._tasks[b]&&(--a._active,++a._ended,a._tasks[b]=null,null==a._error&&(null!=c?Vf(a,c):(a._data[b]=d,a._waiting?Sf(a):Wf(a))))}}function Vf(a,b){var c,d=a._tasks.length;for(a._error=b,a._data=void 0,a._waiting=NaN;--d>=0;)if((c=a._tasks[d])&&(a._tasks[d]=null,c.abort))try{c.abort()}catch(b){}a._active=NaN,Wf(a)}function Wf(a){if(!a._active&&a._call){var b=a._data;a._data=void 0,a._call(a._error,b)}}function Xf(a){if(null==a)a=1/0;else if(!((a=+a)>=1))throw new Error("invalid concurrency");return new Rf(a)}function Yf(a){return function(b,c){a(null==b?c:null)}}function Zf(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function $f(a,b){return function(c){return a(c.responseText,b)}}function _f(a){function b(b){var f=b+"",g=c.get(f);if(!g){if(e!==Eq)return e;c.set(f,g=d.push(b))}return a[(g-1)%a.length]}var c=vc(),d=[],e=Eq;return a=null==a?[]:Dq.call(a),b.domain=function(a){if(!arguments.length)return d.slice();d=[],c=vc();for(var e,f,g=-1,h=a.length;++g<h;)c.has(f=(e=a[g])+"")||c.set(f,d.push(e));return b},b.range=function(c){return arguments.length?(a=Dq.call(c),b):a.slice()},b.unknown=function(a){return arguments.length?(e=a,b):e},b.copy=function(){return _f().domain(d).range(a).unknown(e)},b}function ag(){function a(){var a=e().length,d=g[1]<g[0],l=g[d-0],m=g[1-d];b=(m-l)/Math.max(1,a-i+2*j),h&&(b=Math.floor(b)),l+=(m-l-b*(a-i))*k,c=b*(1-i),h&&(l=Math.round(l),c=Math.round(c));var n=yj(a).map(function(a){return l+b*a});return f(d?n.reverse():n)}var b,c,d=_f().unknown(void 0),e=d.domain,f=d.range,g=[0,1],h=!1,i=0,j=0,k=.5;return delete d.unknown,d.domain=function(b){return arguments.length?(e(b),a()):e()},d.range=function(b){return arguments.length?(g=[+b[0],+b[1]],a()):g.slice()},d.rangeRound=function(b){return g=[+b[0],+b[1]],h=!0,a()},d.bandwidth=function(){return c},d.step=function(){return b},d.round=function(b){return arguments.length?(h=!!b,a()):h},d.padding=function(b){return arguments.length?(i=j=Math.max(0,Math.min(1,b)),a()):i},d.paddingInner=function(b){return arguments.length?(i=Math.max(0,Math.min(1,b)),a()):i},d.paddingOuter=function(b){return arguments.length?(j=Math.max(0,Math.min(1,b)),a()):j},d.align=function(b){return arguments.length?(k=Math.max(0,Math.min(1,b)),a()):k},d.copy=function(){return ag().domain(e()).range(g).round(h).paddingInner(i).paddingOuter(j).align(k)},a()}function bg(a){var b=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return bg(b())},a}function cg(a,b){return(b-=a=+a)?function(c){return(c-a)/b}:Fq(b)}function dg(a){return function(b,c){var d=a(b=+b,c=+c);return function(a){return b>=a?0:a>=c?1:d(a)}}}function eg(a){return function(b,c){var d=a(b=+b,c=+c);return function(a){return 0>=a?b:a>=1?c:d(a)}}}function fg(a,b,c,d){var e=a[0],f=a[1],g=b[0],h=b[1];return e>f?(e=c(f,e),g=d(h,g)):(e=c(e,f),g=d(g,h)),function(a){return g(e(a))}}function gg(a,b,c,d){var e=Math.min(a.length,b.length)-1,f=new Array(e),g=new Array(e),h=-1;for(a[e]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++h<e;)f[h]=c(a[h],a[h+1]),g[h]=d(b[h],b[h+1]);return function(b){var c=nj(a,b,1,e)-1;return g[c](f[c](b))}}function hg(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp())}function ig(a,b){function c(){return e=Math.min(h.length,i.length)>2?gg:fg,f=g=null,d}function d(b){return(f||(f=e(h,i,k?dg(a):a,j)))(+b)}var e,f,g,h=Hq,i=Hq,j=il,k=!1;return d.invert=function(a){return(g||(g=e(i,h,cg,k?eg(b):b)))(+a)},d.domain=function(a){return arguments.length?(h=Cq.call(a,Gq),c()):h.slice()},d.range=function(a){return arguments.length?(i=Dq.call(a),c()):i.slice()},d.rangeRound=function(a){return i=Dq.call(a),j=jl,c()},d.clamp=function(a){return arguments.length?(k=!!a,c()):k},d.interpolate=function(a){return arguments.length?(j=a,c()):j},c()}function jg(a){var b=a.domain;return a.ticks=function(a){var c=b();return Cj(c[0],c[c.length-1],null==a?10:a)},a.tickFormat=function(a,c){return Iq(b(),a,c)},a.nice=function(c){null==c&&(c=10);var e,f=b(),g=0,h=f.length-1,i=f[g],j=f[h];return i>j&&(e=i,i=j,j=e,e=g,g=h,h=e),(e=d(i,j,c))>0?e=d(i=Math.floor(i/e)*e,j=Math.ceil(j/e)*e,c):0>e&&(e=d(i=Math.ceil(i*e)/e,j=Math.floor(j*e)/e,c)),e>0?(f[g]=Math.floor(i/e)*e,f[h]=Math.ceil(j/e)*e,b(f)):0>e&&(f[g]=Math.ceil(i*e)/e,f[h]=Math.floor(j*e)/e,b(f)),a},a}function kg(){var a=ig(cg,dl);return a.copy=function(){return hg(a,kg())},jg(a)}function lg(){function a(a){return+a}var b=[0,1];return a.invert=a,a.domain=a.range=function(c){return arguments.length?(b=Cq.call(c,Gq),a):b.slice()},a.copy=function(){return lg().domain(b)},jg(a)}function mg(a,b){return(b=Math.log(b/a))?function(c){return Math.log(c/a)/b}:Fq(b)}function ng(a,b){return 0>a?function(c){return-Math.pow(-b,c)*Math.pow(-a,1-c)}:function(c){return Math.pow(b,c)*Math.pow(a,1-c)}}function og(a){return isFinite(a)?+("1e"+a):0>a?0:a}function pg(a){return 10===a?og:a===Math.E?Math.exp:function(b){return Math.pow(a,b)}}function qg(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),function(b){return Math.log(b)/a})}function rg(a){return function(b){return-a(-b)}}function sg(){function b(){return f=qg(e),g=pg(e),d()[0]<0&&(f=rg(f),g=rg(g)),c}var c=ig(mg,ng).domain([1,10]),d=c.domain,e=10,f=qg(10),g=pg(10);return c.base=function(a){return arguments.length?(e=+a,b()):e},c.domain=function(a){return arguments.length?(d(a),b()):d()},c.ticks=function(a){var b,c=d(),h=c[0],i=c[c.length-1];(b=h>i)&&(m=h,h=i,i=m);var j,k,l,m=f(h),n=f(i),o=null==a?10:+a,p=[];if(!(e%1)&&o>n-m){if(m=Math.round(m)-1,n=Math.round(n)+1,h>0){for(;n>m;++m)for(k=1,j=g(m);e>k;++k)if(!((l=j*k)<h)){if(l>i)break;p.push(l)}}else for(;n>m;++m)for(k=e-1,j=g(m);k>=1;--k)if(!((l=j*k)<h)){if(l>i)break;p.push(l)}}else p=Cj(m,n,Math.min(n-m,o)).map(g);return b?p.reverse():p},c.tickFormat=function(b,d){if(null==d&&(d=10===e?".0e":","),"function"!=typeof d&&(d=a.format(d)),b===1/0)return d;null==b&&(b=10);var h=Math.max(1,e*b/c.ticks().length);return function(a){var b=a/g(Math.round(f(a)));return e-.5>b*e&&(b*=e),h>=b?d(a):""}},c.nice=function(){return d(Jq(d(),{floor:function(a){return g(Math.floor(f(a)))},ceil:function(a){return g(Math.ceil(f(a)))}}))},c.copy=function(){return hg(c,sg().base(e))},c}function tg(a,b){return 0>a?-Math.pow(-a,b):Math.pow(a,b)}function ug(){var a=1,b=ig(function(b,c){return(c=tg(c,a)-(b=tg(b,a)))?function(d){return(tg(d,a)-b)/c}:Fq(c)},function(b,c){return c=tg(c,a)-(b=tg(b,a)),function(d){return tg(b+c*d,1/a)}}),c=b.domain;return b.exponent=function(b){return arguments.length?(a=+b,c(c())):a},b.copy=function(){return hg(b,ug().exponent(a))},jg(b)}function vg(){function a(){var a=0,f=Math.max(1,d.length);for(e=new Array(f-1);++a<f;)e[a-1]=Ej(c,a/f);return b}function b(a){return isNaN(a=+a)?void 0:d[nj(e,a)]}var c=[],d=[],e=[];return b.invertExtent=function(a){var b=d.indexOf(a);return 0>b?[NaN,NaN]:[b>0?e[b-1]:c[0],b<e.length?e[b]:c[c.length-1]]},b.domain=function(b){if(!arguments.length)return c.slice();c=[];for(var d,e=0,f=b.length;f>e;++e)null==(d=b[e])||isNaN(d=+d)||c.push(d);return c.sort(kj),a()},b.range=function(b){return arguments.length?(d=Dq.call(b),a()):d.slice()},b.quantiles=function(){return e.slice()},b.copy=function(){return vg().domain(c).range(d)},b}function wg(){function a(a){return a>=a?g[nj(f,a,0,e)]:void 0}function b(){var b=-1;for(f=new Array(e);++b<e;)f[b]=((b+1)*d-(b-e)*c)/(e+1);return a}var c=0,d=1,e=1,f=[.5],g=[0,1];return a.domain=function(a){return arguments.length?(c=+a[0],d=+a[1],b()):[c,d]},a.range=function(a){return arguments.length?(e=(g=Dq.call(a)).length-1,b()):g.slice()},a.invertExtent=function(a){var b=g.indexOf(a);return 0>b?[NaN,NaN]:1>b?[c,f[0]]:b>=e?[f[e-1],d]:[f[b-1],f[b]]},a.copy=function(){return wg().domain([c,d]).range(g)},jg(a)}function xg(){function a(a){return a>=a?c[nj(b,a,0,d)]:void 0}var b=[.5],c=[0,1],d=1;return a.domain=function(e){return arguments.length?(b=Dq.call(e),d=Math.min(b.length,c.length-1),a):b.slice()},a.range=function(e){return arguments.length?(c=Dq.call(e),d=Math.min(b.length,c.length-1),a):c.slice()},a.invertExtent=function(a){var d=c.indexOf(a);return[b[d-1],b[d]]},a.copy=function(){return xg().domain(b).range(c)},a}function yg(a,b,c,d){function e(b){return a(b=new Date(+b)),b}return e.floor=e,e.ceil=function(c){return a(c=new Date(c-1)),b(c,1),a(c),c},e.round=function(a){var b=e(a),c=e.ceil(a);return c-a>a-b?b:c},e.offset=function(a,c){return b(a=new Date(+a),null==c?1:Math.floor(c)),a},e.range=function(c,d,f){var g=[];if(c=e.ceil(c),f=null==f?1:Math.floor(f),!(d>c&&f>0))return g;do g.push(new Date(+c));while(b(c,f),a(c),d>c);return g},e.filter=function(c){return yg(function(b){if(b>=b)for(;a(b),!c(b);)b.setTime(b-1)},function(a,d){if(a>=a)if(0>d)for(;++d<=0;)for(;b(a,-1),!c(a););else for(;--d>=0;)for(;b(a,1),!c(a););})},c&&(e.count=function(b,d){return Kq.setTime(+b),Lq.setTime(+d),a(Kq),a(Lq),Math.floor(c(Kq,Lq))},e.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?e.filter(d?function(b){return d(b)%a==0}:function(b){return e.count(0,b)%a==0}):e:null}),e}function zg(a){return yg(function(b){b.setDate(b.getDate()-(b.getDay()+7-a)%7),b.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+7*b)},function(a,b){return(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*Oq)/Pq})}function Ag(a){return yg(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7),b.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+7*b)},function(a,b){return(b-a)/Pq})}function Bg(a){if(0<=a.y&&a.y<100){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return b.setFullYear(a.y),b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Cg(a){if(0<=a.y&&a.y<100){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return b.setUTCFullYear(a.y),b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Dg(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function Eg(a){function b(a,b){return function(c){var d,e,f,g=[],h=-1,i=0,j=a.length;for(c instanceof Date||(c=new Date(+c));++h<j;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=Nr[d=a.charAt(++h)])?d=a.charAt(++h):e="e"===d?" ":"0",(f=b[d])&&(d=f(c,e)),g.push(d),i=h+1);return g.push(a.slice(i,h)),g.join("")}}function c(a,b){return function(c){var e=Dg(1900);if(d(e,a,c+="",0)!=c.length)return null;if("p"in e&&(e.H=e.H%12+12*e.p),"W"in e||"U"in e){"w"in e||(e.w="W"in e?1:0);var f="Z"in e?Cg(Dg(e.y)).getUTCDay():b(Dg(e.y)).getDay();e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(f+5)%7:e.w+7*e.U-(f+6)%7}return"Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,Cg(e)):b(e)}}function d(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;h>g;){if(d>=i)return-1;if(37===(e=b.charCodeAt(g++))){if(e=b.charAt(g++),!(f=y[e in Nr?b.charAt(g++):e])||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}var e=a.dateTime,f=a.date,g=a.time,h=a.periods,i=a.days,j=a.shortDays,k=a.months,l=a.shortMonths,m=Hg(h),n=Ig(h),o=Hg(i),p=Ig(i),q=Hg(j),r=Ig(j),s=Hg(k),t=Ig(k),u=Hg(l),v=Ig(l),w={a:function(a){return j[a.getDay()]},A:function(a){return i[a.getDay()]},b:function(a){return l[a.getMonth()]},B:function(a){return k[a.getMonth()]},c:null,d:Xg,e:Xg,H:Yg,I:Zg,j:$g,L:_g,m:ah,M:bh,p:function(a){return h[+(a.getHours()>=12)]},S:ch,U:dh,w:eh,W:fh,x:null,X:null,y:gh,Y:hh,Z:ih,"%":xh},x={a:function(a){return j[a.getUTCDay()]},A:function(a){return i[a.getUTCDay()]},b:function(a){return l[a.getUTCMonth()]},B:function(a){return k[a.getUTCMonth()]},c:null,d:jh,e:jh,H:kh,I:lh,j:mh,
L:nh,m:oh,M:ph,p:function(a){return h[+(a.getUTCHours()>=12)]},S:qh,U:rh,w:sh,W:th,x:null,X:null,y:uh,Y:vh,Z:wh,"%":xh},y={a:function(a,b,c){var d=q.exec(b.slice(c));return d?(a.w=r[d[0].toLowerCase()],c+d[0].length):-1},A:function(a,b,c){var d=o.exec(b.slice(c));return d?(a.w=p[d[0].toLowerCase()],c+d[0].length):-1},b:function(a,b,c){var d=u.exec(b.slice(c));return d?(a.m=v[d[0].toLowerCase()],c+d[0].length):-1},B:function(a,b,c){var d=s.exec(b.slice(c));return d?(a.m=t[d[0].toLowerCase()],c+d[0].length):-1},c:function(a,b,c){return d(a,e,b,c)},d:Qg,e:Qg,H:Sg,I:Sg,j:Rg,L:Vg,m:Pg,M:Tg,p:function(a,b,c){var d=m.exec(b.slice(c));return d?(a.p=n[d[0].toLowerCase()],c+d[0].length):-1},S:Ug,U:Kg,w:Jg,W:Lg,x:function(a,b,c){return d(a,f,b,c)},X:function(a,b,c){return d(a,g,b,c)},y:Ng,Y:Mg,Z:Og,"%":Wg};return w.x=b(f,w),w.X=b(g,w),w.c=b(e,w),x.x=b(f,x),x.X=b(g,x),x.c=b(e,x),{format:function(a){var c=b(a+="",w);return c.toString=function(){return a},c},parse:function(a){var b=c(a+="",Bg);return b.toString=function(){return a},b},utcFormat:function(a){var c=b(a+="",x);return c.toString=function(){return a},c},utcParse:function(a){var b=c(a,Cg);return b.toString=function(){return a},b}}}function Fg(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Gg(a){return a.replace(Qr,"\\$&")}function Hg(a){return new RegExp("^(?:"+a.map(Gg).join("|")+")","i")}function Ig(a){for(var b={},c=-1,d=a.length;++c<d;)b[a[c].toLowerCase()]=c;return b}function Jg(a,b,c){var d=Or.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Kg(a,b,c){var d=Or.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Lg(a,b,c){var d=Or.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Mg(a,b,c){var d=Or.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Ng(a,b,c){var d=Or.exec(b.slice(c,c+2));return d?(a.y=+d[0]+(+d[0]>68?1900:2e3),c+d[0].length):-1}function Og(a,b,c){var d=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(b.slice(c,c+6));return d?(a.Z=d[1]?0:-(d[2]+(d[3]||"00")),c+d[0].length):-1}function Pg(a,b,c){var d=Or.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function Qg(a,b,c){var d=Or.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function Rg(a,b,c){var d=Or.exec(b.slice(c,c+3));return d?(a.m=0,a.d=+d[0],c+d[0].length):-1}function Sg(a,b,c){var d=Or.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function Tg(a,b,c){var d=Or.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function Ug(a,b,c){var d=Or.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function Vg(a,b,c){var d=Or.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function Wg(a,b,c){var d=Pr.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function Xg(a,b){return Fg(a.getDate(),b,2)}function Yg(a,b){return Fg(a.getHours(),b,2)}function Zg(a,b){return Fg(a.getHours()%12||12,b,2)}function $g(a,b){return Fg(1+Wq.count(mr(a),a),b,3)}function _g(a,b){return Fg(a.getMilliseconds(),b,3)}function ah(a,b){return Fg(a.getMonth()+1,b,2)}function bh(a,b){return Fg(a.getMinutes(),b,2)}function ch(a,b){return Fg(a.getSeconds(),b,2)}function dh(a,b){return Fg(Yq.count(mr(a),a),b,2)}function eh(a){return a.getDay()}function fh(a,b){return Fg(Zq.count(mr(a),a),b,2)}function gh(a,b){return Fg(a.getFullYear()%100,b,2)}function hh(a,b){return Fg(a.getFullYear()%1e4,b,4)}function ih(a){var b=a.getTimezoneOffset();return(b>0?"-":(b*=-1,"+"))+Fg(b/60|0,"0",2)+Fg(b%60,"0",2)}function jh(a,b){return Fg(a.getUTCDate(),b,2)}function kh(a,b){return Fg(a.getUTCHours(),b,2)}function lh(a,b){return Fg(a.getUTCHours()%12||12,b,2)}function mh(a,b){return Fg(1+sr.count(Kr(a),a),b,3)}function nh(a,b){return Fg(a.getUTCMilliseconds(),b,3)}function oh(a,b){return Fg(a.getUTCMonth()+1,b,2)}function ph(a,b){return Fg(a.getUTCMinutes(),b,2)}function qh(a,b){return Fg(a.getUTCSeconds(),b,2)}function rh(a,b){return Fg(ur.count(Kr(a),a),b,2)}function sh(a){return a.getUTCDay()}function th(a,b){return Fg(vr.count(Kr(a),a),b,2)}function uh(a,b){return Fg(a.getUTCFullYear()%100,b,2)}function vh(a,b){return Fg(a.getUTCFullYear()%1e4,b,4)}function wh(){return"+0000"}function xh(){return"%"}function yh(b){return Lr=Eg(b),a.timeFormat=Lr.format,a.timeParse=Lr.parse,a.utcFormat=Lr.utcFormat,a.utcParse=Lr.utcParse,Lr}function zh(a){return new Date(a)}function Ah(a){return a instanceof Date?+a:+new Date(+a)}function Bh(a,b,c,d,f,g,h,i,j){function k(e){return(h(e)<e?p:g(e)<e?q:f(e)<e?r:d(e)<e?s:b(e)<e?c(e)<e?t:u:a(e)<e?v:w)(e)}function l(b,c,d,f){if(null==b&&(b=10),"number"==typeof b){var g=Math.abs(d-c)/b,h=lj(function(a){return a[2]}).right(x,g);h===x.length?(f=e(c/Zr,d/Zr,b),b=a):h?(f=(h=x[g/x[h-1][2]<x[h][2]/g?h-1:h])[1],b=h[0]):(f=e(c,d,b),b=i)}return null==f?b:b.every(f)}var m=ig(cg,dl),n=m.invert,o=m.domain,p=j(".%L"),q=j(":%S"),r=j("%I:%M"),s=j("%I %p"),t=j("%a %d"),u=j("%b %d"),v=j("%B"),w=j("%Y"),x=[[h,1,Tr],[h,5,5*Tr],[h,15,15*Tr],[h,30,30*Tr],[g,1,Ur],[g,5,5*Ur],[g,15,15*Ur],[g,30,30*Ur],[f,1,Vr],[f,3,3*Vr],[f,6,6*Vr],[f,12,12*Vr],[d,1,Wr],[d,2,2*Wr],[c,1,Xr],[b,1,Yr],[b,3,3*Yr],[a,1,Zr]];return m.invert=function(a){return new Date(n(a))},m.domain=function(a){return arguments.length?o(Cq.call(a,Ah)):o().map(zh)},m.ticks=function(a,b){var c,d=o(),e=d[0],f=d[d.length-1],g=e>f;return g&&(c=e,e=f,f=c),c=l(a,e,f,b),c=c?c.range(e,f+1):[],g?c.reverse():c},m.tickFormat=function(a,b){return null==b?k:j(b)},m.nice=function(a,b){var c=o();return(a=l(a,c[0],c[c.length-1],b))?o(Jq(c,a)):m},m.copy=function(){return hg(m,Bh(a,b,c,d,f,g,h,i,j))},m}function Ch(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*b)))]}}function Dh(a){function b(b){var f=(b-c)/(d-c);return a(e?Math.max(0,Math.min(1,f)):f)}var c=0,d=1,e=!1;return b.domain=function(a){return arguments.length?(c=+a[0],d=+a[1],b):[c,d]},b.clamp=function(a){return arguments.length?(e=!!a,b):e},b.interpolator=function(c){return arguments.length?(a=c,b):a},b.copy=function(){return Dh(a).domain([c,d]).clamp(e)},jg(b)}function Eh(a){return a>1?0:-1>a?us:Math.acos(a)}function Fh(a){return a>=1?vs:-1>=a?-vs:Math.asin(a)}function Gh(a){return a.innerRadius}function Hh(a){return a.outerRadius}function Ih(a){return a.startAngle}function Jh(a){return a.endAngle}function Kh(a){return a&&a.padAngle}function Lh(a,b,c,d,e,f,g,h){var i=c-a,j=d-b,k=g-e,l=h-f,m=(k*(b-f)-l*(a-e))/(l*i-k*j);return[a+m*i,b+m*j]}function Mh(a,b,c,d,e,f,g){var h=a-c,i=b-d,j=(g?f:-f)/ss(h*h+i*i),k=j*i,l=-j*h,m=a+k,n=b+l,o=c+k,p=d+l,q=(m+o)/2,r=(n+p)/2,s=o-m,t=p-n,u=s*s+t*t,v=e-f,w=m*p-o*n,x=(0>t?-1:1)*ss(ps(0,v*v*u-w*w)),y=(w*t-s*x)/u,z=(-w*s-t*x)/u,A=(w*t+s*x)/u,B=(-w*s+t*x)/u,C=y-q,D=z-r,E=A-q,F=B-r;return C*C+D*D>E*E+F*F&&(y=A,z=B),{cx:y,cy:z,x01:-k,y01:-l,x11:y*(e/v-1),y11:z*(e/v-1)}}function Nh(a){this._context=a}function Oh(a){return a[0]}function Ph(a){return a[1]}function Qh(a){this._curve=a}function Rh(a){function b(b){return new Qh(a(b))}return b._curve=a,b}function Sh(a){var b=a.curve;return a.angle=a.x,delete a.x,a.radius=a.y,delete a.y,a.curve=function(a){return arguments.length?b(Rh(a)):b()._curve},a}function Th(a){return a.source}function Uh(a){return a.target}function Vh(a){function b(){var b,h=Gs.call(arguments),i=c.apply(this,h),j=d.apply(this,h);return g||(g=b=oc()),a(g,+e.apply(this,(h[0]=i,h)),+f.apply(this,h),+e.apply(this,(h[0]=j,h)),+f.apply(this,h)),b?(g=null,b+""||null):void 0}var c=Th,d=Uh,e=Oh,f=Ph,g=null;return b.source=function(a){return arguments.length?(c=a,b):c},b.target=function(a){return arguments.length?(d=a,b):d},b.x=function(a){return arguments.length?(e="function"==typeof a?a:ls(+a),b):e},b.y=function(a){return arguments.length?(f="function"==typeof a?a:ls(+a),b):f},b.context=function(a){return arguments.length?(g=null==a?null:a,b):g},b}function Wh(a,b,c,d,e){a.moveTo(b,c),a.bezierCurveTo(b=(b+d)/2,c,b,e,d,e)}function Xh(a,b,c,d,e){a.moveTo(b,c),a.bezierCurveTo(b,c=(c+e)/2,d,c,d,e)}function Yh(a,b,c,d,e){var f=Fs(b,c),g=Fs(b,c=(c+e)/2),h=Fs(d,c),i=Fs(d,e);a.moveTo(f[0],f[1]),a.bezierCurveTo(g[0],g[1],h[0],h[1],i[0],i[1])}function Zh(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function $h(a){this._context=a}function _h(a){this._context=a}function ai(a){this._context=a}function bi(a,b){this._basis=new $h(a),this._beta=b}function ci(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function di(a,b){this._context=a,this._k=(1-b)/6}function ei(a,b){this._context=a,this._k=(1-b)/6}function fi(a,b){this._context=a,this._k=(1-b)/6}function gi(a,b,c){var d=a._x1,e=a._y1,f=a._x2,g=a._y2;if(a._l01_a>ts){var h=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,i=3*a._l01_a*(a._l01_a+a._l12_a);d=(d*h-a._x0*a._l12_2a+a._x2*a._l01_2a)/i,e=(e*h-a._y0*a._l12_2a+a._y2*a._l01_2a)/i}if(a._l23_a>ts){var j=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,k=3*a._l23_a*(a._l23_a+a._l12_a);f=(f*j+a._x1*a._l23_2a-b*a._l12_2a)/k,g=(g*j+a._y1*a._l23_2a-c*a._l12_2a)/k}a._context.bezierCurveTo(d,e,f,g,a._x2,a._y2)}function hi(a,b){this._context=a,this._alpha=b}function ii(a,b){this._context=a,this._alpha=b}function ji(a,b){this._context=a,this._alpha=b}function ki(a){this._context=a}function li(a){return 0>a?-1:1}function mi(a,b,c){var d=a._x1-a._x0,e=b-a._x1,f=(a._y1-a._y0)/(d||0>e&&-0),g=(c-a._y1)/(e||0>d&&-0),h=(f*e+g*d)/(d+e);return(li(f)+li(g))*Math.min(Math.abs(f),Math.abs(g),.5*Math.abs(h))||0}function ni(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function oi(a,b,c){var d=a._x0,e=a._y0,f=a._x1,g=a._y1,h=(f-d)/3;a._context.bezierCurveTo(d+h,e+h*b,f-h,g-h*c,f,g)}function pi(a){this._context=a}function qi(a){this._context=new ri(a)}function ri(a){this._context=a}function si(a){this._context=a}function ti(a){var b,c,d=a.length-1,e=new Array(d),f=new Array(d),g=new Array(d);for(e[0]=0,f[0]=2,g[0]=a[0]+2*a[1],b=1;d-1>b;++b)e[b]=1,f[b]=4,g[b]=4*a[b]+2*a[b+1];for(e[d-1]=2,f[d-1]=7,g[d-1]=8*a[d-1]+a[d],b=1;d>b;++b)c=e[b]/f[b-1],f[b]-=c,g[b]-=c*g[b-1];for(e[d-1]=g[d-1]/f[d-1],b=d-2;b>=0;--b)e[b]=(g[b]-e[b+1])/f[b];for(f[d-1]=(a[d]+e[d-1])/2,b=0;d-1>b;++b)f[b]=2*a[b+1]-e[b+1];return[e,f]}function ui(a,b){this._context=a,this._t=b}function vi(a,b){return a[b]}function wi(a){for(var b,c=0,d=-1,e=a.length;++d<e;)(b=+a[d][1])&&(c+=b);return c}function xi(a){return a[0]}function yi(a){return a[1]}function zi(){this._=null}function Ai(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function Bi(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function Ci(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function Di(a){for(;a.L;)a=a.L;return a}function Ei(a,b,c,d){var e=[null,null],f=nt.push(e)-1;return e.left=a,e.right=b,c&&Gi(e,a,b,c),d&&Gi(e,b,a,d),lt[a.index].halfedges.push(f),lt[b.index].halfedges.push(f),e}function Fi(a,b,c){var d=[b,c];return d.left=a,d}function Gi(a,b,c,d){a[0]||a[1]?a.left===c?a[1]=d:a[0]=d:(a[0]=d,a.left=b,a.right=c)}function Hi(a,b,c,d,e){var f,g=a[0],h=a[1],i=g[0],j=g[1],k=0,l=1,m=h[0]-i,n=h[1]-j;if(f=b-i,m||!(f>0)){if(f/=m,0>m){if(k>f)return;l>f&&(l=f)}else if(m>0){if(f>l)return;f>k&&(k=f)}if(f=d-i,m||!(0>f)){if(f/=m,0>m){if(f>l)return;f>k&&(k=f)}else if(m>0){if(k>f)return;l>f&&(l=f)}if(f=c-j,n||!(f>0)){if(f/=n,0>n){if(k>f)return;l>f&&(l=f)}else if(n>0){if(f>l)return;f>k&&(k=f)}if(f=e-j,n||!(0>f)){if(f/=n,0>n){if(f>l)return;f>k&&(k=f)}else if(n>0){if(k>f)return;l>f&&(l=f)}return!(k>0||1>l)||(k>0&&(a[0]=[i+k*m,j+k*n]),1>l&&(a[1]=[i+l*m,j+l*n]),!0)}}}}}function Ii(a,b,c,d,e){var f=a[1];if(f)return!0;var g,h,i=a[0],j=a.left,k=a.right,l=j[0],m=j[1],n=k[0],o=k[1],p=(l+n)/2,q=(m+o)/2;if(o===m){if(b>p||p>=d)return;if(l>n){if(i){if(i[1]>=e)return}else i=[p,c];f=[p,e]}else{if(i){if(i[1]<c)return}else i=[p,e];f=[p,c]}}else if(g=(l-n)/(o-m),h=q-g*p,-1>g||g>1)if(l>n){if(i){if(i[1]>=e)return}else i=[(c-h)/g,c];f=[(e-h)/g,e]}else{if(i){if(i[1]<c)return}else i=[(e-h)/g,e];f=[(c-h)/g,c]}else if(o>m){if(i){if(i[0]>=d)return}else i=[b,g*b+h];f=[d,g*d+h]}else{if(i){if(i[0]<b)return}else i=[d,g*d+h];f=[b,g*b+h]}return a[0]=i,a[1]=f,!0}function Ji(a,b,c,d){for(var e,f=nt.length;f--;)Ii(e=nt[f],a,b,c,d)&&Hi(e,a,b,c,d)&&(Math.abs(e[0][0]-e[1][0])>qt||Math.abs(e[0][1]-e[1][1])>qt)||delete nt[f]}function Ki(a){return lt[a.index]={site:a,halfedges:[]}}function Li(a,b){var c=a.site,d=b.left,e=b.right;return c===e&&(e=d,d=c),e?Math.atan2(e[1]-d[1],e[0]-d[0]):(c===d?(d=b[1],e=b[0]):(d=b[0],e=b[1]),Math.atan2(d[0]-e[0],e[1]-d[1]))}function Mi(a,b){return b[+(b.left!==a.site)]}function Ni(a,b){return b[+(b.left===a.site)]}function Oi(){for(var a,b,c,d,e=0,f=lt.length;f>e;++e)if((a=lt[e])&&(d=(b=a.halfedges).length)){var g=new Array(d),h=new Array(d);for(c=0;d>c;++c)g[c]=c,h[c]=Li(a,nt[b[c]]);for(g.sort(function(a,b){return h[b]-h[a]}),c=0;d>c;++c)h[c]=b[g[c]];for(c=0;d>c;++c)b[c]=h[c]}}function Pi(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q=lt.length,r=!0;for(e=0;q>e;++e)if(f=lt[e]){for(g=f.site,h=(i=f.halfedges).length;h--;)nt[i[h]]||i.splice(h,1);for(h=0,j=i.length;j>h;)o=(n=Ni(f,nt[i[h]]))[0],p=n[1],l=(k=Mi(f,nt[i[++h%j]]))[0],m=k[1],(Math.abs(o-l)>qt||Math.abs(p-m)>qt)&&(i.splice(h,0,nt.push(Fi(g,n,Math.abs(o-a)<qt&&d-p>qt?[a,Math.abs(l-a)<qt?m:d]:Math.abs(p-d)<qt&&c-o>qt?[Math.abs(m-d)<qt?l:c,d]:Math.abs(o-c)<qt&&p-b>qt?[c,Math.abs(l-c)<qt?m:b]:Math.abs(p-b)<qt&&o-a>qt?[Math.abs(m-b)<qt?l:a,b]:null))-1),++j);j&&(r=!1)}if(r){var s,t,u,v=1/0;for(e=0,r=null;q>e;++e)(f=lt[e])&&(u=(s=(g=f.site)[0]-a)*s+(t=g[1]-b)*t)<v&&(v=u,r=f);if(r){var w=[a,b],x=[a,d],y=[c,d],z=[c,b];r.halfedges.push(nt.push(Fi(g=r.site,w,x))-1,nt.push(Fi(g,x,y))-1,nt.push(Fi(g,y,z))-1,nt.push(Fi(g,z,w))-1)}}for(e=0;q>e;++e)(f=lt[e])&&(f.halfedges.length||delete lt[e])}function Qi(){Ai(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ri(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e[0],h=e[1],i=d[0]-g,j=d[1]-h,k=f[0]-g,l=f[1]-h,m=2*(i*l-j*k);if(!(m>=-rt)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,r=ot.pop()||new Qi;r.arc=a,r.site=e,r.x=p+g,r.y=(r.cy=q+h)+Math.sqrt(p*p+q*q),a.circle=r;for(var s=null,t=mt._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}mt.insert(s,r),s||(jt=r)}}}}function Si(a){var b=a.circle;b&&(b.P||(jt=b.N),mt.remove(b),ot.push(b),Ai(b),a.circle=null)}function Ti(){Ai(this),this.edge=this.site=this.circle=null}function Ui(a){var b=pt.pop()||new Ti;return b.site=a,b}function Vi(a){Si(a),kt.remove(a),pt.push(a),Ai(a)}function Wi(a){var b=a.circle,c=b.x,d=b.cy,e=[c,d],f=a.P,g=a.N,h=[a];Vi(a);for(var i=f;i.circle&&Math.abs(c-i.circle.x)<qt&&Math.abs(d-i.circle.cy)<qt;)f=i.P,h.unshift(i),Vi(i),i=f;h.unshift(i),Si(i);for(var j=g;j.circle&&Math.abs(c-j.circle.x)<qt&&Math.abs(d-j.circle.cy)<qt;)g=j.N,h.push(j),Vi(j),j=g;h.push(j),Si(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],Gi(j.edge,i.site,j.site,e);i=h[0],(j=h[l-1]).edge=Ei(i.site,j.site,null,e),Ri(i),Ri(j)}function Xi(a){for(var b,c,d,e,f=a[0],g=a[1],h=kt._;h;)if((d=Yi(h,g)-f)>qt)h=h.L;else{if(!((e=f-Zi(h,g))>qt)){d>-qt?(b=h.P,c=h):e>-qt?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}Ki(a);var i=Ui(a);if(kt.insert(b,i),b||c){if(b===c)return Si(b),c=Ui(b.site),kt.insert(i,c),i.edge=c.edge=Ei(b.site,i.site),Ri(b),void Ri(c);if(c){Si(b),Si(c);var j=b.site,k=j[0],l=j[1],m=a[0]-k,n=a[1]-l,o=c.site,p=o[0]-k,q=o[1]-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u=[(q*s-n*t)/r+k,(m*t-p*s)/r+l];Gi(c.edge,j,o,u),i.edge=Ei(j,a,null,u),c.edge=Ei(a,o,null,u),Ri(b),Ri(c)}else i.edge=Ei(b.site,i.site)}}function Yi(a,b){var c=a.site,d=c[0],e=c[1],f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;var h=(c=g.site)[0],i=c[1],j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Zi(a,b){var c=a.N;if(c)return Yi(c,b);var d=a.site;return d[1]===b?d[0]:1/0}function $i(a,b,c){return(a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])}function _i(a,b){return b[1]-a[1]||b[0]-a[0]}function aj(a,b){var c,d,e,f=a.sort(_i).pop();for(nt=[],lt=new Array(a.length),kt=new zi,mt=new zi;;)if(e=jt,f&&(!e||f[1]<e.y||f[1]===e.y&&f[0]<e.x))f[0]===c&&f[1]===d||(Xi(f),c=f[0],d=f[1]),f=a.pop();else{if(!e)break;Wi(e.arc)}if(Oi(),b){var g=+b[0][0],h=+b[0][1],i=+b[1][0],j=+b[1][1];Ji(g,h,i,j),Pi(g,h,i,j)}this.edges=nt,this.cells=lt,kt=mt=nt=lt=null}function bj(a,b,c){this.target=a,this.type=b,this.transform=c}function cj(a,b,c){this.k=a,this.x=b,this.y=c}function dj(a){return a.__zoom||tt}function ej(){a.event.stopImmediatePropagation()}function fj(){return!a.event.button}function gj(){var a,b,c=this;return c instanceof SVGElement?(a=(c=c.ownerSVGElement||c).width.baseVal.value,b=c.height.baseVal.value):(a=c.clientWidth,b=c.clientHeight),[[0,0],[a,b]]}function hj(){return this.__zoom||tt}function ij(){return-a.event.deltaY*(a.event.deltaMode?120:1)/500}function jj(){return"ontouchstart"in this}var kj=function(a,b){return b>a?-1:a>b?1:a>=b?0:NaN},lj=function(a){return 1===a.length&&(a=b(a)),{left:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}},mj=lj(kj),nj=mj.right,oj=mj.left,pj=function(a){return null===a?NaN:+a},qj=function(a,b){var c,d,e=a.length,f=0,g=-1,h=0,i=0;if(null==b)for(;++g<e;)isNaN(c=pj(a[g]))||(i+=(d=c-h)*(c-(h+=d/++f)));else for(;++g<e;)isNaN(c=pj(b(a[g],g,a)))||(i+=(d=c-h)*(c-(h+=d/++f)));return f>1?i/(f-1):void 0},rj=function(a,b){var c=qj(a,b);return c?Math.sqrt(c):c},sj=function(a,b){var c,d,e,f=a.length,g=-1;if(null==b){for(;++g<f;)if(null!=(c=a[g])&&c>=c)for(d=e=c;++g<f;)null!=(c=a[g])&&(d>c&&(d=c),c>e&&(e=c))}else for(;++g<f;)if(null!=(c=b(a[g],g,a))&&c>=c)for(d=e=c;++g<f;)null!=(c=b(a[g],g,a))&&(d>c&&(d=c),c>e&&(e=c));return[d,e]},tj=Array.prototype,uj=tj.slice,vj=tj.map,wj=function(a){return function(){return a}},xj=function(a){return a},yj=function(a,b,c){a=+a,b=+b,c=(e=arguments.length)<2?(b=a,a=0,1):3>e?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a+d*c;return f},zj=Math.sqrt(50),Aj=Math.sqrt(10),Bj=Math.sqrt(2),Cj=function(a,b,c){var e,f,g,h,i=-1;if(b=+b,a=+a,c=+c,a===b&&c>0)return[a];if((e=a>b)&&(f=a,a=b,b=f),0===(h=d(a,b,c))||!isFinite(h))return[];if(h>0)for(a=Math.ceil(a/h),b=Math.floor(b/h),g=new Array(f=Math.ceil(b-a+1));++i<f;)g[i]=(a+i)*h;else for(a=Math.floor(a*h),b=Math.ceil(b*h),g=new Array(f=Math.ceil(a-b+1));++i<f;)g[i]=(a-i)/h;return e&&g.reverse(),g},Dj=function(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1},Ej=function(a,b,c){if(null==c&&(c=pj),d=a.length){if((b=+b)<=0||2>d)return+c(a[0],0,a);if(b>=1)return+c(a[d-1],d-1,a);var d,e=(d-1)*b,f=Math.floor(e),g=+c(a[f],f,a);return g+(+c(a[f+1],f+1,a)-g)*(e-f)}},Fj=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(b=(d=a[e]).length;--b>=0;)c[--g]=d[b];return c},Gj=function(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&d>c&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&d>c&&(d=c);return d},Hj=function(a){if(!(e=a.length))return[];for(var b=-1,c=Gj(a,f),d=new Array(c);++b<c;)for(var e,g=-1,h=d[b]=new Array(e);++g<e;)h[g]=a[g][b];return d},Ij=Array.prototype.slice,Jj=function(a){return a},Kj=1,Lj=2,Mj=3,Nj=4,Oj=1e-6,Pj={value:function(){}};n.prototype=m.prototype={constructor:n,on:function(a,b){var c,d=this._,e=o(a+"",d),f=-1,g=e.length;if(!(arguments.length<2)){if(null!=b&&"function"!=typeof b)throw new Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=q(d[c],a.name,b);else if(null==b)for(c in d)d[c]=q(d[c],a.name,null);return this}for(;++f<g;)if((c=(a=e[f]).type)&&(c=p(d[c],a.name)))return c},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new n(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=new Array(c),f=0;c>f;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(f=0,c=(d=this._[a]).length;c>f;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;f>e;++e)d[e].value.apply(b,c)}};var Qj="http://www.w3.org/1999/xhtml",Rj={svg:"http://www.w3.org/2000/svg",xhtml:Qj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Sj=function(a){var b=a+="",c=b.indexOf(":");return c>=0&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1)),Rj.hasOwnProperty(b)?{space:Rj[b],local:a}:a},Tj=function(a){var b=Sj(a);return(b.local?s:r)(b)},Uj=0;u.prototype=t.prototype={constructor:u,get:function(a){for(var b=this._;!(b in a);)if(!(a=a.parentNode))return;return a[b]},set:function(a,b){return a[this._]=b},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}};var Vj=function(a){return function(){return this.matches(a)}};if("undefined"!=typeof document){var Wj=document.documentElement;if(!Wj.matches){var Xj=Wj.webkitMatchesSelector||Wj.msMatchesSelector||Wj.mozMatchesSelector||Wj.oMatchesSelector;Vj=function(a){return function(){return Xj.call(this,a)}}}}var Yj=Vj,Zj={};a.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Zj={mouseenter:"mouseover",mouseleave:"mouseout"}));var $j=function(){for(var b,c=a.event;b=c.sourceEvent;)c=b;return c},_j=function(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();return d.x=b.clientX,d.y=b.clientY,d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var e=a.getBoundingClientRect();return[b.clientX-e.left-a.clientLeft,b.clientY-e.top-a.clientTop]},ak=function(a){var b=$j();return b.changedTouches&&(b=b.changedTouches[0]),_j(a,b)},bk=function(a){return null==a?B:function(){return this.querySelector(a)}},ck=function(a){return null==a?C:function(){return this.querySelectorAll(a)}},dk=function(a){return new Array(a.length)};D.prototype={constructor:D,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var ek=function(a){return function(){return a}},fk="$",gk=function(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView};W.prototype={add:function(a){this._names.indexOf(a)<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var b=this._names.indexOf(a);b>=0&&(this._names.splice(b,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var hk=[null];na.prototype=oa.prototype={constructor:na,select:function(a){"function"!=typeof a&&(a=bk(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;c>e;++e)for(var f,g,h=b[e],i=h.length,j=d[e]=new Array(i),k=0;i>k;++k)(f=h[k])&&(g=a.call(f,f.__data__,k,h))&&("__data__"in f&&(g.__data__=f.__data__),j[k]=g);return new na(d,this._parents)},selectAll:function(a){"function"!=typeof a&&(a=ck(a));for(var b=this._groups,c=b.length,d=[],e=[],f=0;c>f;++f)for(var g,h=b[f],i=h.length,j=0;i>j;++j)(g=h[j])&&(d.push(a.call(g,g.__data__,j,h)),e.push(g));return new na(d,e)},filter:function(a){"function"!=typeof a&&(a=Yj(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;c>e;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;h>j;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new na(d,this._parents)},data:function(a,b){if(!a)return n=new Array(this.size()),j=-1,this.each(function(a){n[++j]=a}),n;var c=b?F:E,d=this._parents,e=this._groups;"function"!=typeof a&&(a=ek(a));for(var f=e.length,g=new Array(f),h=new Array(f),i=new Array(f),j=0;f>j;++j){var k=d[j],l=e[j],m=l.length,n=a.call(k,k&&k.__data__,j,d),o=n.length,p=h[j]=new Array(o),q=g[j]=new Array(o);c(k,l,p,q,i[j]=new Array(m),n,b);for(var r,s,t=0,u=0;o>t;++t)if(r=p[t]){for(t>=u&&(u=t+1);!(s=q[u])&&++u<o;);r._next=s||null}}return g=new na(g,d),g._enter=h,g._exit=i,g},enter:function(){return new na(this._enter||this._groups.map(dk),this._parents)},exit:function(){return new na(this._exit||this._groups.map(dk),this._parents)},merge:function(a){for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=new Array(d),h=0;f>h;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=new Array(l),n=0;l>n;++n)(i=j[n]||k[n])&&(m[n]=i);for(;d>h;++h)g[h]=b[h];return new na(g,this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d,e=a[b],f=e.length-1,g=e[f];--f>=0;)(d=e[f])&&(g&&g!==d.nextSibling&&g.parentNode.insertBefore(d,g),g=d);return this},sort:function(a){a||(a=G);for(var b=this._groups,c=b.length,d=new Array(c),e=0;c>e;++e){for(var f,g=b[e],h=g.length,i=d[e]=new Array(h),j=0;h>j;++j)(f=g[j])&&(i[j]=f);i.sort(function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c})}return new na(d,this._parents).order()},call:function(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this},nodes:function(){var a=new Array(this.size()),b=-1;return this.each(function(){a[++b]=this}),a},node:function(){for(var a=this._groups,b=0,c=a.length;c>b;++b)for(var d=a[b],e=0,f=d.length;f>e;++e){var g=d[e];if(g)return g}return null},size:function(){var a=0;return this.each(function(){++a}),a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;d>c;++c)for(var e,f=b[c],g=0,h=f.length;h>g;++g)(e=f[g])&&a.call(e,e.__data__,g,f);return this},attr:function(a,b){var c=Sj(a);if(arguments.length<2){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?I:H:"function"==typeof b?c.local?M:L:c.local?K:J)(c,b))},style:function(a,b,c){return arguments.length>1?this.each((null==b?N:"function"==typeof b?P:O)(a,b,null==c?"":c)):Q(this.node(),a)},property:function(a,b){return arguments.length>1?this.each((null==b?R:"function"==typeof b?T:S)(a,b)):this.node()[a]},classed:function(a,b){var c=U(a+"");if(arguments.length<2){for(var d=V(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"==typeof b?_:b?Z:$)(c,b))},text:function(a){return arguments.length?this.each(null==a?aa:("function"==typeof a?ca:ba)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?da:("function"==typeof a?fa:ea)(a)):this.node().innerHTML},raise:function(){return this.each(ga)},lower:function(){return this.each(ha)},append:function(a){var b="function"==typeof a?a:Tj(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"==typeof a?a:Tj(a),d=null==b?ia:"function"==typeof b?b:bk(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(ja)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d,e,f=x(a+""),g=f.length;if(!(arguments.length<2)){for(h=b?z:y,null==c&&(c=!1),d=0;g>d;++d)this.each(h(f[d],b,c));return this}var h=this.node().__on;if(h)for(var i,j=0,k=h.length;k>j;++j)for(d=0,i=h[j];g>d;++d)if((e=f[d]).type===i.type&&e.name===i.name)return i.value},dispatch:function(a,b){return this.each(("function"==typeof b?ma:la)(a,b))}};var ik=function(a){return"string"==typeof a?new na([[document.querySelector(a)]],[document.documentElement]):new na([[a]],hk)},jk=function(a,b,c){arguments.length<3&&(c=b,b=$j().changedTouches);for(var d,e=0,f=b?b.length:0;f>e;++e)if((d=b[e]).identifier===c)return _j(a,d);return null},kk=function(){a.event.preventDefault(),a.event.stopImmediatePropagation()},lk=function(a){var b=a.document.documentElement,c=ik(a).on("dragstart.drag",kk,!0);"onselectstart"in b?c.on("selectstart.drag",kk,!0):(b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none")},mk=function(a){return function(){return a}};ra.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var nk=function(a,b,c){a.prototype=b.prototype=c,c.constructor=a},ok="\\s*([+-]?\\d+)\\s*",pk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",qk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rk=/^#([0-9a-f]{3})$/,sk=/^#([0-9a-f]{6})$/,tk=new RegExp("^rgb\\("+[ok,ok,ok]+"\\)$"),uk=new RegExp("^rgb\\("+[qk,qk,qk]+"\\)$"),vk=new RegExp("^rgba\\("+[ok,ok,ok,pk]+"\\)$"),wk=new RegExp("^rgba\\("+[qk,qk,qk,pk]+"\\)$"),xk=new RegExp("^hsl\\("+[pk,qk,qk]+"\\)$"),yk=new RegExp("^hsla\\("+[pk,qk,qk,pk]+"\\)$"),zk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nk(xa,ya,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),nk(Da,Ca,wa(xa,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Da(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Da(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var a=this.opacity;
return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}})),nk(Ha,Ga,wa(xa,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Ha(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Ha(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(this.h<0),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(.5>c?c:1-c)*b,e=2*c-d;return new Da(Ia(a>=240?a-240:a+120,e,d),Ia(a,e,d),Ia(120>a?a+240:a-120,e,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ak=Math.PI/180,Bk=180/Math.PI,Ck=.95047,Dk=1,Ek=1.08883,Fk=4/29,Gk=6/29,Hk=3*Gk*Gk,Ik=Gk*Gk*Gk;nk(La,Ka,wa(xa,{brighter:function(a){return new La(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new La(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;return a=Dk*Na(a),b=Ck*Na(b),c=Ek*Na(c),new Da(Oa(3.2404542*b-1.5371385*a-.4985314*c),Oa(-.969266*b+1.8760108*a+.041556*c),Oa(.0556434*b-.2040259*a+1.0572252*c),this.opacity)}})),nk(Sa,Ra,wa(xa,{brighter:function(a){return new Sa(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new Sa(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Ja(this).rgb()}}));var Jk=-.14861,Kk=1.78277,Lk=-.29227,Mk=-.90649,Nk=1.97294,Ok=Nk*Mk,Pk=Nk*Kk,Qk=Kk*Lk-Mk*Jk;nk(Va,Ua,wa(xa,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Va(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Va(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*Ak,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a),e=Math.sin(a);return new Da(255*(b+c*(Jk*d+Kk*e)),255*(b+c*(Lk*d+Mk*e)),255*(b+c*(Nk*d)),this.opacity)}}));var Rk,Sk,Tk,Uk,Vk,Wk,Xk=function(a){var b=a.length-1;return function(c){var d=0>=c?c=0:c>=1?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1],g=d>0?a[d-1]:2*e-f,h=b-1>d?a[d+2]:2*f-e;return Wa((c-d/b)*b,g,e,f,h)}},Yk=function(a){var b=a.length;return function(c){var d=Math.floor(((c%=1)<0?++c:c)*b),e=a[(d+b-1)%b],f=a[d%b],g=a[(d+1)%b],h=a[(d+2)%b];return Wa((c-d/b)*b,e,f,g,h)}},Zk=function(a){return function(){return a}},$k=function vt(a){function b(a,b){var d=c((a=Ca(a)).r,(b=Ca(b)).r),e=c(a.g,b.g),f=c(a.b,b.b),g=_a(a.opacity,b.opacity);return function(b){return a.r=d(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}var c=$a(a);return b.gamma=vt,b}(1),_k=ab(Xk),al=ab(Yk),bl=function(a,b){var c,d=b?b.length:0,e=a?Math.min(d,a.length):0,f=new Array(d),g=new Array(d);for(c=0;e>c;++c)f[c]=il(a[c],b[c]);for(;d>c;++c)g[c]=b[c];return function(a){for(c=0;e>c;++c)g[c]=f[c](a);return g}},cl=function(a,b){var c=new Date;return a=+a,b-=a,function(d){return c.setTime(a+b*d),c}},dl=function(a,b){return a=+a,b-=a,function(c){return a+b*c}},el=function(a,b){var c,d={},e={};null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={});for(c in b)c in a?d[c]=il(a[c],b[c]):e[c]=b[c];return function(a){for(c in d)e[c]=d[c](a);return e}},fl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gl=new RegExp(fl.source,"g"),hl=function(a,b){var c,d,e,f=fl.lastIndex=gl.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=fl.exec(a))&&(d=gl.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:dl(c,d)})),f=gl.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?cb(i[0].x):bb(b):(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})},il=function(a,b){var c,d=typeof b;return null==b||"boolean"===d?Zk(b):("number"===d?dl:"string"===d?(c=ya(b))?(b=c,$k):hl:b instanceof ya?$k:b instanceof Date?cl:Array.isArray(b)?bl:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?el:dl)(a,b)},jl=function(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}},kl=180/Math.PI,ll={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ml=function(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),b*c>a*d&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*kl,skewX:Math.atan(i)*kl,scaleX:g,scaleY:h}},nl=db(function(a){return"none"===a?ll:(Rk||(Rk=document.createElement("DIV"),Sk=document.documentElement,Tk=document.defaultView),Rk.style.transform=a,a=Tk.getComputedStyle(Sk.appendChild(Rk),null).getPropertyValue("transform"),Sk.removeChild(Rk),a=a.slice(7,-1).split(","),ml(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5]))},"px, ","px)","deg)"),ol=db(function(a){return null==a?ll:(Uk||(Uk=document.createElementNS("http://www.w3.org/2000/svg","g")),Uk.setAttribute("transform",a),(a=Uk.transform.baseVal.consolidate())?(a=a.matrix,ml(a.a,a.b,a.c,a.d,a.e,a.f)):ll)},", ",")",")"),pl=Math.SQRT2,ql=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(1e-12>m)d=Math.log(j/g)/pl,c=function(a){return[e+a*k,f+a*l,g*Math.exp(pl*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+4*m)/(2*g*2*n),p=(j*j-g*g-4*m)/(2*j*2*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/pl,c=function(a){var b=a*d,c=eb(q),h=g/(2*n)*(c*gb(pl*b+q)-fb(q));return[e+h*k,f+h*l,g*c/eb(pl*b+q)]}}return c.duration=1e3*d,c},rl=hb(Za),sl=hb(_a),tl=ib(Za),ul=ib(_a),vl=jb(Za),wl=jb(_a),xl=0,yl=0,zl=0,Al=1e3,Bl=0,Cl=0,Dl=0,El="object"==typeof performance&&performance.now?performance:Date,Fl="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};mb.prototype=nb.prototype={constructor:mb,restart:function(a,b,c){if("function"!=typeof a)throw new TypeError("callback is not a function");c=(null==c?kb():+c)+(null==b?0:+b),this._next||Wk===this||(Wk?Wk._next=this:Vk=this,Wk=this),this._call=a,this._time=c,sb()},stop:function(){this._call&&(this._call=null,this._time=1/0,sb())}};var Gl=function(a,b,c){var d=new mb;return b=null==b?0:+b,d.restart(function(c){d.stop(),a(c+b)},b,c),d},Hl=m("start","end","interrupt"),Il=[],Jl=0,Kl=1,Ll=2,Ml=3,Nl=4,Ol=5,Pl=6,Ql=function(a,b,c,d,e,f){var g=a.__transition;if(g){if(c in g)return}else a.__transition={};wb(a,c,{name:b,index:d,group:e,on:Hl,tween:Il,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:Jl})},Rl=function(a,b){var c,d,e,f=a.__transition,g=!0;if(f){b=null==b?null:b+"";for(e in f)(c=f[e]).name===b?(d=c.state>Ll&&c.state<Ol,c.state=Pl,c.timer.stop(),d&&c.on.call("interrupt",a,a.__data__,c.index,c.group),delete f[e]):g=!1;g&&delete a.__transition}},Sl=function(a,b){var c;return("number"==typeof b?dl:b instanceof ya?$k:(c=ya(b))?(b=c,$k):hl)(a,b)},Tl=oa.prototype.constructor,Ul=0,Vl=oa.prototype;Xb.prototype=Yb.prototype={constructor:Xb,select:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=bk(a));for(var d=this._groups,e=d.length,f=new Array(e),g=0;e>g;++g)for(var h,i,j=d[g],k=j.length,l=f[g]=new Array(k),m=0;k>m;++m)(h=j[m])&&(i=a.call(h,h.__data__,m,j))&&("__data__"in h&&(i.__data__=h.__data__),l[m]=i,Ql(l[m],b,c,m,l,vb(h,c)));return new Xb(f,this._parents,b,c)},selectAll:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=ck(a));for(var d=this._groups,e=d.length,f=[],g=[],h=0;e>h;++h)for(var i,j=d[h],k=j.length,l=0;k>l;++l)if(i=j[l]){for(var m,n=a.call(i,i.__data__,l,j),o=vb(i,c),p=0,q=n.length;q>p;++p)(m=n[p])&&Ql(m,b,c,p,n,o);f.push(n),g.push(i)}return new Xb(f,g,b,c)},filter:function(a){"function"!=typeof a&&(a=Yj(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;c>e;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;h>j;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new Xb(d,this._parents,this._name,this._id)},merge:function(a){if(a._id!==this._id)throw new Error;for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=new Array(d),h=0;f>h;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=new Array(l),n=0;l>n;++n)(i=j[n]||k[n])&&(m[n]=i);for(;d>h;++h)g[h]=b[h];return new Xb(g,this._parents,this._name,this._id)},selection:function(){return new Tl(this._groups,this._parents)},transition:function(){for(var a=this._name,b=this._id,c=Zb(),d=this._groups,e=d.length,f=0;e>f;++f)for(var g,h=d[f],i=h.length,j=0;i>j;++j)if(g=h[j]){var k=vb(g,b);Ql(g,a,c,j,h,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}return new Xb(d,this._parents,a,c)},call:Vl.call,nodes:Vl.nodes,node:Vl.node,size:Vl.size,empty:Vl.empty,each:Vl.each,on:function(a,b){var c=this._id;return arguments.length<2?vb(this.node(),c).on.on(a):this.each(Ob(c,a,b))},attr:function(a,b){var c=Sj(a),d="transform"===c?ol:Sl;return this.attrTween(a,"function"==typeof b?(c.local?Fb:Eb)(c,d,zb(this,"attr."+a,b)):null==b?(c.local?Bb:Ab)(c):(c.local?Db:Cb)(c,d,b+""))},attrTween:function(a,b){var c="attr."+a;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(null==b)return this.tween(c,null);if("function"!=typeof b)throw new Error;var d=Sj(a);return this.tween(c,(d.local?Gb:Hb)(d,b))},style:function(a,b,c){var d="transform"==(a+="")?nl:Sl;return null==b?this.styleTween(a,Qb(a,d)).on("end.style."+a,Rb(a)):this.styleTween(a,"function"==typeof b?Tb(a,d,zb(this,"style."+a,b)):Sb(a,d,b+""),c)},styleTween:function(a,b,c){var d="style."+(a+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(null==b)return this.tween(d,null);if("function"!=typeof b)throw new Error;return this.tween(d,Ub(a,b,null==c?"":c))},text:function(a){return this.tween("text","function"==typeof a?Wb(zb(this,"text",a)):Vb(null==a?"":a+""))},remove:function(){return this.on("end.remove",Pb(this._id))},tween:function(a,b){var c=this._id;if(a+="",arguments.length<2){for(var d,e=vb(this.node(),c).tween,f=0,g=e.length;g>f;++f)if((d=e[f]).name===a)return d.value;return null}return this.each((null==b?xb:yb)(c,a,b))},delay:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?Ib:Jb)(b,a)):vb(this.node(),b).delay},duration:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?Kb:Lb)(b,a)):vb(this.node(),b).duration},ease:function(a){var b=this._id;return arguments.length?this.each(Mb(b,a)):vb(this.node(),b).ease}};var Wl=function wt(a){function b(b){return Math.pow(b,a)}return a=+a,b.exponent=wt,b}(3),Xl=function xt(a){function b(b){return 1-Math.pow(1-b,a)}return a=+a,b.exponent=xt,b}(3),Yl=function yt(a){function b(b){return((b*=2)<=1?Math.pow(b,a):2-Math.pow(2-b,a))/2}return a=+a,b.exponent=yt,b}(3),Zl=Math.PI,$l=Zl/2,_l=4/11,am=6/11,bm=8/11,cm=.75,dm=9/11,em=10/11,fm=.9375,gm=21/22,hm=63/64,im=1/_l/_l,jm=function zt(a){function b(b){return b*b*((a+1)*b-a)}return a=+a,b.overshoot=zt,b}(1.70158),km=function At(a){function b(b){return--b*b*((a+1)*b+a)+1}return a=+a,b.overshoot=At,b}(1.70158),lm=function Bt(a){function b(b){return((b*=2)<1?b*b*((a+1)*b-a):(b-=2)*b*((a+1)*b+a)+2)/2}return a=+a,b.overshoot=Bt,b}(1.70158),mm=2*Math.PI,nm=function Ct(a,b){function c(c){return a*Math.pow(2,10*--c)*Math.sin((d-c)/b)}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=mm);return c.amplitude=function(a){return Ct(a,b*mm)},c.period=function(b){return Ct(a,b)},c}(1,.3),om=function Dt(a,b){function c(c){return 1-a*Math.pow(2,-10*(c=+c))*Math.sin((c+d)/b)}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=mm);return c.amplitude=function(a){return Dt(a,b*mm)},c.period=function(b){return Dt(a,b)},c}(1,.3),pm=function Et(a,b){function c(c){return((c=2*c-1)<0?a*Math.pow(2,10*c)*Math.sin((d-c)/b):2-a*Math.pow(2,-10*c)*Math.sin((d+c)/b))/2}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=mm);return c.amplitude=function(a){return Et(a,b*mm)},c.period=function(b){return Et(a,b)},c}(1,.3),qm={time:null,delay:0,duration:250,ease:_b};oa.prototype.interrupt=function(a){return this.each(function(){Rl(this,a)})},oa.prototype.transition=function(a){var b,c;a instanceof Xb?(b=a._id,a=a._name):(b=Zb(),(c=qm).time=kb(),a=null==a?null:a+"");for(var d=this._groups,e=d.length,f=0;e>f;++f)for(var g,h=d[f],i=h.length,j=0;i>j;++j)(g=h[j])&&Ql(g,a,b,j,h,c||ec(g,b));return new Xb(d,this._parents,a,b)};var rm=[null],sm=function(a){return function(){return a}},tm=function(a,b,c){this.target=a,this.type=b,this.selection=c},um=function(){a.event.preventDefault(),a.event.stopImmediatePropagation()},vm={name:"drag"},wm={name:"space"},xm={name:"handle"},ym={name:"center"},zm={name:"x",handles:["e","w"].map(gc),input:function(a,b){return a&&[[a[0],b[0][1]],[a[1],b[1][1]]]},output:function(a){return a&&[a[0][0],a[1][0]]}},Am={name:"y",handles:["n","s"].map(gc),input:function(a,b){return a&&[[b[0][0],a[0]],[b[1][0],a[1]]]},output:function(a){return a&&[a[0][1],a[1][1]]}},Bm={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(gc),input:function(a){return a},output:function(a){return a}},Cm={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dm={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Em={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fm={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Gm={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Hm=Math.cos,Im=Math.sin,Jm=Math.PI,Km=Jm/2,Lm=2*Jm,Mm=Math.max,Nm=Array.prototype.slice,Om=function(a){return function(){return a}},Pm=Math.PI,Qm=2*Pm,Rm=Qm-1e-6;nc.prototype=oc.prototype={constructor:nc,moveTo:function(a,b){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,b){this._+="L"+(this._x1=+a)+","+(this._y1=+b)},quadraticCurveTo:function(a,b,c,d){this._+="Q"+ +a+","+ +b+","+(this._x1=+c)+","+(this._y1=+d)},bezierCurveTo:function(a,b,c,d,e,f){this._+="C"+ +a+","+ +b+","+ +c+","+ +d+","+(this._x1=+e)+","+(this._y1=+f)},arcTo:function(a,b,c,d,e){a=+a,b=+b,c=+c,d=+d,e=+e;var f=this._x1,g=this._y1,h=c-a,i=d-b,j=f-a,k=g-b,l=j*j+k*k;if(0>e)throw new Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=a)+","+(this._y1=b);else if(l>1e-6)if(Math.abs(k*h-i*j)>1e-6&&e){var m=c-f,n=d-g,o=h*h+i*i,p=m*m+n*n,q=Math.sqrt(o),r=Math.sqrt(l),s=e*Math.tan((Pm-Math.acos((o+l-p)/(2*q*r)))/2),t=s/r,u=s/q;Math.abs(t-1)>1e-6&&(this._+="L"+(a+t*j)+","+(b+t*k)),this._+="A"+e+","+e+",0,0,"+ +(k*m>j*n)+","+(this._x1=a+u*h)+","+(this._y1=b+u*i)}else this._+="L"+(this._x1=a)+","+(this._y1=b)},arc:function(a,b,c,d,e,f){a=+a,b=+b;var g=(c=+c)*Math.cos(d),h=c*Math.sin(d),i=a+g,j=b+h,k=1^f,l=f?d-e:e-d;if(0>c)throw new Error("negative radius: "+c);null===this._x1?this._+="M"+i+","+j:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-j)>1e-6)&&(this._+="L"+i+","+j),c&&(0>l&&(l=l%Qm+Qm),l>Rm?this._+="A"+c+","+c+",0,1,"+k+","+(a-g)+","+(b-h)+"A"+c+","+c+",0,1,"+k+","+(this._x1=i)+","+(this._y1=j):l>1e-6&&(this._+="A"+c+","+c+",0,"+ +(l>=Pm)+","+k+","+(this._x1=a+c*Math.cos(e))+","+(this._y1=b+c*Math.sin(e))))},rect:function(a,b,c,d){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)+"h"+ +c+"v"+ +d+"h"+-c+"Z"},toString:function(){return this._}},uc.prototype=vc.prototype={constructor:uc,has:function(a){return"$"+a in this},get:function(a){return this["$"+a]},set:function(a,b){return this["$"+a]=b,this},remove:function(a){var b="$"+a;return b in this&&delete this[b]},clear:function(){for(var a in this)"$"===a[0]&&delete this[a]},keys:function(){var a=[];for(var b in this)"$"===b[0]&&a.push(b.slice(1));return a},values:function(){var a=[];for(var b in this)"$"===b[0]&&a.push(this[b]);return a},entries:function(){var a=[];for(var b in this)"$"===b[0]&&a.push({key:b.slice(1),value:this[b]});return a},size:function(){var a=0;for(var b in this)"$"===b[0]&&++a;return a},empty:function(){for(var a in this)if("$"===a[0])return!1;return!0},each:function(a){for(var b in this)"$"===b[0]&&a(this[b],b.slice(1),this)}};var Sm=vc.prototype;Ac.prototype=Bc.prototype={constructor:Ac,has:Sm.has,add:function(a){return a+="",this["$"+a]=a,this},remove:Sm.remove,clear:Sm.clear,values:Sm.keys,size:Sm.size,empty:Sm.empty,each:Sm.each};var Tm={},Um={},Vm=34,Wm=10,Xm=13,Ym=function(a){function b(a,b){function c(){if(j)return Um;if(k)return k=!1,Tm;var b,c,d=h;if(a.charCodeAt(d)===Vm){for(;h++<g&&a.charCodeAt(h)!==Vm||a.charCodeAt(++h)===Vm;);return(b=h)>=g?j=!0:(c=a.charCodeAt(h++))===Wm?k=!0:c===Xm&&(k=!0,a.charCodeAt(h)===Wm&&++h),a.slice(d+1,b-1).replace(/""/g,'"')}for(;g>h;){if((c=a.charCodeAt(b=h++))===Wm)k=!0;else if(c===Xm)k=!0,a.charCodeAt(h)===Wm&&++h;else if(c!==f)continue;return a.slice(d,b)}return j=!0,a.slice(d,g)}var d,e=[],g=a.length,h=0,i=0,j=0>=g,k=!1;for(a.charCodeAt(g-1)===Wm&&--g,a.charCodeAt(g-1)===Xm&&--g;(d=c())!==Um;){for(var l=[];d!==Tm&&d!==Um;)l.push(d),d=c();b&&null==(l=b(l,i++))||e.push(l)}return e}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),f=a.charCodeAt(0);return{parse:function(a,c){var d,e,f=b(a,function(a,b){return d?d(a,b-1):(e=a,void(d=c?Dc(a,c):Cc(a)))});return f.columns=e,f},parseRows:b,format:function(b,c){return null==c&&(c=Ec(b)),[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}},Zm=Ym(","),$m=Zm.parse,_m=Zm.parseRows,an=Zm.format,bn=Zm.formatRows,cn=Ym("	"),dn=cn.parse,en=cn.parseRows,fn=cn.format,gn=cn.formatRows,hn=function(a){return function(){return a}},jn=function(){return 1e-6*(Math.random()-.5)},kn=function(a,b,c,d,e){this.node=a,this.x0=b,this.y0=c,this.x1=d,this.y1=e},ln=Ic.prototype=Jc.prototype;ln.copy=function(){var a,b,c=new Jc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root;if(!d)return c;if(!d.length)return c._root=Kc(d),c;for(a=[{source:d,target:c._root=new Array(4)}];d=a.pop();)for(var e=0;4>e;++e)(b=d.source[e])&&(b.length?a.push({source:b,target:d.target[e]=new Array(4)}):d.target[e]=Kc(b));return c},ln.add=function(a){var b=+this._x.call(null,a),c=+this._y.call(null,a);return Fc(this.cover(b,c),b,c,a)},ln.addAll=function(a){var b,c,d,e,f=a.length,g=new Array(f),h=new Array(f),i=1/0,j=1/0,k=-1/0,l=-1/0;for(c=0;f>c;++c)isNaN(d=+this._x.call(null,b=a[c]))||isNaN(e=+this._y.call(null,b))||(g[c]=d,h[c]=e,i>d&&(i=d),d>k&&(k=d),j>e&&(j=e),e>l&&(l=e));for(i>k&&(i=this._x0,k=this._x1),j>l&&(j=this._y0,l=this._y1),this.cover(i,j).cover(k,l),c=0;f>c;++c)Fc(this,g[c],h[c],a[c]);return this},ln.cover=function(a,b){if(isNaN(a=+a)||isNaN(b=+b))return this;var c=this._x0,d=this._y0,e=this._x1,f=this._y1;if(isNaN(c))e=(c=Math.floor(a))+1,f=(d=Math.floor(b))+1;else{if(!(c>a||a>e||d>b||b>f))return this;var g,h,i=e-c,j=this._root;switch(h=((d+f)/2>b)<<1|(c+e)/2>a){case 0:do g=new Array(4),g[h]=j,j=g;while(i*=2,e=c+i,f=d+i,a>e||b>f);break;case 1:do g=new Array(4),g[h]=j,j=g;while(i*=2,c=e-i,f=d+i,c>a||b>f);break;case 2:do g=new Array(4),g[h]=j,j=g;while(i*=2,e=c+i,d=f-i,a>e||d>b);break;case 3:do g=new Array(4),g[h]=j,j=g;while(i*=2,c=e-i,d=f-i,c>a||d>b)}this._root&&this._root.length&&(this._root=j)}return this._x0=c,this._y0=d,this._x1=e,this._y1=f,this},ln.data=function(){var a=[];return this.visit(function(b){if(!b.length)do a.push(b.data);while(b=b.next)}),a},ln.extent=function(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ln.find=function(a,b,c){var d,e,f,g,h,i,j,k=this._x0,l=this._y0,m=this._x1,n=this._y1,o=[],p=this._root;for(p&&o.push(new kn(p,k,l,m,n)),null==c?c=1/0:(k=a-c,l=b-c,m=a+c,n=b+c,c*=c);i=o.pop();)if(!(!(p=i.node)||(e=i.x0)>m||(f=i.y0)>n||(g=i.x1)<k||(h=i.y1)<l))if(p.length){var q=(e+g)/2,r=(f+h)/2;o.push(new kn(p[3],q,r,g,h),new kn(p[2],e,r,q,h),new kn(p[1],q,f,g,r),new kn(p[0],e,f,q,r)),(j=(b>=r)<<1|a>=q)&&(i=o[o.length-1],o[o.length-1]=o[o.length-1-j],o[o.length-1-j]=i)}else{var s=a-+this._x.call(null,p.data),t=b-+this._y.call(null,p.data),u=s*s+t*t;if(c>u){var v=Math.sqrt(c=u);k=a-v,l=b-v,m=a+v,n=b+v,d=p.data}}return d},ln.remove=function(a){if(isNaN(f=+this._x.call(null,a))||isNaN(g=+this._y.call(null,a)))return this;var b,c,d,e,f,g,h,i,j,k,l,m,n=this._root,o=this._x0,p=this._y0,q=this._x1,r=this._y1;if(!n)return this;if(n.length)for(;;){if((j=f>=(h=(o+q)/2))?o=h:q=h,(k=g>=(i=(p+r)/2))?p=i:r=i,b=n,!(n=n[l=k<<1|j]))return this;if(!n.length)break;(b[l+1&3]||b[l+2&3]||b[l+3&3])&&(c=b,m=l)}for(;n.data!==a;)if(d=n,!(n=n.next))return this;return(e=n.next)&&delete n.next,d?(e?d.next=e:delete d.next,this):b?(e?b[l]=e:delete b[l],(n=b[0]||b[1]||b[2]||b[3])&&n===(b[3]||b[2]||b[1]||b[0])&&!n.length&&(c?c[m]=n:this._root=n),this):(this._root=e,this)},ln.removeAll=function(a){for(var b=0,c=a.length;c>b;++b)this.remove(a[b]);return this},ln.root=function(){return this._root},ln.size=function(){var a=0;return this.visit(function(b){if(!b.length)do++a;while(b=b.next)}),a},ln.visit=function(a){var b,c,d,e,f,g,h=[],i=this._root;for(i&&h.push(new kn(i,this._x0,this._y0,this._x1,this._y1));b=h.pop();)if(!a(i=b.node,d=b.x0,e=b.y0,f=b.x1,g=b.y1)&&i.length){var j=(d+f)/2,k=(e+g)/2;(c=i[3])&&h.push(new kn(c,j,k,f,g)),(c=i[2])&&h.push(new kn(c,d,k,j,g)),(c=i[1])&&h.push(new kn(c,j,e,f,k)),(c=i[0])&&h.push(new kn(c,d,e,j,k))}return this},ln.visitAfter=function(a){var b,c=[],d=[];for(this._root&&c.push(new kn(this._root,this._x0,this._y0,this._x1,this._y1));b=c.pop();){var e=b.node;if(e.length){var f,g=b.x0,h=b.y0,i=b.x1,j=b.y1,k=(g+i)/2,l=(h+j)/2;(f=e[0])&&c.push(new kn(f,g,h,k,l)),(f=e[1])&&c.push(new kn(f,k,h,i,l)),(f=e[2])&&c.push(new kn(f,g,l,k,j)),(f=e[3])&&c.push(new kn(f,k,l,i,j))}d.push(b)}for(;b=d.pop();)a(b.node,b.x0,b.y0,b.x1,b.y1);return this},ln.x=function(a){return arguments.length?(this._x=a,this):this._x},ln.y=function(a){return arguments.length?(this._y=a,this):this._y};var mn,nn=10,on=Math.PI*(3-Math.sqrt(5)),pn=function(a,b){if((c=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e"))<0)return null;var c,d=a.slice(0,c);return[d.length>1?d[0]+d.slice(2):d,+a.slice(c+1)]},qn=function(a){return(a=pn(Math.abs(a)))?a[1]:NaN},rn=function(a,b){return function(c,d){for(var e=c.length,f=[],g=0,h=a[0],i=0;e>0&&h>0&&(i+h+1>d&&(h=Math.max(1,d-i)),f.push(c.substring(e-=h,e+h)),!((i+=h+1)>d));)h=a[g=(g+1)%a.length];return f.reverse().join(b)}},sn=function(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}},tn=function(a,b){var c=pn(a,b);if(!c)return a+"";var d=c[0],e=c[1];return 0>e?"0."+new Array(-e).join("0")+d:d.length>e+1?d.slice(0,e+1)+"."+d.slice(e+1):d+new Array(e-d.length+2).join("0")},un={"":function(a,b){a:for(var c,d=(a=a.toPrecision(b)).length,e=1,f=-1;d>e;++e)switch(a[e]){case".":f=c=e;break;case"0":0===f&&(f=e),c=e;break;case"e":break a;default:f>0&&(f=0)}return f>0?a.slice(0,f)+a.slice(c+1):a},"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},p:function(a,b){return tn(100*a,b)},r:tn,s:function(a,b){var c=pn(a,b);if(!c)return a+"";var d=c[0],e=c[1],f=e-(mn=3*Math.max(-8,Math.min(8,Math.floor(e/3))))+1,g=d.length;return f===g?d:f>g?d+new Array(f-g+1).join("0"):f>0?d.slice(0,f)+"."+d.slice(f):"0."+new Array(1-f).join("0")+pn(a,Math.max(0,b+f-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},vn=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Rc.prototype=Sc.prototype,Sc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var wn,xn=function(a){return a},yn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],zn=function(a){function b(a){function b(a){var b,d,g,k=q,u=r;if("c"===p)u=s(a)+u,a="";else{var v=(a=+a)<0;if(a=s(Math.abs(a),o),v&&0==+a&&(v=!1),k=(v?"("===j?j:"-":"-"===j||"("===j?"":j)+k,u=u+("s"===p?yn[8+mn/3]:"")+(v&&"("===j?")":""),t)for(b=-1,d=a.length;++b<d;)if(48>(g=a.charCodeAt(b))||g>57){u=(46===g?e+a.slice(b+1):a.slice(b))+u,a=a.slice(0,b);break}}n&&!l&&(a=c(a,1/0));var w=k.length+a.length+u.length,x=m>w?new Array(m-w+1).join(h):"";switch(n&&l&&(a=c(x+a,x.length?m-u.length:1/0),x=""),i){case"<":a=k+a+u+x;break;case"=":a=k+x+a+u;break;case"^":a=x.slice(0,w=x.length>>1)+k+a+u+x.slice(w);break;default:a=x+k+a+u}return f(a)}var h=(a=Rc(a)).fill,i=a.align,j=a.sign,k=a.symbol,l=a.zero,m=a.width,n=a.comma,o=a.precision,p=a.type,q="$"===k?d[0]:"#"===k&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",r="$"===k?d[1]:/[%p]/.test(p)?g:"",s=un[p],t=!p||/[defgprs%]/.test(p);return o=null==o?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,o)):Math.max(0,Math.min(20,o)),b.toString=function(){return a+""},b}var c=a.grouping&&a.thousands?rn(a.grouping,a.thousands):xn,d=a.currency,e=a.decimal,f=a.numerals?sn(a.numerals):xn,g=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=b((a=Rc(a),a.type="f",a)),e=3*Math.max(-8,Math.min(8,Math.floor(qn(c)/3))),f=Math.pow(10,-e),g=yn[8+e/3];return function(a){return d(f*a)+g}}}};Tc({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var An=function(a){return Math.max(0,-qn(Math.abs(a)))},Bn=function(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(qn(b)/3)))-qn(Math.abs(a)))},Cn=function(a,b){return a=Math.abs(a),b=Math.abs(b)-a,Math.max(0,qn(b)-qn(a))+1},Dn=function(){return new Uc};Uc.prototype={constructor:Uc,reset:function(){this.s=this.t=0},add:function(a){Vc(io,a,this.t),Vc(this,io.s,this.s),this.s?this.t+=io.t:this.s=io.t},valueOf:function(){return this.s}};var En,Fn,Gn,Hn,In,Jn,Kn,Ln,Mn,Nn,On,Pn,Qn,Rn,Sn,Tn,Un,Vn,Wn,Xn,Yn,Zn,$n,_n,ao,bo,co,eo,fo,go,ho,io=new Uc,jo=1e-6,ko=Math.PI,lo=ko/2,mo=ko/4,no=2*ko,oo=180/ko,po=ko/180,qo=Math.abs,ro=Math.atan,so=Math.atan2,to=Math.cos,uo=Math.ceil,vo=Math.exp,wo=Math.log,xo=Math.pow,yo=Math.sin,zo=Math.sign||function(a){return a>0?1:0>a?-1:0},Ao=Math.sqrt,Bo=Math.tan,Co={Feature:function(a,b){$c(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)$c(c[d].geometry,b)}},Do={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){_c(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)_c(c[d],b,0)},Polygon:function(a,b){ad(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ad(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)$c(c[d],b)}},Eo=function(a,b){a&&Co.hasOwnProperty(a.type)?Co[a.type](a,b):$c(a,b)},Fo=Dn(),Go=Dn(),Ho={point:Zc,lineStart:Zc,lineEnd:Zc,polygonStart:function(){Fo.reset(),Ho.lineStart=bd,Ho.lineEnd=cd},polygonEnd:function(){var a=+Fo;Go.add(0>a?no+a:a),this.lineStart=this.lineEnd=this.point=Zc},sphere:function(){Go.add(no)}},Io=Dn(),Jo={point:md,lineStart:od,lineEnd:pd,polygonStart:function(){Jo.point=qd,Jo.lineStart=rd,Jo.lineEnd=sd,Io.reset(),Ho.polygonStart()},polygonEnd:function(){Ho.polygonEnd(),Jo.point=md,Jo.lineStart=od,Jo.lineEnd=pd,0>Fo?(Jn=-(Ln=180),Kn=-(Mn=90)):Io>jo?Mn=90:-jo>Io&&(Kn=-90),Sn[0]=Jn,Sn[1]=Ln}},Ko={sphere:Zc,point:wd,lineStart:yd,lineEnd:Bd,polygonStart:function(){Ko.lineStart=Cd,Ko.lineEnd=Dd},polygonEnd:function(){Ko.lineStart=yd,Ko.lineEnd=Bd}},Lo=function(a){return function(){return a}},Mo=function(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return(c=b.invert(c,d))&&a.invert(c[0],c[1])}),c};Gd.invert=Gd;var No,Oo,Po,Qo,Ro,So,To,Uo,Vo,Wo,Xo,Yo=function(a){function b(b){return b=a(b[0]*po,b[1]*po),b[0]*=oo,b[1]*=oo,b}return a=Hd(a[0]*po,a[1]*po,a.length>2?a[2]*po:0),b.invert=function(b){return b=a.invert(b[0]*po,b[1]*po),b[0]*=oo,b[1]*=oo,b},b},Zo=function(){var a,b=[];return{point:function(b,c){a.push([b,c])},lineStart:function(){b.push(a=[])},lineEnd:Zc,rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))},result:function(){var c=b;return b=[],a=null,c}}},$o=function(a,b){return qo(a[0]-b[0])<jo&&qo(a[1]-b[1])<jo},_o=function(a,b,c,d,e){var f,g,h=[],i=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c,d=a[0],g=a[b];if($o(d,g)){for(e.lineStart(),f=0;b>f;++f)e.point((d=a[f])[0],d[1]);e.lineEnd()}else h.push(c=new Nd(d,a,null,!0)),i.push(c.o=new Nd(d,null,c,!1)),h.push(c=new Nd(g,a,null,!1)),i.push(c.o=new Nd(g,null,c,!0))}}),h.length){for(i.sort(b),Od(h),Od(i),f=0,g=i.length;g>f;++f)i[f].e=c=!c;for(var j,k,l=h[0];;){for(var m=l,n=!0;m.v;)if((m=m.n)===l)return;j=m.z,e.lineStart();do{if(m.v=m.o.v=!0,m.e){if(n)for(f=0,g=j.length;g>f;++f)e.point((k=j[f])[0],k[1]);else d(m.x,m.n.x,1,e);m=m.n}else{if(n)for(j=m.p.z,f=j.length-1;f>=0;--f)e.point((k=j[f])[0],k[1]);else d(m.x,m.p.x,-1,e);m=m.p}j=(m=m.o).z,n=!n}while(!m.v);e.lineEnd()}}},ap=Dn(),bp=function(a,b){var c=b[0],d=b[1],e=[yo(c),-to(c),0],f=0,g=0;ap.reset();for(var h=0,i=a.length;i>h;++h)if(k=(j=a[h]).length)for(var j,k,l=j[k-1],m=l[0],n=l[1]/2+mo,o=yo(n),p=to(n),q=0;k>q;++q,m=s,o=u,p=v,l=r){var r=j[q],s=r[0],t=r[1]/2+mo,u=yo(t),v=to(t),w=s-m,x=w>=0?1:-1,y=x*w,z=y>ko,A=o*u;if(ap.add(so(A*x*yo(y),p*v+A*to(y))),f+=z?w+x*no:w,z^m>=c^s>=c){var B=id(gd(l),gd(r));ld(B);var C=id(e,B);ld(C);var D=(z^w>=0?-1:1)*Xc(C[2]);(d>D||d===D&&(B[0]||B[1]))&&(g+=z^w>=0?1:-1)}}return(-jo>f||jo>f&&-jo>ap)^1&g},cp=function(a,b,c,d){return function(e){function f(b,c){a(b,c)&&e.point(b,c)}function g(a,b){p.point(a,b)}function h(){t.point=g,p.lineStart()}function i(){t.point=f,p.lineEnd()}function j(a,b){o.push([a,b]),r.point(a,b)}function k(){r.lineStart(),o=[]}function l(){j(o[0][0],o[0][1]),r.lineEnd();var a,b,c,d,f=r.clean(),g=q.result(),h=g.length;if(o.pop(),m.push(o),o=null,h)if(1&f){if(c=g[0],(b=c.length-1)>0){for(s||(e.polygonStart(),s=!0),e.lineStart(),a=0;b>a;++a)e.point((d=c[a])[0],d[1]);e.lineEnd()}}else h>1&&2&f&&g.push(g.pop().concat(g.shift())),n.push(g.filter(Pd))}var m,n,o,p=b(e),q=Zo(),r=b(q),s=!1,t={point:f,lineStart:h,lineEnd:i,polygonStart:function(){t.point=j,t.lineStart=k,t.lineEnd=l,n=[],m=[]},polygonEnd:function(){t.point=f,t.lineStart=h,t.lineEnd=i,n=Fj(n);var a=bp(m,d);n.length?(s||(e.polygonStart(),s=!0),_o(n,Qd,a,c,e)):a&&(s||(e.polygonStart(),s=!0),e.lineStart(),c(null,null,1,e),e.lineEnd()),s&&(e.polygonEnd(),s=!1),n=m=null},sphere:function(){e.polygonStart(),e.lineStart(),c(null,null,1,e),e.lineEnd(),e.polygonEnd()}};return t}},dp=cp(function(){return!0},function(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?ko:-ko,i=qo(f-c);qo(i-ko)<jo?(a.point(c,d=(d+g)/2>0?lo:-lo),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=ko&&(qo(c-e)<jo&&(c-=e*jo),qo(f-h)<jo&&(f-=h*jo),d=Rd(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}},function(a,b,c,d){var e;if(null==a)e=c*lo,d.point(-ko,e),d.point(0,e),d.point(ko,e),d.point(ko,0),d.point(ko,-e),d.point(0,-e),d.point(-ko,-e),d.point(-ko,0),d.point(-ko,e);else if(qo(a[0]-b[0])>jo){var f=a[0]<b[0]?ko:-ko;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])},[-ko,-lo]),ep=function(a){function b(a,b){return to(a)*to(b)>e}function c(a,b,c){var d=[1,0,0],f=id(gd(a),gd(b)),g=hd(f,f),h=f[0],i=g-h*h;if(!i)return!c&&a;var j=e*g/i,k=-e*h/i,l=id(d,f),m=kd(d,j);jd(m,kd(f,k));var n=l,o=hd(m,n),p=hd(n,n),q=o*o-p*(hd(m,m)-1);
if(!(0>q)){var r=Ao(q),s=kd(n,(-o-r)/p);if(jd(s,m),s=fd(s),!c)return s;var t,u=a[0],v=b[0],w=a[1],x=b[1];u>v&&(t=u,u=v,v=t);var y=v-u,z=qo(y-ko)<jo,A=z||jo>y;if(!z&&w>x&&(t=w,w=x,x=t),A?z?w+x>0^s[1]<(qo(s[0]-u)<jo?w:x):w<=s[1]&&s[1]<=x:y>ko^(u<=s[0]&&s[0]<=v)){var B=kd(n,(-o+r)/p);return jd(B,m),[s,fd(B)]}}}function d(b,c){var d=g?a:ko-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var e=to(a),f=6*po,g=e>0,h=qo(e)>jo;return cp(b,function(a){var e,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:d(l,m):p?d(l+(0>l?ko:-ko),m):0;if(!e&&(j=i=p)&&a.lineStart(),p!==i&&(!(n=c(e,o))||$o(e,n)||$o(o,n))&&(o[0]+=jo,o[1]+=jo,p=b(o[0],o[1])),p!==i)k=0,p?(a.lineStart(),n=c(o,e),a.point(n[0],n[1])):(n=c(e,o),a.point(n[0],n[1]),a.lineEnd()),e=n;else if(h&&e&&g^p){var r;q&f||!(r=c(o,e,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||e&&$o(e,o)||a.point(o[0],o[1]),e=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),e=null},clean:function(){return k|(j&&i)<<1}}},function(b,c,d,e){Ld(e,a,f,d,b,c)},g?[0,-a]:[-ko,a-ko])},fp=function(a,b,c,d,e,f){var g,h=a[0],i=a[1],j=0,k=1,l=b[0]-h,m=b[1]-i;if(g=c-h,l||!(g>0)){if(g/=l,0>l){if(j>g)return;k>g&&(k=g)}else if(l>0){if(g>k)return;g>j&&(j=g)}if(g=e-h,l||!(0>g)){if(g/=l,0>l){if(g>k)return;g>j&&(j=g)}else if(l>0){if(j>g)return;k>g&&(k=g)}if(g=d-i,m||!(g>0)){if(g/=m,0>m){if(j>g)return;k>g&&(k=g)}else if(m>0){if(g>k)return;g>j&&(j=g)}if(g=f-i,m||!(0>g)){if(g/=m,0>m){if(g>k)return;g>j&&(j=g)}else if(m>0){if(j>g)return;k>g&&(k=g)}return j>0&&(a[0]=h+j*l,a[1]=i+j*m),1>k&&(b[0]=h+k*l,b[1]=i+k*m),!0}}}}},gp=1e9,hp=-gp,ip=Dn(),jp={sphere:Zc,point:Zc,lineStart:function(){jp.point=Ud,jp.lineEnd=Td},lineEnd:Zc,polygonStart:Zc,polygonEnd:Zc},kp=function(a){return ip.reset(),Eo(a,jp),+ip},lp=[null,null],mp={type:"LineString",coordinates:lp},np=function(a,b){return lp[0]=a,lp[1]=b,kp(mp)},op={Feature:function(a,b){return Wd(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)if(Wd(c[d].geometry,b))return!0;return!1}},pp={Sphere:function(){return!0},Point:function(a,b){return Xd(a.coordinates,b)},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)if(Xd(c[d],b))return!0;return!1},LineString:function(a,b){return Yd(a.coordinates,b)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)if(Yd(c[d],b))return!0;return!1},Polygon:function(a,b){return Zd(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)if(Zd(c[d],b))return!0;return!1},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)if(Wd(c[d],b))return!0;return!1}},qp=function(a){return a},rp=Dn(),sp=Dn(),tp={point:Zc,lineStart:Zc,lineEnd:Zc,polygonStart:function(){tp.lineStart=de,tp.lineEnd=ge},polygonEnd:function(){tp.lineStart=tp.lineEnd=tp.point=Zc,rp.add(qo(sp)),sp.reset()},result:function(){var a=rp/2;return rp.reset(),a}},up=1/0,vp=up,wp=-up,xp=wp,yp={point:function(a,b){up>a&&(up=a),a>wp&&(wp=a),vp>b&&(vp=b),b>xp&&(xp=b)},lineStart:Zc,lineEnd:Zc,polygonStart:Zc,polygonEnd:Zc,result:function(){var a=[[up,vp],[wp,xp]];return wp=xp=-(vp=up=1/0),a}},zp=0,Ap=0,Bp=0,Cp=0,Dp=0,Ep=0,Fp=0,Gp=0,Hp=0,Ip={point:he,lineStart:ie,lineEnd:le,polygonStart:function(){Ip.lineStart=me,Ip.lineEnd=ne},polygonEnd:function(){Ip.point=he,Ip.lineStart=ie,Ip.lineEnd=le},result:function(){var a=Hp?[Fp/Hp,Gp/Hp]:Ep?[Cp/Ep,Dp/Ep]:Bp?[zp/Bp,Ap/Bp]:[NaN,NaN];return zp=Ap=Bp=Cp=Dp=Ep=Fp=Gp=Hp=0,a}};qe.prototype={_radius:4.5,pointRadius:function(a){return this._radius=a,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(a,b){switch(this._point){case 0:this._context.moveTo(a,b),this._point=1;break;case 1:this._context.lineTo(a,b);break;default:this._context.moveTo(a+this._radius,b),this._context.arc(a,b,this._radius,0,no)}},result:Zc};var Jp,Kp,Lp,Mp,Np,Op=Dn(),Pp={point:Zc,lineStart:function(){Pp.point=re},lineEnd:function(){Jp&&se(Kp,Lp),Pp.point=Zc},polygonStart:function(){Jp=!0},polygonEnd:function(){Jp=null},result:function(){var a=+Op;return Op.reset(),a}};te.prototype={_radius:4.5,_circle:ue(4.5),pointRadius:function(a){return(a=+a)!==this._radius&&(this._radius=a,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(a,b){switch(this._point){case 0:this._string.push("M",a,",",b),this._point=1;break;case 1:this._string.push("L",a,",",b);break;default:null==this._circle&&(this._circle=ue(this._radius)),this._string.push("M",a,",",b,this._circle)}},result:function(){if(this._string.length){var a=this._string.join("");return this._string=[],a}return null}},we.prototype={constructor:we,point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Qp=16,Rp=to(30*po),Sp=function(a,b){return+b?Ae(a,b):ze(a)},Tp=ve({point:function(a,b){this.stream.point(a*po,b*po)}}),Up=function(){return Ee(Ge).scale(155.424).center([0,33.6442])},Vp=function(){return Up().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Wp=Ie(function(a){return Ao(2/(1+a))});Wp.invert=Je(function(a){return 2*Xc(a/2)});var Xp=Ie(function(a){return(a=Wc(a))&&a/yo(a)});Xp.invert=Je(function(a){return a}),Ke.invert=function(a,b){return[a,2*ro(vo(b))-lo]},Oe.invert=Oe,Qe.invert=Je(ro),Se.invert=function(a,b){var c,d=b,e=25;do{var f=d*d,g=f*f;d-=c=(d*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))-b)/(1.007226+f*(.045255+g*(.259866*f-.311325-.005916*11*g)))}while(qo(c)>jo&&--e>0);return[a/(.8707+(f=d*d)*(f*(f*f*f*(.003971-.001529*f)-.013791)-.131979)),d]},Te.invert=Je(Xc),Ue.invert=Je(function(a){return 2*ro(a)}),Ve.invert=function(a,b){return[-b,2*ro(vo(a))-lo]},hf.prototype=df.prototype={constructor:hf,count:function(){return this.eachAfter(bf)},each:function(a){var b,c,d,e,f=this,g=[f];do for(b=g.reverse(),g=[];f=b.pop();)if(a(f),c=f.children)for(d=0,e=c.length;e>d;++d)g.push(c[d]);while(g.length);return this},eachAfter:function(a){for(var b,c,d,e=this,f=[e],g=[];e=f.pop();)if(g.push(e),b=e.children)for(c=0,d=b.length;d>c;++c)f.push(b[c]);for(;e=g.pop();)a(e);return this},eachBefore:function(a){for(var b,c,d=this,e=[d];d=e.pop();)if(a(d),b=d.children)for(c=b.length-1;c>=0;--c)e.push(b[c]);return this},sum:function(a){return this.eachAfter(function(b){for(var c=+a(b.data)||0,d=b.children,e=d&&d.length;--e>=0;)c+=d[e].value;b.value=c})},sort:function(a){return this.eachBefore(function(b){b.children&&b.children.sort(a)})},path:function(a){for(var b=this,c=cf(b,a),d=[b];b!==c;)b=b.parent,d.push(b);for(var e=d.length;a!==c;)d.splice(e,0,a),a=a.parent;return d},ancestors:function(){for(var a=this,b=[a];a=a.parent;)b.push(a);return b},descendants:function(){var a=[];return this.each(function(b){a.push(b)}),a},leaves:function(){var a=[];return this.eachBefore(function(b){b.children||a.push(b)}),a},links:function(){var a=this,b=[];return a.each(function(c){c!==a&&b.push({source:c.parent,target:c})}),b},copy:function(){return df(this).eachBefore(ff)}};var Yp=Array.prototype.slice,Zp=function(a){for(var b,c,d=0,e=(a=jf(Yp.call(a))).length,f=[];e>d;)b=a[d],c&&mf(c,b)?++d:(c=of(f=kf(f,b)),d=0);return c},$p=function(a){return function(){return a}},_p=function(a){a.x0=Math.round(a.x0),a.y0=Math.round(a.y0),a.x1=Math.round(a.x1),a.y1=Math.round(a.y1)},aq=function(a,b,c,d,e){for(var f,g=a.children,h=-1,i=g.length,j=a.value&&(d-b)/a.value;++h<i;)(f=g[h]).y0=c,f.y1=e,f.x0=b,f.x1=b+=f.value*j},bq="$",cq={depth:-1},dq={};Mf.prototype=Object.create(hf.prototype);var eq=function(a,b,c,d,e){for(var f,g=a.children,h=-1,i=g.length,j=a.value&&(e-c)/a.value;++h<i;)(f=g[h]).x0=b,f.x1=d,f.y0=c,f.y1=c+=f.value*j},fq=(1+Math.sqrt(5))/2,gq=function Ft(a){function b(b,c,d,e,f){Of(a,b,c,d,e,f)}return b.ratio=function(a){return Ft((a=+a)>1?a:1)},b}(fq),hq=function Gt(a){function b(b,c,d,e,f){if((g=b._squarify)&&g.ratio===a)for(var g,h,i,j,k,l=-1,m=g.length,n=b.value;++l<m;){for(i=(h=g[l]).children,j=h.value=0,k=i.length;k>j;++j)h.value+=i[j].value;h.dice?aq(h,c,d,e,d+=(f-d)*h.value/n):eq(h,c,d,c+=(e-c)*h.value/n,f),n-=h.value}else b._squarify=g=Of(a,b,c,d,e,f),g.ratio=a}return b.ratio=function(a){return Gt((a=+a)>1?a:1)},b}(fq),iq=function(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])},jq=[].slice,kq={};Rf.prototype=Xf.prototype={constructor:Rf,defer:function(a){if("function"!=typeof a)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var b=jq.call(arguments,1);return b.push(a),++this._waiting,this._tasks.push(b),Sf(this),this},abort:function(){return null==this._error&&Vf(this,new Error("abort")),this},await:function(a){if("function"!=typeof a)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(b,c){a.apply(null,[b].concat(c))},Wf(this),this},awaitAll:function(a){if("function"!=typeof a)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=a,Wf(this),this}};var lq=function(){return Math.random()},mq=function Ht(a){function b(b,c){return b=null==b?0:+b,c=null==c?1:+c,1===arguments.length?(c=b,b=0):c-=b,function(){return a()*c+b}}return b.source=Ht,b}(lq),nq=function It(a){function b(b,c){var d,e;return b=null==b?0:+b,c=null==c?1:+c,function(){var f;if(null!=d)f=d,d=null;else do d=2*a()-1,f=2*a()-1,e=d*d+f*f;while(!e||e>1);return b+c*f*Math.sqrt(-2*Math.log(e)/e)}}return b.source=It,b}(lq),oq=function Jt(a){function b(){var b=nq.source(a).apply(this,arguments);return function(){return Math.exp(b())}}return b.source=Jt,b}(lq),pq=function Kt(a){function b(b){return function(){for(var c=0,d=0;b>d;++d)c+=a();return c}}return b.source=Kt,b}(lq),qq=function Lt(a){function b(b){var c=pq.source(a)(b);return function(){return c()/b}}return b.source=Lt,b}(lq),rq=function Mt(a){function b(b){return function(){return-Math.log(1-a())/b}}return b.source=Mt,b}(lq),sq=function(a,b){function c(a){var b,c=j.status;if(!c&&Zf(j)||c>=200&&300>c||304===c){if(f)try{b=f.call(d,j)}catch(a){return void h.call("error",d,a)}else b=j;h.call("load",d,b)}else h.call("error",d,a)}var d,e,f,g,h=m("beforesend","progress","load","error"),i=vc(),j=new XMLHttpRequest,k=null,l=null,n=0;if("undefined"==typeof XDomainRequest||"withCredentials"in j||!/^(http(s)?:)?\/\//.test(a)||(j=new XDomainRequest),"onload"in j?j.onload=j.onerror=j.ontimeout=c:j.onreadystatechange=function(a){j.readyState>3&&c(a)},j.onprogress=function(a){h.call("progress",d,a)},d={header:function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?i.get(a):(null==b?i.remove(a):i.set(a,b+""),d)},mimeType:function(a){return arguments.length?(e=null==a?null:a+"",d):e},responseType:function(a){return arguments.length?(g=a,d):g},timeout:function(a){return arguments.length?(n=+a,d):n},user:function(a){return arguments.length<1?k:(k=null==a?null:a+"",d)},password:function(a){return arguments.length<1?l:(l=null==a?null:a+"",d)},response:function(a){return f=a,d},get:function(a,b){return d.send("GET",a,b)},post:function(a,b){return d.send("POST",a,b)},send:function(b,c,f){return j.open(b,a,!0,k,l),null==e||i.has("accept")||i.set("accept",e+",*/*"),j.setRequestHeader&&i.each(function(a,b){j.setRequestHeader(b,a)}),null!=e&&j.overrideMimeType&&j.overrideMimeType(e),null!=g&&(j.responseType=g),n>0&&(j.timeout=n),null==f&&"function"==typeof c&&(f=c,c=null),null!=f&&1===f.length&&(f=Yf(f)),null!=f&&d.on("error",f).on("load",function(a){f(null,a)}),h.call("beforesend",d,j),j.send(null==c?null:c),d},abort:function(){return j.abort(),d},on:function(){var a=h.on.apply(h,arguments);return a===h?d:a}},null!=b){if("function"!=typeof b)throw new Error("invalid callback: "+b);return d.get(b)}return d},tq=function(a,b){return function(c,d){var e=sq(c).mimeType(a).response(b);if(null!=d){if("function"!=typeof d)throw new Error("invalid callback: "+d);return e.get(d)}return e}},uq=tq("text/html",function(a){return document.createRange().createContextualFragment(a.responseText)}),vq=tq("application/json",function(a){return JSON.parse(a.responseText)}),wq=tq("text/plain",function(a){return a.responseText}),xq=tq("application/xml",function(a){var b=a.responseXML;if(!b)throw new Error("parse error");return b}),yq=function(a,b){return function(c,d,e){arguments.length<3&&(e=d,d=null);var f=sq(c).mimeType(a);return f.row=function(a){return arguments.length?f.response($f(b,d=a)):d},f.row(d),e?f.get(e):f}},zq=yq("text/csv",$m),Aq=yq("text/tab-separated-values",dn),Bq=Array.prototype,Cq=Bq.map,Dq=Bq.slice,Eq={name:"implicit"},Fq=function(a){return function(){return a}},Gq=function(a){return+a},Hq=[0,1],Iq=function(b,c,d){var f,g=b[0],h=b[b.length-1],i=e(g,h,null==c?10:c);switch((d=Rc(null==d?",f":d)).type){case"s":var j=Math.max(Math.abs(g),Math.abs(h));return null!=d.precision||isNaN(f=Bn(i,j))||(d.precision=f),a.formatPrefix(d,j);case"":case"e":case"g":case"p":case"r":null!=d.precision||isNaN(f=Cn(i,Math.max(Math.abs(g),Math.abs(h))))||(d.precision=f-("e"===d.type));break;case"f":case"%":null!=d.precision||isNaN(f=An(i))||(d.precision=f-2*("%"===d.type))}return a.format(d)},Jq=function(a,b){var c,d=0,e=(a=a.slice()).length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a},Kq=new Date,Lq=new Date,Mq=yg(function(){},function(a,b){a.setTime(+a+b)},function(a,b){return b-a});Mq.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?yg(function(b){b.setTime(Math.floor(b/a)*a)},function(b,c){b.setTime(+b+c*a)},function(b,c){return(c-b)/a}):Mq:null};var Nq=Mq.range,Oq=6e4,Pq=6048e5,Qq=yg(function(a){a.setTime(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(+a+1e3*b)},function(a,b){return(b-a)/1e3},function(a){return a.getUTCSeconds()}),Rq=Qq.range,Sq=yg(function(a){a.setTime(Math.floor(a/Oq)*Oq)},function(a,b){a.setTime(+a+b*Oq)},function(a,b){return(b-a)/Oq},function(a){return a.getMinutes()}),Tq=Sq.range,Uq=yg(function(a){var b=a.getTimezoneOffset()*Oq%36e5;0>b&&(b+=36e5),a.setTime(36e5*Math.floor((+a-b)/36e5)+b)},function(a,b){a.setTime(+a+36e5*b)},function(a,b){return(b-a)/36e5},function(a){return a.getHours()}),Vq=Uq.range,Wq=yg(function(a){a.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b)},function(a,b){return(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*Oq)/864e5},function(a){return a.getDate()-1}),Xq=Wq.range,Yq=zg(0),Zq=zg(1),$q=zg(2),_q=zg(3),ar=zg(4),br=zg(5),cr=zg(6),dr=Yq.range,er=Zq.range,fr=$q.range,gr=_q.range,hr=ar.range,ir=br.range,jr=cr.range,kr=yg(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,b){a.setMonth(a.getMonth()+b)},function(a,b){return b.getMonth()-a.getMonth()+12*(b.getFullYear()-a.getFullYear())},function(a){return a.getMonth()}),lr=kr.range,mr=yg(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a,b){return b.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});mr.every=function(a){return isFinite(a=Math.floor(a))&&a>0?yg(function(b){b.setFullYear(Math.floor(b.getFullYear()/a)*a),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,c){b.setFullYear(b.getFullYear()+c*a)}):null};var nr=mr.range,or=yg(function(a){a.setUTCSeconds(0,0)},function(a,b){a.setTime(+a+b*Oq)},function(a,b){return(b-a)/Oq},function(a){return a.getUTCMinutes()}),pr=or.range,qr=yg(function(a){a.setUTCMinutes(0,0,0)},function(a,b){a.setTime(+a+36e5*b)},function(a,b){return(b-a)/36e5},function(a){return a.getUTCHours()}),rr=qr.range,sr=yg(function(a){a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+b)},function(a,b){return(b-a)/864e5},function(a){return a.getUTCDate()-1}),tr=sr.range,ur=Ag(0),vr=Ag(1),wr=Ag(2),xr=Ag(3),yr=Ag(4),zr=Ag(5),Ar=Ag(6),Br=ur.range,Cr=vr.range,Dr=wr.range,Er=xr.range,Fr=yr.range,Gr=zr.range,Hr=Ar.range,Ir=yg(function(a){a.setUTCDate(1),a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCMonth(a.getUTCMonth()+b)},function(a,b){return b.getUTCMonth()-a.getUTCMonth()+12*(b.getUTCFullYear()-a.getUTCFullYear())},function(a){return a.getUTCMonth()}),Jr=Ir.range,Kr=yg(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCFullYear(a.getUTCFullYear()+b)},function(a,b){return b.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});Kr.every=function(a){return isFinite(a=Math.floor(a))&&a>0?yg(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/a)*a),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCFullYear(b.getUTCFullYear()+c*a)}):null};var Lr,Mr=Kr.range,Nr={"-":"",_:" ",0:"0"},Or=/^\s*\d+/,Pr=/^%/,Qr=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;yh({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Rr=Date.prototype.toISOString?function(a){return a.toISOString()}:a.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Sr=+new Date("2000-01-01T00:00:00.000Z")?function(a){var b=new Date(a);return isNaN(b)?null:b}:a.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Tr=1e3,Ur=60*Tr,Vr=60*Ur,Wr=24*Vr,Xr=7*Wr,Yr=30*Wr,Zr=365*Wr,$r=function(a){return a.match(/.{6}/g).map(function(a){return"#"+a})},_r=$r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),as=$r("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),bs=$r("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),cs=$r("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),ds=wl(Ua(300,.5,0),Ua(-240,.5,1)),es=wl(Ua(-100,.75,.35),Ua(80,1.5,.8)),fs=wl(Ua(260,.75,.35),Ua(80,1.5,.8)),gs=Ua(),hs=Ch($r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),is=Ch($r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),js=Ch($r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ks=Ch($r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),ls=function(a){return function(){return a}},ms=Math.abs,ns=Math.atan2,os=Math.cos,ps=Math.max,qs=Math.min,rs=Math.sin,ss=Math.sqrt,ts=1e-12,us=Math.PI,vs=us/2,ws=2*us;Nh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._context.lineTo(a,b)}}};var xs=function(a){return new Nh(a)},ys=function(){function a(a){var h,i,j,k=a.length,l=!1;for(null==e&&(g=f(j=oc())),h=0;k>=h;++h)!(k>h&&d(i=a[h],h,a))===l&&((l=!l)?g.lineStart():g.lineEnd()),l&&g.point(+b(i,h,a),+c(i,h,a));return j?(g=null,j+""||null):void 0}var b=Oh,c=Ph,d=ls(!0),e=null,f=xs,g=null;return a.x=function(c){return arguments.length?(b="function"==typeof c?c:ls(+c),a):b},a.y=function(b){return arguments.length?(c="function"==typeof b?b:ls(+b),a):c},a.defined=function(b){return arguments.length?(d="function"==typeof b?b:ls(!!b),a):d},a.curve=function(b){return arguments.length?(f=b,null!=e&&(g=f(e)),a):f},a.context=function(b){return arguments.length?(null==b?e=g=null:g=f(e=b),a):e},a},zs=function(){function a(a){var b,k,l,m,n,o=a.length,p=!1,q=new Array(o),r=new Array(o);for(null==h&&(j=i(n=oc())),b=0;o>=b;++b){if(!(o>b&&g(m=a[b],b,a))===p)if(p=!p)k=b,j.areaStart(),j.lineStart();else{for(j.lineEnd(),j.lineStart(),l=b-1;l>=k;--l)j.point(q[l],r[l]);j.lineEnd(),j.areaEnd()}p&&(q[b]=+c(m,b,a),r[b]=+e(m,b,a),j.point(d?+d(m,b,a):q[b],f?+f(m,b,a):r[b]))}return n?(j=null,n+""||null):void 0}function b(){return ys().defined(g).curve(i).context(h)}var c=Oh,d=null,e=ls(0),f=Ph,g=ls(!0),h=null,i=xs,j=null;return a.x=function(b){return arguments.length?(c="function"==typeof b?b:ls(+b),d=null,a):c},a.x0=function(b){return arguments.length?(c="function"==typeof b?b:ls(+b),a):c},a.x1=function(b){return arguments.length?(d=null==b?null:"function"==typeof b?b:ls(+b),a):d},a.y=function(b){return arguments.length?(e="function"==typeof b?b:ls(+b),f=null,a):e},a.y0=function(b){return arguments.length?(e="function"==typeof b?b:ls(+b),a):e},a.y1=function(b){return arguments.length?(f=null==b?null:"function"==typeof b?b:ls(+b),a):f},a.lineX0=a.lineY0=function(){return b().x(c).y(e)},a.lineY1=function(){return b().x(c).y(f)},a.lineX1=function(){return b().x(d).y(e)},a.defined=function(b){return arguments.length?(g="function"==typeof b?b:ls(!!b),a):g},a.curve=function(b){return arguments.length?(i=b,null!=h&&(j=i(h)),a):i},a.context=function(b){return arguments.length?(null==b?h=j=null:j=i(h=b),a):h},a},As=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},Bs=function(a){return a},Cs=Rh(xs);Qh.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,b){this._curve.point(b*Math.sin(a),b*-Math.cos(a))}};var Ds=function(){return Sh(ys().curve(Cs))},Es=function(){var a=zs().curve(Cs),b=a.curve,c=a.lineX0,d=a.lineX1,e=a.lineY0,f=a.lineY1;return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return Sh(c())},delete a.lineX0,a.lineEndAngle=function(){return Sh(d())},delete a.lineX1,a.lineInnerRadius=function(){return Sh(e())},delete a.lineY0,a.lineOuterRadius=function(){return Sh(f())},delete a.lineY1,a.curve=function(a){return arguments.length?b(Rh(a)):b()._curve},a},Fs=function(a,b){return[(b=+b)*Math.cos(a-=Math.PI/2),b*Math.sin(a)]},Gs=Array.prototype.slice,Hs={draw:function(a,b){var c=Math.sqrt(b/us);a.moveTo(c,0),a.arc(0,0,c,0,ws)}},Is={draw:function(a,b){var c=Math.sqrt(b/5)/2;a.moveTo(-3*c,-c),a.lineTo(-c,-c),a.lineTo(-c,-3*c),a.lineTo(c,-3*c),a.lineTo(c,-c),a.lineTo(3*c,-c),a.lineTo(3*c,c),a.lineTo(c,c),a.lineTo(c,3*c),a.lineTo(-c,3*c),a.lineTo(-c,c),a.lineTo(-3*c,c),a.closePath()}},Js=Math.sqrt(1/3),Ks=2*Js,Ls={draw:function(a,b){var c=Math.sqrt(b/Ks),d=c*Js;a.moveTo(0,-c),a.lineTo(d,0),a.lineTo(0,c),a.lineTo(-d,0),a.closePath()}},Ms=Math.sin(us/10)/Math.sin(7*us/10),Ns=Math.sin(ws/10)*Ms,Os=-Math.cos(ws/10)*Ms,Ps={draw:function(a,b){var c=Math.sqrt(.8908130915292852*b),d=Ns*c,e=Os*c;a.moveTo(0,-c),a.lineTo(d,e);for(var f=1;5>f;++f){var g=ws*f/5,h=Math.cos(g),i=Math.sin(g);a.lineTo(i*c,-h*c),a.lineTo(h*d-i*e,i*d+h*e)}a.closePath()}},Qs={draw:function(a,b){var c=Math.sqrt(b),d=-c/2;a.rect(d,d,c,c)}},Rs=Math.sqrt(3),Ss={draw:function(a,b){var c=-Math.sqrt(b/(3*Rs));a.moveTo(0,2*c),a.lineTo(-Rs*c,-c),a.lineTo(Rs*c,-c),a.closePath()}},Ts=-.5,Us=Math.sqrt(3)/2,Vs=1/Math.sqrt(12),Ws=3*(Vs/2+1),Xs={draw:function(a,b){var c=Math.sqrt(b/Ws),d=c/2,e=c*Vs,f=d,g=c*Vs+c,h=-f,i=g;a.moveTo(d,e),a.lineTo(f,g),a.lineTo(h,i),a.lineTo(Ts*d-Us*e,Us*d+Ts*e),a.lineTo(Ts*f-Us*g,Us*f+Ts*g),a.lineTo(Ts*h-Us*i,Us*h+Ts*i),a.lineTo(Ts*d+Us*e,Ts*e-Us*d),a.lineTo(Ts*f+Us*g,Ts*g-Us*f),a.lineTo(Ts*h+Us*i,Ts*i-Us*h),a.closePath()}},Ys=[Hs,Is,Ls,Qs,Ps,Ss,Xs],Zs=function(){};$h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zh(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},_h.prototype={areaStart:Zs,areaEnd:Zs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._x2=a,this._y2=b;break;case 1:this._point=2,this._x3=a,this._y3=b;break;case 2:this._point=3,this._x4=a,this._y4=b,this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+b)/6);break;default:Zh(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},ai.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+a)/6,d=(this._y0+4*this._y1+b)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);
break;case 3:this._point=4;default:Zh(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},bi.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var a=this._x,b=this._y,c=a.length-1;if(c>0)for(var d,e=a[0],f=b[0],g=a[c]-e,h=b[c]-f,i=-1;++i<=c;)d=i/c,this._basis.point(this._beta*a[i]+(1-this._beta)*(e+d*g),this._beta*b[i]+(1-this._beta)*(f+d*h));this._x=this._y=null,this._basis.lineEnd()},point:function(a,b){this._x.push(+a),this._y.push(+b)}};var $s=function Nt(a){function b(b){return 1===a?new $h(b):new bi(b,a)}return b.beta=function(a){return Nt(+a)},b}(.85);di.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ci(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2,this._x1=a,this._y1=b;break;case 2:this._point=3;default:ci(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var _s=function Ot(a){function b(b){return new di(b,a)}return b.tension=function(a){return Ot(+a)},b}(0);ei.prototype={areaStart:Zs,areaEnd:Zs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._x3=a,this._y3=b;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3,this._x5=a,this._y5=b;break;default:ci(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var at=function Pt(a){function b(b){return new ei(b,a)}return b.tension=function(a){return Pt(+a)},b}(0);fi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ci(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var bt=function Qt(a){function b(b){return new fi(b,a)}return b.tension=function(a){return Qt(+a)},b}(0);hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){if(a=+a,b=+b,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;default:gi(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var ct=function Rt(a){function b(b){return a?new hi(b,a):new di(b,0)}return b.alpha=function(a){return Rt(+a)},b}(.5);ii.prototype={areaStart:Zs,areaEnd:Zs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){if(a=+a,b=+b,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=a,this._y3=b;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3,this._x5=a,this._y5=b;break;default:gi(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var dt=function St(a){function b(b){return a?new ii(b,a):new ei(b,0)}return b.alpha=function(a){return St(+a)},b}(.5);ji.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){if(a=+a,b=+b,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gi(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var et=function Tt(a){function b(b){return a?new ji(b,a):new fi(b,0)}return b.alpha=function(a){return Tt(+a)},b}(.5);ki.prototype={areaStart:Zs,areaEnd:Zs,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(a,b){a=+a,b=+b,this._point?this._context.lineTo(a,b):(this._point=1,this._context.moveTo(a,b))}},pi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oi(this,this._t0,ni(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){var c=NaN;if(a=+a,b=+b,a!==this._x1||b!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,oi(this,ni(this,c=mi(this,a,b)),c);break;default:oi(this,this._t0,c=mi(this,a,b))}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b,this._t0=c}}},(qi.prototype=Object.create(pi.prototype)).point=function(a,b){pi.prototype.point.call(this,b,a)},ri.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,b,c,d,e,f){this._context.bezierCurveTo(b,a,d,c,f,e)}},si.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var a=this._x,b=this._y,c=a.length;if(c)if(this._line?this._context.lineTo(a[0],b[0]):this._context.moveTo(a[0],b[0]),2===c)this._context.lineTo(a[1],b[1]);else for(var d=ti(a),e=ti(b),f=0,g=1;c>g;++f,++g)this._context.bezierCurveTo(d[0][f],e[0][f],d[1][f],e[1][f],a[g],b[g]);(this._line||0!==this._line&&1===c)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(a,b){this._x.push(+a),this._y.push(+b)}},ui.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,b),this._context.lineTo(a,b);else{var c=this._x*(1-this._t)+a*this._t;this._context.lineTo(c,this._y),this._context.lineTo(c,b)}}this._x=a,this._y=b}};var ft=function(a,b){if((e=a.length)>1)for(var c,d,e,f=1,g=a[b[0]],h=g.length;e>f;++f)for(d=g,g=a[b[f]],c=0;h>c;++c)g[c][1]+=g[c][0]=isNaN(d[c][1])?d[c][0]:d[c][1]},gt=function(a){for(var b=a.length,c=new Array(b);--b>=0;)c[b]=b;return c},ht=function(a){var b=a.map(wi);return gt(a).sort(function(a,c){return b[a]-b[c]})},it=function(a){return function(){return a}};zi.prototype={constructor:zi,insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=Di(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)c===(d=c.U).L?(e=d.R)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(Bi(this,c),c=(a=c).U),c.C=!1,d.C=!0,Ci(this,d)):(e=d.L)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(Ci(this,c),c=(a=c).U),c.C=!1,d.C=!0,Bi(this,d)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?Di(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===e.L){if((b=e.R).C&&(b.C=!1,e.C=!0,Bi(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Ci(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,Bi(this,e),a=this._;break}}else if((b=e.L).C&&(b.C=!1,e.C=!0,Ci(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Bi(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,Ci(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}};var jt,kt,lt,mt,nt,ot=[],pt=[],qt=1e-6,rt=1e-12;aj.prototype={constructor:aj,polygons:function(){var a=this.edges;return this.cells.map(function(b){var c=b.halfedges.map(function(c){return Mi(b,a[c])});return c.data=b.site.data,c})},triangles:function(){var a=[],b=this.edges;return this.cells.forEach(function(c,d){if(f=(e=c.halfedges).length)for(var e,f,g,h=c.site,i=-1,j=b[e[f-1]],k=j.left===h?j.right:j.left;++i<f;)g=k,k=(j=b[e[i]]).left===h?j.right:j.left,g&&k&&d<g.index&&d<k.index&&$i(h,g,k)<0&&a.push([h.data,g.data,k.data])}),a},links:function(){return this.edges.filter(function(a){return a.right}).map(function(a){return{source:a.left.data,target:a.right.data}})},find:function(a,b,c){for(var d,e,f=this,g=f._found||0,h=f.cells.length;!(e=f.cells[g]);)if(++g>=h)return null;var i=a-e.site[0],j=b-e.site[1],k=i*i+j*j;do e=f.cells[d=g],g=null,e.halfedges.forEach(function(c){var d=f.edges[c],h=d.left;if(h!==e.site&&h||(h=d.right)){var i=a-h[0],j=b-h[1],l=i*i+j*j;k>l&&(k=l,g=h.index)}});while(null!==g);return f._found=d,null==c||c*c>=k?e.site:null}};var st=function(a){return function(){return a}};cj.prototype={constructor:cj,scale:function(a){return 1===a?this:new cj(this.k*a,this.x,this.y)},translate:function(a,b){return 0===a&0===b?this:new cj(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tt=new cj(1,0,0);dj.prototype=cj.prototype;var ut=function(){a.event.preventDefault(),a.event.stopImmediatePropagation()};a.version="4.11.0",a.bisect=nj,a.bisectRight=nj,a.bisectLeft=oj,a.ascending=kj,a.bisector=lj,a.cross=function(a,b,d){var e,f,g,h,i=a.length,j=b.length,k=new Array(i*j);for(null==d&&(d=c),e=g=0;i>e;++e)for(h=a[e],f=0;j>f;++f,++g)k[g]=d(h,b[f]);return k},a.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},a.deviation=rj,a.extent=sj,a.histogram=function(){function a(a){var f,g,h=a.length,i=new Array(h);for(f=0;h>f;++f)i[f]=b(a[f],f,a);var j=c(i),k=j[0],l=j[1],m=d(i,k,l);Array.isArray(m)||(m=e(k,l,m),m=yj(Math.ceil(k/m)*m,Math.floor(l/m)*m,m));for(var n=m.length;m[0]<=k;)m.shift(),--n;for(;m[n-1]>l;)m.pop(),--n;var o,p=new Array(n+1);for(f=0;n>=f;++f)(o=p[f]=[]).x0=f>0?m[f-1]:k,o.x1=n>f?m[f]:l;for(f=0;h>f;++f)k<=(g=i[f])&&l>=g&&p[nj(m,g,0,n)].push(a[f]);return p}var b=xj,c=sj,d=Dj;return a.value=function(c){return arguments.length?(b="function"==typeof c?c:wj(c),a):b},a.domain=function(b){return arguments.length?(c="function"==typeof b?b:wj([b[0],b[1]]),a):c},a.thresholds=function(b){return arguments.length?(d="function"==typeof b?b:wj(Array.isArray(b)?uj.call(b):b),a):d},a},a.thresholdFreedmanDiaconis=function(a,b,c){return a=vj.call(a,pj).sort(kj),Math.ceil((c-b)/(2*(Ej(a,.75)-Ej(a,.25))*Math.pow(a.length,-1/3)))},a.thresholdScott=function(a,b,c){return Math.ceil((c-b)/(3.5*rj(a)*Math.pow(a.length,-1/3)))},a.thresholdSturges=Dj,a.max=function(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&c>d&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&c>d&&(d=c);return d},a.mean=function(a,b){var c,d=a.length,e=d,f=-1,g=0;if(null==b)for(;++f<d;)isNaN(c=pj(a[f]))?--e:g+=c;else for(;++f<d;)isNaN(c=pj(b(a[f],f,a)))?--e:g+=c;return e?g/e:void 0},a.median=function(a,b){var c,d=a.length,e=-1,f=[];if(null==b)for(;++e<d;)isNaN(c=pj(a[e]))||f.push(c);else for(;++e<d;)isNaN(c=pj(b(a[e],e,a)))||f.push(c);return Ej(f.sort(kj),.5)},a.merge=Fj,a.min=Gj,a.pairs=function(a,b){null==b&&(b=c);for(var d=0,e=a.length-1,f=a[0],g=new Array(0>e?0:e);e>d;)g[d]=b(f,f=a[++d]);return g},a.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},a.quantile=Ej,a.range=yj,a.scan=function(a,b){if(c=a.length){var c,d,e=0,f=0,g=a[f];for(null==b&&(b=kj);++e<c;)(b(d=a[e],g)<0||0!==b(g,g))&&(g=d,f=e);return 0===b(g,g)?f:void 0}},a.shuffle=function(a,b,c){for(var d,e,f=(null==c?a.length:c)-(b=null==b?0:+b);f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},a.sum=function(a,b){var c,d=a.length,e=-1,f=0;if(null==b)for(;++e<d;)(c=+a[e])&&(f+=c);else for(;++e<d;)(c=+b(a[e],e,a))&&(f+=c);return f},a.ticks=Cj,a.tickIncrement=d,a.tickStep=e,a.transpose=Hj,a.variance=qj,a.zip=function(){return Hj(arguments)},a.axisTop=function(a){return l(Kj,a)},a.axisRight=function(a){return l(Lj,a)},a.axisBottom=function(a){return l(Mj,a)},a.axisLeft=function(a){return l(Nj,a)},a.brush=function(){return lc(Bm)},a.brushX=function(){return lc(zm)},a.brushY=function(){return lc(Am)},a.brushSelection=function(a){var b=a.__brush;return b?b.dim.output(b.selection):null},a.chord=function(){function a(a){var f,g,h,i,j,k,l=a.length,m=[],n=yj(l),o=[],p=[],q=p.groups=new Array(l),r=new Array(l*l);for(f=0,j=-1;++j<l;){for(g=0,k=-1;++k<l;)g+=a[j][k];m.push(g),o.push(yj(l)),f+=g}for(c&&n.sort(function(a,b){return c(m[a],m[b])}),d&&o.forEach(function(b,c){b.sort(function(b,e){return d(a[c][b],a[c][e])})}),i=(f=Mm(0,Lm-b*l)/f)?b:Lm/l,g=0,j=-1;++j<l;){for(h=g,k=-1;++k<l;){var s=n[j],t=o[s][k],u=a[s][t],v=g,w=g+=u*f;r[t*l+s]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}q[s]={index:s,startAngle:h,endAngle:g,value:m[s]},g+=i}for(j=-1;++j<l;)for(k=j-1;++k<l;){var x=r[k*l+j],y=r[j*l+k];(x.value||y.value)&&p.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}return e?p.sort(e):p}var b=0,c=null,d=null,e=null;return a.padAngle=function(c){return arguments.length?(b=Mm(0,c),a):b},a.sortGroups=function(b){return arguments.length?(c=b,a):c},a.sortSubgroups=function(b){return arguments.length?(d=b,a):d},a.sortChords=function(b){return arguments.length?(null==b?e=null:(e=mc(b))._=b,a):e&&e._},a},a.ribbon=function(){function a(){var a,h=Nm.call(arguments),i=b.apply(this,h),j=c.apply(this,h),k=+d.apply(this,(h[0]=i,h)),l=e.apply(this,h)-Km,m=f.apply(this,h)-Km,n=k*Hm(l),o=k*Im(l),p=+d.apply(this,(h[0]=j,h)),q=e.apply(this,h)-Km,r=f.apply(this,h)-Km;return g||(g=a=oc()),g.moveTo(n,o),g.arc(0,0,k,l,m),l===q&&m===r||(g.quadraticCurveTo(0,0,p*Hm(q),p*Im(q)),g.arc(0,0,p,q,r)),g.quadraticCurveTo(0,0,n,o),g.closePath(),a?(g=null,a+""||null):void 0}var b=pc,c=qc,d=rc,e=sc,f=tc,g=null;return a.radius=function(b){return arguments.length?(d="function"==typeof b?b:Om(+b),a):d},a.startAngle=function(b){return arguments.length?(e="function"==typeof b?b:Om(+b),a):e},a.endAngle=function(b){return arguments.length?(f="function"==typeof b?b:Om(+b),a):f},a.source=function(c){return arguments.length?(b=c,a):b},a.target=function(b){return arguments.length?(c=b,a):c},a.context=function(b){return arguments.length?(g=null==b?null:b,a):g},a},a.nest=function(){function a(b,e,g,h){if(e>=f.length)return null!=c&&b.sort(c),null!=d?d(b):b;for(var i,j,k,l=-1,m=b.length,n=f[e++],o=vc(),p=g();++l<m;)(k=o.get(i=n(j=b[l])+""))?k.push(j):o.set(i,[j]);return o.each(function(b,c){h(p,c,a(b,e,g,h))}),p}function b(a,c){if(++c>f.length)return a;var e,h=g[c-1];return null!=d&&c>=f.length?e=a.entries():(e=[],a.each(function(a,d){e.push({key:d,values:b(a,c)})})),null!=h?e.sort(function(a,b){return h(a.key,b.key)}):e}var c,d,e,f=[],g=[];return e={object:function(b){return a(b,0,wc,xc)},map:function(b){return a(b,0,yc,zc)},entries:function(c){return b(a(c,0,yc,zc),0)},key:function(a){return f.push(a),e},sortKeys:function(a){return g[f.length-1]=a,e},sortValues:function(a){return c=a,e},rollup:function(a){return d=a,e}}},a.set=Bc,a.map=vc,a.keys=function(a){var b=[];for(var c in a)b.push(c);return b},a.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},a.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},a.color=ya,a.rgb=Ca,a.hsl=Ga,a.lab=Ka,a.hcl=Ra,a.cubehelix=Ua,a.dispatch=m,a.drag=function(){function b(a){a.on("mousedown.drag",c).filter(r).on("touchstart.drag",f).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",h).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){if(!n&&o.apply(this,arguments)){var b=i("mouse",p.apply(this,arguments),ak,this,arguments);b&&(ik(a.event.view).on("mousemove.drag",d,!0).on("mouseup.drag",e,!0),lk(a.event.view),pa(),l=!1,j=a.event.clientX,k=a.event.clientY,b("start"))}}function d(){if(kk(),!l){var b=a.event.clientX-j,c=a.event.clientY-k;l=b*b+c*c>v}s.mouse("drag")}function e(){ik(a.event.view).on("mousemove.drag mouseup.drag",null),qa(a.event.view,l),kk(),s.mouse("end")}function f(){if(o.apply(this,arguments)){var b,c,d=a.event.changedTouches,e=p.apply(this,arguments),f=d.length;for(b=0;f>b;++b)(c=i(d[b].identifier,e,jk,this,arguments))&&(pa(),c("start"))}}function g(){var b,c,d=a.event.changedTouches,e=d.length;for(b=0;e>b;++b)(c=s[d[b].identifier])&&(kk(),c("drag"))}function h(){var b,c,d=a.event.changedTouches,e=d.length;for(n&&clearTimeout(n),n=setTimeout(function(){n=null},500),b=0;e>b;++b)(c=s[d[b].identifier])&&(pa(),c("end"))}function i(c,d,e,f,g){var h,i,j,k=e(d,c),l=t.copy();return A(new ra(b,"beforestart",h,c,u,k[0],k[1],0,0,l),function(){return null!=(a.event.subject=h=q.apply(f,g))&&(i=h.x-k[0]||0,j=h.y-k[1]||0,!0)})?function m(a){var n,o=k;switch(a){case"start":s[c]=m,n=u++;break;case"end":delete s[c],--u;case"drag":k=e(d,c),n=u}A(new ra(b,a,h,c,n,k[0]+i,k[1]+j,k[0]-o[0],k[1]-o[1],l),l.apply,l,[a,f,g])}:void 0}var j,k,l,n,o=sa,p=ta,q=ua,r=va,s={},t=m("start","drag","end"),u=0,v=0;return b.filter=function(a){return arguments.length?(o="function"==typeof a?a:mk(!!a),b):o},b.container=function(a){return arguments.length?(p="function"==typeof a?a:mk(a),b):p},b.subject=function(a){return arguments.length?(q="function"==typeof a?a:mk(a),b):q},b.touchable=function(a){return arguments.length?(r="function"==typeof a?a:mk(!!a),b):r},b.on=function(){var a=t.on.apply(t,arguments);return a===t?b:a},b.clickDistance=function(a){return arguments.length?(v=(a=+a)*a,b):Math.sqrt(v)},b},a.dragDisable=lk,a.dragEnable=qa,a.dsvFormat=Ym,a.csvParse=$m,a.csvParseRows=_m,a.csvFormat=an,a.csvFormatRows=bn,a.tsvParse=dn,a.tsvParseRows=en,a.tsvFormat=fn,a.tsvFormatRows=gn,a.easeLinear=function(a){return+a},a.easeQuad=$b,a.easeQuadIn=function(a){return a*a},a.easeQuadOut=function(a){return a*(2-a)},a.easeQuadInOut=$b,a.easeCubic=_b,a.easeCubicIn=function(a){return a*a*a},a.easeCubicOut=function(a){return--a*a*a+1},a.easeCubicInOut=_b,a.easePoly=Yl,a.easePolyIn=Wl,a.easePolyOut=Xl,a.easePolyInOut=Yl,a.easeSin=ac,a.easeSinIn=function(a){return 1-Math.cos(a*$l)},a.easeSinOut=function(a){return Math.sin(a*$l)},a.easeSinInOut=ac,a.easeExp=bc,a.easeExpIn=function(a){return Math.pow(2,10*a-10)},a.easeExpOut=function(a){return 1-Math.pow(2,-10*a)},a.easeExpInOut=bc,a.easeCircle=cc,a.easeCircleIn=function(a){return 1-Math.sqrt(1-a*a)},a.easeCircleOut=function(a){return Math.sqrt(1- --a*a)},a.easeCircleInOut=cc,a.easeBounce=dc,a.easeBounceIn=function(a){return 1-dc(1-a)},a.easeBounceOut=dc,a.easeBounceInOut=function(a){return((a*=2)<=1?1-dc(1-a):dc(a-1)+1)/2},a.easeBack=lm,a.easeBackIn=jm,a.easeBackOut=km,a.easeBackInOut=lm,a.easeElastic=om,a.easeElasticIn=nm,a.easeElasticOut=om,a.easeElasticInOut=pm,a.forceCenter=function(a,b){function c(){var c,e,f=d.length,g=0,h=0;for(c=0;f>c;++c)g+=(e=d[c]).x,h+=e.y;for(g=g/f-a,h=h/f-b,c=0;f>c;++c)(e=d[c]).x-=g,e.y-=h}var d;return null==a&&(a=0),null==b&&(b=0),c.initialize=function(a){d=a},c.x=function(b){return arguments.length?(a=+b,c):a},c.y=function(a){return arguments.length?(b=+a,c):b},c},a.forceCollide=function(a){function b(){for(var a,b,d,i,j,k,l,m=e.length,n=0;h>n;++n)for(b=Ic(e,Lc,Mc).visitAfter(c),a=0;m>a;++a)d=e[a],k=f[d.index],l=k*k,i=d.x+d.vx,j=d.y+d.vy,b.visit(function(a,b,c,e,f){var h=a.data,m=a.r,n=k+m;if(!h)return b>i+n||i-n>e||c>j+n||j-n>f;if(h.index>d.index){var o=i-h.x-h.vx,p=j-h.y-h.vy,q=o*o+p*p;n*n>q&&(0===o&&(o=jn(),q+=o*o),0===p&&(p=jn(),q+=p*p),q=(n-(q=Math.sqrt(q)))/q*g,d.vx+=(o*=q)*(n=(m*=m)/(l+m)),d.vy+=(p*=q)*n,h.vx-=o*(n=1-n),h.vy-=p*n)}})}function c(a){if(a.data)return a.r=f[a.data.index];for(var b=a.r=0;4>b;++b)a[b]&&a[b].r>a.r&&(a.r=a[b].r)}function d(){if(e){var b,c,d=e.length;for(f=new Array(d),b=0;d>b;++b)c=e[b],f[c.index]=+a(c,b,e)}}var e,f,g=1,h=1;return"function"!=typeof a&&(a=hn(null==a?1:+a)),b.initialize=function(a){e=a,d()},b.iterations=function(a){return arguments.length?(h=+a,b):h},b.strength=function(a){return arguments.length?(g=+a,b):g},b.radius=function(c){return arguments.length?(a="function"==typeof c?c:hn(+c),d(),b):a},b},a.forceLink=function(a){function b(b){for(var c=0,d=a.length;n>c;++c)for(var e,h,i,k,l,m,o,p=0;d>p;++p)h=(e=a[p]).source,k=(i=e.target).x+i.vx-h.x-h.vx||jn(),l=i.y+i.vy-h.y-h.vy||jn(),k*=m=((m=Math.sqrt(k*k+l*l))-g[p])/m*b*f[p],l*=m,i.vx-=k*(o=j[p]),i.vy-=l*o,h.vx+=k*(o=1-o),h.vy+=l*o}function c(){if(h){var b,c,l=h.length,m=a.length,n=vc(h,k);for(b=0,i=new Array(l);m>b;++b)(c=a[b]).index=b,"object"!=typeof c.source&&(c.source=Oc(n,c.source)),"object"!=typeof c.target&&(c.target=Oc(n,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(b=0,j=new Array(m);m>b;++b)c=a[b],j[b]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);f=new Array(m),d(),g=new Array(m),e()}}function d(){if(h)for(var b=0,c=a.length;c>b;++b)f[b]=+l(a[b],b,a)}function e(){if(h)for(var b=0,c=a.length;c>b;++b)g[b]=+m(a[b],b,a)}var f,g,h,i,j,k=Nc,l=function(a){return 1/Math.min(i[a.source.index],i[a.target.index])},m=hn(30),n=1;return null==a&&(a=[]),b.initialize=function(a){h=a,c()},b.links=function(d){return arguments.length?(a=d,c(),b):a},b.id=function(a){return arguments.length?(k=a,b):k},b.iterations=function(a){return arguments.length?(n=+a,b):n},b.strength=function(a){return arguments.length?(l="function"==typeof a?a:hn(+a),d(),b):l},b.distance=function(a){return arguments.length?(m="function"==typeof a?a:hn(+a),e(),b):m},b},a.forceManyBody=function(){function a(a){var b,h=e.length,i=Ic(e,Pc,Qc).visitAfter(c);for(g=a,b=0;h>b;++b)f=e[b],i.visit(d)}function b(){if(e){var a,b,c=e.length;for(h=new Array(c),a=0;c>a;++a)b=e[a],h[b.index]=+i(b,a,e)}}function c(a){var b,c,d,e,f,g=0,i=0;if(a.length){for(d=e=f=0;4>f;++f)(b=a[f])&&(c=Math.abs(b.value))&&(g+=b.value,i+=c,d+=c*b.x,e+=c*b.y);a.x=d/i,a.y=e/i}else{(b=a).x=b.data.x,b.y=b.data.y;do g+=h[b.data.index];while(b=b.next)}a.value=g}function d(a,b,c,d){if(!a.value)return!0;var e=a.x-f.x,i=a.y-f.y,m=d-b,n=e*e+i*i;if(n>m*m/l)return k>n&&(0===e&&(e=jn(),n+=e*e),0===i&&(i=jn(),n+=i*i),j>n&&(n=Math.sqrt(j*n)),f.vx+=e*a.value*g/n,f.vy+=i*a.value*g/n),!0;if(!(a.length||n>=k)){(a.data!==f||a.next)&&(0===e&&(e=jn(),n+=e*e),0===i&&(i=jn(),n+=i*i),j>n&&(n=Math.sqrt(j*n)));do a.data!==f&&(m=h[a.data.index]*g/n,f.vx+=e*m,f.vy+=i*m);while(a=a.next)}}var e,f,g,h,i=hn(-30),j=1,k=1/0,l=.81;return a.initialize=function(a){e=a,b()},a.strength=function(c){return arguments.length?(i="function"==typeof c?c:hn(+c),b(),a):i},a.distanceMin=function(b){return arguments.length?(j=b*b,a):Math.sqrt(j)},a.distanceMax=function(b){return arguments.length?(k=b*b,a):Math.sqrt(k)},a.theta=function(b){return arguments.length?(l=b*b,a):Math.sqrt(l)},a},a.forceRadial=function(a,b,c){function d(a){for(var d=0,e=f.length;e>d;++d){var i=f[d],j=i.x-b||1e-6,k=i.y-c||1e-6,l=Math.sqrt(j*j+k*k),m=(h[d]-l)*g[d]*a/l;i.vx+=j*m,i.vy+=k*m}}function e(){if(f){var b,c=f.length;for(g=new Array(c),h=new Array(c),b=0;c>b;++b)h[b]=+a(f[b],b,f),g[b]=isNaN(h[b])?0:+i(f[b],b,f)}}var f,g,h,i=hn(.1);return"function"!=typeof a&&(a=hn(+a)),null==b&&(b=0),null==c&&(c=0),d.initialize=function(a){f=a,e()},d.strength=function(a){return arguments.length?(i="function"==typeof a?a:hn(+a),e(),d):i},d.radius=function(b){return arguments.length?(a="function"==typeof b?b:hn(+b),e(),d):a},d.x=function(a){return arguments.length?(b=+a,d):b},d.y=function(a){return arguments.length?(c=+a,d):c},d},a.forceSimulation=function(a){function b(){c(),o.call("tick",f),h>g&&(n.stop(),o.call("end",f))}function c(){var b,c,d=a.length;for(g+=(j-g)*i,l.each(function(a){a(g)}),b=0;d>b;++b)null==(c=a[b]).fx?c.x+=c.vx*=k:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=k:(c.y=c.fy,c.vy=0)}function d(){for(var b,c=0,d=a.length;d>c;++c){if(b=a[c],b.index=c,isNaN(b.x)||isNaN(b.y)){var e=nn*Math.sqrt(c),f=c*on;b.x=e*Math.cos(f),b.y=e*Math.sin(f)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function e(b){return b.initialize&&b.initialize(a),b}var f,g=1,h=.001,i=1-Math.pow(h,1/300),j=0,k=.6,l=vc(),n=nb(b),o=m("tick","end");return null==a&&(a=[]),d(),f={tick:c,restart:function(){return n.restart(b),f},stop:function(){return n.stop(),f},nodes:function(b){return arguments.length?(a=b,d(),l.each(e),f):a},alpha:function(a){return arguments.length?(g=+a,f):g},alphaMin:function(a){return arguments.length?(h=+a,f):h},alphaDecay:function(a){return arguments.length?(i=+a,f):+i},alphaTarget:function(a){return arguments.length?(j=+a,f):j},velocityDecay:function(a){return arguments.length?(k=1-a,f):1-k},force:function(a,b){return arguments.length>1?(null==b?l.remove(a):l.set(a,e(b)),f):l.get(a)},find:function(b,c,d){var e,f,g,h,i,j=0,k=a.length;for(null==d?d=1/0:d*=d,j=0;k>j;++j)(g=(e=b-(h=a[j]).x)*e+(f=c-h.y)*f)<d&&(i=h,d=g);return i},on:function(a,b){return arguments.length>1?(o.on(a,b),f):o.on(a)}}},a.forceX=function(a){function b(a){for(var b,c=0,g=d.length;g>c;++c)(b=d[c]).vx+=(f[c]-b.x)*e[c]*a}function c(){if(d){var b,c=d.length;for(e=new Array(c),f=new Array(c),b=0;c>b;++b)e[b]=isNaN(f[b]=+a(d[b],b,d))?0:+g(d[b],b,d)}}var d,e,f,g=hn(.1);return"function"!=typeof a&&(a=hn(null==a?0:+a)),b.initialize=function(a){d=a,c()},b.strength=function(a){return arguments.length?(g="function"==typeof a?a:hn(+a),c(),b):g},b.x=function(d){return arguments.length?(a="function"==typeof d?d:hn(+d),c(),b):a},b},a.forceY=function(a){function b(a){for(var b,c=0,g=d.length;g>c;++c)(b=d[c]).vy+=(f[c]-b.y)*e[c]*a}function c(){if(d){var b,c=d.length;for(e=new Array(c),f=new Array(c),b=0;c>b;++b)e[b]=isNaN(f[b]=+a(d[b],b,d))?0:+g(d[b],b,d)}}var d,e,f,g=hn(.1);return"function"!=typeof a&&(a=hn(null==a?0:+a)),b.initialize=function(a){d=a,c()},b.strength=function(a){return arguments.length?(g="function"==typeof a?a:hn(+a),c(),b):g},b.y=function(d){return arguments.length?(a="function"==typeof d?d:hn(+d),c(),b):a},b},a.formatDefaultLocale=Tc,a.formatLocale=zn,a.formatSpecifier=Rc,a.precisionFixed=An,a.precisionPrefix=Bn,a.precisionRound=Cn,a.geoArea=function(a){return Go.reset(),Eo(a,Ho),2*Go},a.geoBounds=function(a){var b,c,d,e,f,g,h;if(Mn=Ln=-(Jn=Kn=1/0),Rn=[],Eo(a,Jo),c=Rn.length){for(Rn.sort(ud),b=1,f=[d=Rn[0]];c>b;++b)vd(d,(e=Rn[b])[0])||vd(d,e[1])?(td(d[0],e[1])>td(d[0],d[1])&&(d[1]=e[1]),td(e[0],d[1])>td(d[0],d[1])&&(d[0]=e[0])):f.push(d=e);for(g=-1/0,b=0,d=f[c=f.length-1];c>=b;d=e,++b)e=f[b],(h=td(d[1],e[0]))>g&&(g=h,Jn=e[0],Ln=d[1])}return Rn=Sn=null,Jn===1/0||Kn===1/0?[[NaN,NaN],[NaN,NaN]]:[[Jn,Kn],[Ln,Mn]]},a.geoCentroid=function(a){Tn=Un=Vn=Wn=Xn=Yn=Zn=$n=_n=ao=bo=0,Eo(a,Ko);var b=_n,c=ao,d=bo,e=b*b+c*c+d*d;return 1e-12>e&&(b=Yn,c=Zn,d=$n,jo>Un&&(b=Vn,c=Wn,d=Xn),(e=b*b+c*c+d*d)<1e-12)?[NaN,NaN]:[so(c,b)*oo,Xc(d/Ao(e))*oo]},a.geoCircle=function(){function a(){var a=d.apply(this,arguments),h=e.apply(this,arguments)*po,i=f.apply(this,arguments)*po;return b=[],c=Hd(-a[0]*po,-a[1]*po,0).invert,Ld(g,h,i,1),a={type:"Polygon",coordinates:[b]},b=c=null,a}var b,c,d=Lo([0,0]),e=Lo(90),f=Lo(6),g={point:function(a,d){b.push(a=c(a,d)),a[0]*=oo,a[1]*=oo}};return a.center=function(b){return arguments.length?(d="function"==typeof b?b:Lo([+b[0],+b[1]]),a):d},a.radius=function(b){return arguments.length?(e="function"==typeof b?b:Lo(+b),a):e},a.precision=function(b){return arguments.length?(f="function"==typeof b?b:Lo(+b),a):f},a},a.geoClipAntimeridian=dp,a.geoClipCircle=ep,a.geoClipExtent=function(){var a,b,c,d=0,e=0,f=960,g=500;return c={stream:function(c){return a&&b===c?a:a=Sd(d,e,f,g)(b=c)},extent:function(h){return arguments.length?(d=+h[0][0],e=+h[0][1],f=+h[1][0],g=+h[1][1],a=b=null,c):[[d,e],[f,g]]}}},a.geoClipRectangle=Sd,a.geoContains=function(a,b){return(a&&op.hasOwnProperty(a.type)?op[a.type]:Wd)(a,b)},a.geoDistance=np,a.geoGraticule=ce,a.geoGraticule10=function(){return ce()()},a.geoInterpolate=function(a,b){var c=a[0]*po,d=a[1]*po,e=b[0]*po,f=b[1]*po,g=to(d),h=yo(d),i=to(f),j=yo(f),k=g*to(c),l=g*yo(c),m=i*to(e),n=i*yo(e),o=2*Xc(Ao(Yc(f-d)+g*i*Yc(e-c))),p=yo(o),q=o?function(a){var b=yo(a*=o)/p,c=yo(o-a)/p,d=c*k+b*m,e=c*l+b*n,f=c*h+b*j;return[so(e,d)*oo,so(f,Ao(d*d+e*e))*oo]}:function(){return[c*oo,d*oo]};return q.distance=o,q},a.geoLength=kp,a.geoPath=function(a,b){function c(a){return a&&("function"==typeof f&&e.pointRadius(+f.apply(this,arguments)),Eo(a,d(e))),e.result()}var d,e,f=4.5;return c.area=function(a){return Eo(a,d(tp)),tp.result()},c.measure=function(a){return Eo(a,d(Pp)),Pp.result()},c.bounds=function(a){return Eo(a,d(yp)),yp.result()},c.centroid=function(a){
return Eo(a,d(Ip)),Ip.result()},c.projection=function(b){return arguments.length?(d=null==b?(a=null,qp):(a=b).stream,c):a},c.context=function(a){return arguments.length?(e=null==a?(b=null,new te):new qe(b=a),"function"!=typeof f&&e.pointRadius(f),c):b},c.pointRadius=function(a){return arguments.length?(f="function"==typeof a?a:(e.pointRadius(+a),+a),c):f},c.projection(a).context(b)},a.geoAlbers=Vp,a.geoAlbersUsa=function(){function a(a){var b=a[0],c=a[1];return h=null,e.point(b,c),h||(f.point(b,c),h)||(g.point(b,c),h)}function b(){return c=d=null,a}var c,d,e,f,g,h,i=Vp(),j=Up().rotate([154,0]).center([-2,58.5]).parallels([55,65]),k=Up().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(a,b){h=[a,b]}};return a.invert=function(a){var b=i.scale(),c=i.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?j:e>=.166&&.234>e&&d>=-.214&&-.115>d?k:i).invert(a)},a.stream=function(a){return c&&d===a?c:c=He([i.stream(d=a),j.stream(a),k.stream(a)])},a.precision=function(a){return arguments.length?(i.precision(a),j.precision(a),k.precision(a),b()):i.precision()},a.scale=function(b){return arguments.length?(i.scale(b),j.scale(.35*b),k.scale(b),a.translate(i.translate())):i.scale()},a.translate=function(a){if(!arguments.length)return i.translate();var c=i.scale(),d=+a[0],h=+a[1];return e=i.translate(a).clipExtent([[d-.455*c,h-.238*c],[d+.455*c,h+.238*c]]).stream(l),f=j.translate([d-.307*c,h+.201*c]).clipExtent([[d-.425*c+jo,h+.12*c+jo],[d-.214*c-jo,h+.234*c-jo]]).stream(l),g=k.translate([d-.205*c,h+.212*c]).clipExtent([[d-.214*c+jo,h+.166*c+jo],[d-.115*c-jo,h+.234*c-jo]]).stream(l),b()},a.fitExtent=function(b,c){return xe(a,b,c)},a.fitSize=function(b,c){return ye(a,b,c)},a.scale(1070)},a.geoAzimuthalEqualArea=function(){return Ce(Wp).scale(124.75).clipAngle(179.999)},a.geoAzimuthalEqualAreaRaw=Wp,a.geoAzimuthalEquidistant=function(){return Ce(Xp).scale(79.4188).clipAngle(179.999)},a.geoAzimuthalEquidistantRaw=Xp,a.geoConicConformal=function(){return Ee(Ne).scale(109.5).parallels([30,30])},a.geoConicConformalRaw=Ne,a.geoConicEqualArea=Up,a.geoConicEqualAreaRaw=Ge,a.geoConicEquidistant=function(){return Ee(Pe).scale(131.154).center([0,13.9389])},a.geoConicEquidistantRaw=Pe,a.geoEquirectangular=function(){return Ce(Oe).scale(152.63)},a.geoEquirectangularRaw=Oe,a.geoGnomonic=function(){return Ce(Qe).scale(144.049).clipAngle(60)},a.geoGnomonicRaw=Qe,a.geoIdentity=function(){function a(){return e=f=null,g}var b,c,d,e,f,g,h=1,i=0,j=0,k=1,l=1,m=qp,n=null,o=qp;return g={stream:function(a){return e&&f===a?e:e=m(o(f=a))},postclip:function(e){return arguments.length?(o=e,n=b=c=d=null,a()):o},clipExtent:function(e){return arguments.length?(o=null==e?(n=b=c=d=null,qp):Sd(n=+e[0][0],b=+e[0][1],c=+e[1][0],d=+e[1][1]),a()):null==n?null:[[n,b],[c,d]]},scale:function(b){return arguments.length?(m=Re((h=+b)*k,h*l,i,j),a()):h},translate:function(b){return arguments.length?(m=Re(h*k,h*l,i=+b[0],j=+b[1]),a()):[i,j]},reflectX:function(b){return arguments.length?(m=Re(h*(k=b?-1:1),h*l,i,j),a()):0>k},reflectY:function(b){return arguments.length?(m=Re(h*k,h*(l=b?-1:1),i,j),a()):0>l},fitExtent:function(a,b){return xe(g,a,b)},fitSize:function(a,b){return ye(g,a,b)}}},a.geoProjection=Ce,a.geoProjectionMutator=De,a.geoMercator=function(){return Le(Ke).scale(961/no)},a.geoMercatorRaw=Ke,a.geoNaturalEarth1=function(){return Ce(Se).scale(175.295)},a.geoNaturalEarth1Raw=Se,a.geoOrthographic=function(){return Ce(Te).scale(249.5).clipAngle(90+jo)},a.geoOrthographicRaw=Te,a.geoStereographic=function(){return Ce(Ue).scale(250).clipAngle(142)},a.geoStereographicRaw=Ue,a.geoTransverseMercator=function(){var a=Le(Ve),b=a.center,c=a.rotate;return a.center=function(a){return arguments.length?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return arguments.length?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90]).scale(159.155)},a.geoTransverseMercatorRaw=Ve,a.geoRotation=Yo,a.geoStream=Eo,a.geoTransform=function(a){return{stream:ve(a)}},a.cluster=function(){function a(a){var f,g=0;a.eachAfter(function(a){var c=a.children;c?(a.x=Xe(c),a.y=Ze(c)):(a.x=f?g+=b(a,f):0,a.y=0,f=a)});var h=_e(a),i=af(a),j=h.x-b(h,i)/2,k=i.x+b(i,h)/2;return a.eachAfter(e?function(b){b.x=(b.x-a.x)*c,b.y=(a.y-b.y)*d}:function(b){b.x=(b.x-j)/(k-j)*c,b.y=(1-(a.y?b.y/a.y:1))*d})}var b=We,c=1,d=1,e=!1;return a.separation=function(c){return arguments.length?(b=c,a):b},a.size=function(b){return arguments.length?(e=!1,c=+b[0],d=+b[1],a):e?null:[c,d]},a.nodeSize=function(b){return arguments.length?(e=!0,c=+b[0],d=+b[1],a):e?[c,d]:null},a},a.hierarchy=df,a.pack=function(){function a(a){return a.x=c/2,a.y=d/2,b?a.eachBefore(Bf(b)).eachAfter(Cf(e,.5)).eachBefore(Df(1)):a.eachBefore(Bf(Af)).eachAfter(Cf(zf,1)).eachAfter(Cf(e,a.r/Math.min(c,d))).eachBefore(Df(Math.min(c,d)/(2*a.r))),a}var b=null,c=1,d=1,e=zf;return a.radius=function(c){return arguments.length?(b=xf(c),a):b},a.size=function(b){return arguments.length?(c=+b[0],d=+b[1],a):[c,d]},a.padding=function(b){return arguments.length?(e="function"==typeof b?b:$p(+b),a):e},a},a.packSiblings=function(a){return wf(a),a},a.packEnclose=Zp,a.partition=function(){function a(a){var g=a.height+1;return a.x0=a.y0=e,a.x1=c,a.y1=d/g,a.eachBefore(b(d,g)),f&&a.eachBefore(_p),a}function b(a,b){return function(c){c.children&&aq(c,c.x0,a*(c.depth+1)/b,c.x1,a*(c.depth+2)/b);var d=c.x0,f=c.y0,g=c.x1-e,h=c.y1-e;d>g&&(d=g=(d+g)/2),f>h&&(f=h=(f+h)/2),c.x0=d,c.y0=f,c.x1=g,c.y1=h}}var c=1,d=1,e=0,f=!1;return a.round=function(b){return arguments.length?(f=!!b,a):f},a.size=function(b){return arguments.length?(c=+b[0],d=+b[1],a):[c,d]},a.padding=function(b){return arguments.length?(e=+b,a):e},a},a.stratify=function(){function a(a){var d,e,f,g,h,i,j,k=a.length,l=new Array(k),m={};for(e=0;k>e;++e)d=a[e],h=l[e]=new hf(d),null!=(i=b(d,e,a))&&(i+="")&&(m[j=bq+(h.id=i)]=j in m?dq:h);for(e=0;k>e;++e)if(h=l[e],null!=(i=c(a[e],e,a))&&(i+="")){if(!(g=m[bq+i]))throw new Error("missing: "+i);if(g===dq)throw new Error("ambiguous: "+i);g.children?g.children.push(h):g.children=[h],h.parent=g}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(f.parent=cq,f.eachBefore(function(a){a.depth=a.parent.depth+1,--k}).eachBefore(gf),f.parent=null,k>0)throw new Error("cycle");return f}var b=Ef,c=Ff;return a.id=function(c){return arguments.length?(b=yf(c),a):b},a.parentId=function(b){return arguments.length?(c=yf(b),a):c},a},a.tree=function(){function a(a){var d=Nf(a);if(d.eachAfter(b),d.parent.m=-d.z,d.eachBefore(c),i)a.eachBefore(e);else{var j=a,k=a,l=a;a.eachBefore(function(a){a.x<j.x&&(j=a),a.x>k.x&&(k=a),a.depth>l.depth&&(l=a)});var m=j===k?1:f(j,k)/2,n=m-j.x,o=g/(k.x+m+n),p=h/(l.depth||1);a.eachBefore(function(a){a.x=(a.x+n)*o,a.y=a.depth*p})}return a}function b(a){var b=a.children,c=a.parent.children,e=a.i?c[a.i-1]:null;if(b){Kf(a);var g=(b[0].z+b[b.length-1].z)/2;e?(a.z=e.z+f(a._,e._),a.m=a.z-g):a.z=g}else e&&(a.z=e.z+f(a._,e._));a.parent.A=d(a,e,a.parent.A||c[0])}function c(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function d(a,b,c){if(b){for(var d,e=a,g=a,h=b,i=e.parent.children[0],j=e.m,k=g.m,l=h.m,m=i.m;h=If(h),e=Hf(e),h&&e;)i=Hf(i),(g=If(g)).a=a,(d=h.z+l-e.z-j+f(h._,e._))>0&&(Jf(Lf(h,a,c),a,d),j+=d,k+=d),l+=h.m,j+=e.m,m+=i.m,k+=g.m;h&&!If(g)&&(g.t=h,g.m+=l-k),e&&!Hf(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function e(a){a.x*=g,a.y=a.depth*h}var f=Gf,g=1,h=1,i=null;return a.separation=function(b){return arguments.length?(f=b,a):f},a.size=function(b){return arguments.length?(i=!1,g=+b[0],h=+b[1],a):i?null:[g,h]},a.nodeSize=function(b){return arguments.length?(i=!0,g=+b[0],h=+b[1],a):i?[g,h]:null},a},a.treemap=function(){function a(a){return a.x0=a.y0=0,a.x1=e,a.y1=f,a.eachBefore(b),g=[0],d&&a.eachBefore(_p),a}function b(a){var b=g[a.depth],d=a.x0+b,e=a.y0+b,f=a.x1-b,m=a.y1-b;d>f&&(d=f=(d+f)/2),e>m&&(e=m=(e+m)/2),a.x0=d,a.y0=e,a.x1=f,a.y1=m,a.children&&(b=g[a.depth+1]=h(a)/2,d+=l(a)-b,e+=i(a)-b,f-=j(a)-b,m-=k(a)-b,d>f&&(d=f=(d+f)/2),e>m&&(e=m=(e+m)/2),c(a,d,e,f,m))}var c=gq,d=!1,e=1,f=1,g=[0],h=zf,i=zf,j=zf,k=zf,l=zf;return a.round=function(b){return arguments.length?(d=!!b,a):d},a.size=function(b){return arguments.length?(e=+b[0],f=+b[1],a):[e,f]},a.tile=function(b){return arguments.length?(c=yf(b),a):c},a.padding=function(b){return arguments.length?a.paddingInner(b).paddingOuter(b):a.paddingInner()},a.paddingInner=function(b){return arguments.length?(h="function"==typeof b?b:$p(+b),a):h},a.paddingOuter=function(b){return arguments.length?a.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):a.paddingTop()},a.paddingTop=function(b){return arguments.length?(i="function"==typeof b?b:$p(+b),a):i},a.paddingRight=function(b){return arguments.length?(j="function"==typeof b?b:$p(+b),a):j},a.paddingBottom=function(b){return arguments.length?(k="function"==typeof b?b:$p(+b),a):k},a.paddingLeft=function(b){return arguments.length?(l="function"==typeof b?b:$p(+b),a):l},a},a.treemapBinary=function(a,b,c,d,e){function f(a,b,c,d,e,g,h){if(a>=b-1){var j=i[a];return j.x0=d,j.y0=e,j.x1=g,void(j.y1=h)}for(var l=k[a],m=c/2+l,n=a+1,o=b-1;o>n;){var p=n+o>>>1;k[p]<m?n=p+1:o=p}m-k[n-1]<k[n]-m&&n>a+1&&--n;var q=k[n]-l,r=c-q;if(g-d>h-e){var s=(d*r+g*q)/c;f(a,n,q,d,e,s,h),f(n,b,r,s,e,g,h)}else{var t=(e*r+h*q)/c;f(a,n,q,d,e,g,t),f(n,b,r,d,t,g,h)}}var g,h,i=a.children,j=i.length,k=new Array(j+1);for(k[0]=h=g=0;j>g;++g)k[g+1]=h+=i[g].value;f(0,j,a.value,b,c,d,e)},a.treemapDice=aq,a.treemapSlice=eq,a.treemapSliceDice=function(a,b,c,d,e){(1&a.depth?eq:aq)(a,b,c,d,e)},a.treemapSquarify=gq,a.treemapResquarify=hq,a.interpolate=il,a.interpolateArray=bl,a.interpolateBasis=Xk,a.interpolateBasisClosed=Yk,a.interpolateDate=cl,a.interpolateNumber=dl,a.interpolateObject=el,a.interpolateRound=jl,a.interpolateString=hl,a.interpolateTransformCss=nl,a.interpolateTransformSvg=ol,a.interpolateZoom=ql,a.interpolateRgb=$k,a.interpolateRgbBasis=_k,a.interpolateRgbBasisClosed=al,a.interpolateHsl=rl,a.interpolateHslLong=sl,a.interpolateLab=function(a,b){var c=_a((a=Ka(a)).l,(b=Ka(b)).l),d=_a(a.a,b.a),e=_a(a.b,b.b),f=_a(a.opacity,b.opacity);return function(b){return a.l=c(b),a.a=d(b),a.b=e(b),a.opacity=f(b),a+""}},a.interpolateHcl=tl,a.interpolateHclLong=ul,a.interpolateCubehelix=vl,a.interpolateCubehelixLong=wl,a.quantize=function(a,b){for(var c=new Array(b),d=0;b>d;++d)c[d]=a(d/(b-1));return c},a.path=oc,a.polygonArea=function(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[1]*e[0]-b[0]*e[1];return f/2},a.polygonCentroid=function(a){for(var b,c,d=-1,e=a.length,f=0,g=0,h=a[e-1],i=0;++d<e;)b=h,h=a[d],i+=c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return i*=3,[f/i,g/i]},a.polygonHull=function(a){if((c=a.length)<3)return null;var b,c,d=new Array(c),e=new Array(c);for(b=0;c>b;++b)d[b]=[+a[b][0],+a[b][1],b];for(d.sort(Pf),b=0;c>b;++b)e[b]=[d[b][0],-d[b][1]];var f=Qf(d),g=Qf(e),h=g[0]===f[0],i=g[g.length-1]===f[f.length-1],j=[];for(b=f.length-1;b>=0;--b)j.push(a[d[f[b]][2]]);for(b=+h;b<g.length-i;++b)j.push(a[d[g[b]][2]]);return j},a.polygonContains=function(a,b){for(var c,d,e=a.length,f=a[e-1],g=b[0],h=b[1],i=f[0],j=f[1],k=!1,l=0;e>l;++l)c=(f=a[l])[0],(d=f[1])>h!=j>h&&(i-c)*(h-d)/(j-d)+c>g&&(k=!k),i=c,j=d;return k},a.polygonLength=function(a){for(var b,c,d=-1,e=a.length,f=a[e-1],g=f[0],h=f[1],i=0;++d<e;)b=g,c=h,b-=g=(f=a[d])[0],c-=h=f[1],i+=Math.sqrt(b*b+c*c);return i},a.quadtree=Ic,a.queue=Xf,a.randomUniform=mq,a.randomNormal=nq,a.randomLogNormal=oq,a.randomBates=qq,a.randomIrwinHall=pq,a.randomExponential=rq,a.request=sq,a.html=uq,a.json=vq,a.text=wq,a.xml=xq,a.csv=zq,a.tsv=Aq,a.scaleBand=ag,a.scalePoint=function(){return bg(ag().paddingInner(1))},a.scaleIdentity=lg,a.scaleLinear=kg,a.scaleLog=sg,a.scaleOrdinal=_f,a.scaleImplicit=Eq,a.scalePow=ug,a.scaleSqrt=function(){return ug().exponent(.5)},a.scaleQuantile=vg,a.scaleQuantize=wg,a.scaleThreshold=xg,a.scaleTime=function(){return Bh(mr,kr,Yq,Wq,Uq,Sq,Qq,Mq,a.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},a.scaleUtc=function(){return Bh(Kr,Ir,ur,sr,qr,or,Qq,Mq,a.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},a.schemeCategory10=_r,a.schemeCategory20b=as,a.schemeCategory20c=bs,a.schemeCategory20=cs,a.interpolateCubehelixDefault=ds,a.interpolateRainbow=function(a){(0>a||a>1)&&(a-=Math.floor(a));var b=Math.abs(a-.5);return gs.h=360*a-100,gs.s=1.5-1.5*b,gs.l=.8-.9*b,gs+""},a.interpolateWarm=es,a.interpolateCool=fs,a.interpolateViridis=hs,a.interpolateMagma=is,a.interpolateInferno=js,a.interpolatePlasma=ks,a.scaleSequential=Dh,a.creator=Tj,a.local=t,a.matcher=Yj,a.mouse=ak,a.namespace=Sj,a.namespaces=Rj,a.select=ik,a.selectAll=function(a){return"string"==typeof a?new na([document.querySelectorAll(a)],[document.documentElement]):new na([null==a?[]:a],hk)},a.selection=oa,a.selector=bk,a.selectorAll=ck,a.style=Q,a.touch=jk,a.touches=function(a,b){null==b&&(b=$j().touches);for(var c=0,d=b?b.length:0,e=new Array(d);d>c;++c)e[c]=_j(a,b[c]);return e},a.window=gk,a.customEvent=A,a.arc=function(){function a(){var a,j,k=+b.apply(this,arguments),l=+c.apply(this,arguments),m=f.apply(this,arguments)-vs,n=g.apply(this,arguments)-vs,o=ms(n-m),p=n>m;if(i||(i=a=oc()),k>l&&(j=l,l=k,k=j),l>ts)if(o>ws-ts)i.moveTo(l*os(m),l*rs(m)),i.arc(0,0,l,m,n,!p),k>ts&&(i.moveTo(k*os(n),k*rs(n)),i.arc(0,0,k,n,m,p));else{var q,r,s=m,t=n,u=m,v=n,w=o,x=o,y=h.apply(this,arguments)/2,z=y>ts&&(e?+e.apply(this,arguments):ss(k*k+l*l)),A=qs(ms(l-k)/2,+d.apply(this,arguments)),B=A,C=A;if(z>ts){var D=Fh(z/k*rs(y)),E=Fh(z/l*rs(y));(w-=2*D)>ts?(D*=p?1:-1,u+=D,v-=D):(w=0,u=v=(m+n)/2),(x-=2*E)>ts?(E*=p?1:-1,s+=E,t-=E):(x=0,s=t=(m+n)/2)}var F=l*os(s),G=l*rs(s),H=k*os(v),I=k*rs(v);if(A>ts){var J=l*os(t),K=l*rs(t),L=k*os(u),M=k*rs(u);if(us>o){var N=w>ts?Lh(F,G,L,M,J,K,H,I):[H,I],O=F-N[0],P=G-N[1],Q=J-N[0],R=K-N[1],S=1/rs(Eh((O*Q+P*R)/(ss(O*O+P*P)*ss(Q*Q+R*R)))/2),T=ss(N[0]*N[0]+N[1]*N[1]);B=qs(A,(k-T)/(S-1)),C=qs(A,(l-T)/(S+1))}}x>ts?C>ts?(q=Mh(L,M,F,G,l,C,p),r=Mh(J,K,H,I,l,C,p),i.moveTo(q.cx+q.x01,q.cy+q.y01),A>C?i.arc(q.cx,q.cy,C,ns(q.y01,q.x01),ns(r.y01,r.x01),!p):(i.arc(q.cx,q.cy,C,ns(q.y01,q.x01),ns(q.y11,q.x11),!p),i.arc(0,0,l,ns(q.cy+q.y11,q.cx+q.x11),ns(r.cy+r.y11,r.cx+r.x11),!p),i.arc(r.cx,r.cy,C,ns(r.y11,r.x11),ns(r.y01,r.x01),!p))):(i.moveTo(F,G),i.arc(0,0,l,s,t,!p)):i.moveTo(F,G),k>ts&&w>ts?B>ts?(q=Mh(H,I,J,K,k,-B,p),r=Mh(F,G,L,M,k,-B,p),i.lineTo(q.cx+q.x01,q.cy+q.y01),A>B?i.arc(q.cx,q.cy,B,ns(q.y01,q.x01),ns(r.y01,r.x01),!p):(i.arc(q.cx,q.cy,B,ns(q.y01,q.x01),ns(q.y11,q.x11),!p),i.arc(0,0,k,ns(q.cy+q.y11,q.cx+q.x11),ns(r.cy+r.y11,r.cx+r.x11),p),i.arc(r.cx,r.cy,B,ns(r.y11,r.x11),ns(r.y01,r.x01),!p))):i.arc(0,0,k,v,u,p):i.lineTo(H,I)}else i.moveTo(0,0);return i.closePath(),a?(i=null,a+""||null):void 0}var b=Gh,c=Hh,d=ls(0),e=null,f=Ih,g=Jh,h=Kh,i=null;return a.centroid=function(){var a=(+b.apply(this,arguments)+ +c.apply(this,arguments))/2,d=(+f.apply(this,arguments)+ +g.apply(this,arguments))/2-us/2;return[os(d)*a,rs(d)*a]},a.innerRadius=function(c){return arguments.length?(b="function"==typeof c?c:ls(+c),a):b},a.outerRadius=function(b){return arguments.length?(c="function"==typeof b?b:ls(+b),a):c},a.cornerRadius=function(b){return arguments.length?(d="function"==typeof b?b:ls(+b),a):d},a.padRadius=function(b){return arguments.length?(e=null==b?null:"function"==typeof b?b:ls(+b),a):e},a.startAngle=function(b){return arguments.length?(f="function"==typeof b?b:ls(+b),a):f},a.endAngle=function(b){return arguments.length?(g="function"==typeof b?b:ls(+b),a):g},a.padAngle=function(b){return arguments.length?(h="function"==typeof b?b:ls(+b),a):h},a.context=function(b){return arguments.length?(i=null==b?null:b,a):i},a},a.area=zs,a.line=ys,a.pie=function(){function a(a){var h,i,j,k,l,m=a.length,n=0,o=new Array(m),p=new Array(m),q=+e.apply(this,arguments),r=Math.min(ws,Math.max(-ws,f.apply(this,arguments)-q)),s=Math.min(Math.abs(r)/m,g.apply(this,arguments)),t=s*(0>r?-1:1);for(h=0;m>h;++h)(l=p[o[h]=h]=+b(a[h],h,a))>0&&(n+=l);for(null!=c?o.sort(function(a,b){return c(p[a],p[b])}):null!=d&&o.sort(function(b,c){return d(a[b],a[c])}),h=0,j=n?(r-m*t)/n:0;m>h;++h,q=k)i=o[h],k=q+((l=p[i])>0?l*j:0)+t,p[i]={data:a[i],index:h,value:l,startAngle:q,endAngle:k,padAngle:s};return p}var b=Bs,c=As,d=null,e=ls(0),f=ls(ws),g=ls(0);return a.value=function(c){return arguments.length?(b="function"==typeof c?c:ls(+c),a):b},a.sortValues=function(b){return arguments.length?(c=b,d=null,a):c},a.sort=function(b){return arguments.length?(d=b,c=null,a):d},a.startAngle=function(b){return arguments.length?(e="function"==typeof b?b:ls(+b),a):e},a.endAngle=function(b){return arguments.length?(f="function"==typeof b?b:ls(+b),a):f},a.padAngle=function(b){return arguments.length?(g="function"==typeof b?b:ls(+b),a):g},a},a.areaRadial=Es,a.radialArea=Es,a.lineRadial=Ds,a.radialLine=Ds,a.pointRadial=Fs,a.linkHorizontal=function(){return Vh(Wh)},a.linkVertical=function(){return Vh(Xh)},a.linkRadial=function(){var a=Vh(Yh);return a.angle=a.x,delete a.x,a.radius=a.y,delete a.y,a},a.symbol=function(){function a(){var a;return d||(d=a=oc()),b.apply(this,arguments).draw(d,+c.apply(this,arguments)),a?(d=null,a+""||null):void 0}var b=ls(Hs),c=ls(64),d=null;return a.type=function(c){return arguments.length?(b="function"==typeof c?c:ls(c),a):b},a.size=function(b){return arguments.length?(c="function"==typeof b?b:ls(+b),a):c},a.context=function(b){return arguments.length?(d=null==b?null:b,a):d},a},a.symbols=Ys,a.symbolCircle=Hs,a.symbolCross=Is,a.symbolDiamond=Ls,a.symbolSquare=Qs,a.symbolStar=Ps,a.symbolTriangle=Ss,a.symbolWye=Xs,a.curveBasisClosed=function(a){return new _h(a)},a.curveBasisOpen=function(a){return new ai(a)},a.curveBasis=function(a){return new $h(a)},a.curveBundle=$s,a.curveCardinalClosed=at,a.curveCardinalOpen=bt,a.curveCardinal=_s,a.curveCatmullRomClosed=dt,a.curveCatmullRomOpen=et,a.curveCatmullRom=ct,a.curveLinearClosed=function(a){return new ki(a)},a.curveLinear=xs,a.curveMonotoneX=function(a){return new pi(a)},a.curveMonotoneY=function(a){return new qi(a)},a.curveNatural=function(a){return new si(a)},a.curveStep=function(a){return new ui(a,.5)},a.curveStepAfter=function(a){return new ui(a,1)},a.curveStepBefore=function(a){return new ui(a,0)},a.stack=function(){function a(a){var f,g,h=b.apply(this,arguments),i=a.length,j=h.length,k=new Array(j);for(f=0;j>f;++f){for(var l,m=h[f],n=k[f]=new Array(i),o=0;i>o;++o)n[o]=l=[0,+e(a[o],m,o,a)],l.data=a[o];n.key=m}for(f=0,g=c(k);j>f;++f)k[g[f]].index=f;return d(k,g),k}var b=ls([]),c=gt,d=ft,e=vi;return a.keys=function(c){return arguments.length?(b="function"==typeof c?c:ls(Gs.call(c)),a):b},a.value=function(b){return arguments.length?(e="function"==typeof b?b:ls(+b),a):e},a.order=function(b){return arguments.length?(c=null==b?gt:"function"==typeof b?b:ls(Gs.call(b)),a):c},a.offset=function(b){return arguments.length?(d=null==b?ft:b,a):d},a},a.stackOffsetExpand=function(a,b){if((d=a.length)>0){for(var c,d,e,f=0,g=a[0].length;g>f;++f){for(e=c=0;d>c;++c)e+=a[c][f][1]||0;if(e)for(c=0;d>c;++c)a[c][f][1]/=e}ft(a,b)}},a.stackOffsetDiverging=function(a,b){if((h=a.length)>1)for(var c,d,e,f,g,h,i=0,j=a[b[0]].length;j>i;++i)for(f=g=0,c=0;h>c;++c)(e=(d=a[b[c]][i])[1]-d[0])>=0?(d[0]=f,d[1]=f+=e):0>e?(d[1]=g,d[0]=g+=e):d[0]=f},a.stackOffsetNone=ft,a.stackOffsetSilhouette=function(a,b){if((c=a.length)>0){for(var c,d=0,e=a[b[0]],f=e.length;f>d;++d){for(var g=0,h=0;c>g;++g)h+=a[g][d][1]||0;e[d][1]+=e[d][0]=-h/2}ft(a,b)}},a.stackOffsetWiggle=function(a,b){if((e=a.length)>0&&(d=(c=a[b[0]]).length)>0){for(var c,d,e,f=0,g=1;d>g;++g){for(var h=0,i=0,j=0;e>h;++h){for(var k=a[b[h]],l=k[g][1]||0,m=(l-(k[g-1][1]||0))/2,n=0;h>n;++n){var o=a[b[n]];m+=(o[g][1]||0)-(o[g-1][1]||0)}i+=l,j+=m*l}c[g-1][1]+=c[g-1][0]=f,i&&(f-=j/i)}c[g-1][1]+=c[g-1][0]=f,ft(a,b)}},a.stackOrderAscending=ht,a.stackOrderDescending=function(a){return ht(a).reverse()},a.stackOrderInsideOut=function(a){var b,c,d=a.length,e=a.map(wi),f=gt(a).sort(function(a,b){return e[b]-e[a]}),g=0,h=0,i=[],j=[];for(b=0;d>b;++b)c=f[b],h>g?(g+=e[c],i.push(c)):(h+=e[c],j.push(c));return j.reverse().concat(i)},a.stackOrderNone=gt,a.stackOrderReverse=function(a){return gt(a).reverse()},a.timeInterval=yg,a.timeMillisecond=Mq,a.timeMilliseconds=Nq,a.utcMillisecond=Mq,a.utcMilliseconds=Nq,a.timeSecond=Qq,a.timeSeconds=Rq,a.utcSecond=Qq,a.utcSeconds=Rq,a.timeMinute=Sq,a.timeMinutes=Tq,a.timeHour=Uq,a.timeHours=Vq,a.timeDay=Wq,a.timeDays=Xq,a.timeWeek=Yq,a.timeWeeks=dr,a.timeSunday=Yq,a.timeSundays=dr,a.timeMonday=Zq,a.timeMondays=er,a.timeTuesday=$q,a.timeTuesdays=fr,a.timeWednesday=_q,a.timeWednesdays=gr,a.timeThursday=ar,a.timeThursdays=hr,a.timeFriday=br,a.timeFridays=ir,a.timeSaturday=cr,a.timeSaturdays=jr,a.timeMonth=kr,a.timeMonths=lr,a.timeYear=mr,a.timeYears=nr,a.utcMinute=or,a.utcMinutes=pr,a.utcHour=qr,a.utcHours=rr,a.utcDay=sr,a.utcDays=tr,a.utcWeek=ur,a.utcWeeks=Br,a.utcSunday=ur,a.utcSundays=Br,a.utcMonday=vr,a.utcMondays=Cr,a.utcTuesday=wr,a.utcTuesdays=Dr,a.utcWednesday=xr,a.utcWednesdays=Er,a.utcThursday=yr,a.utcThursdays=Fr,a.utcFriday=zr,a.utcFridays=Gr,a.utcSaturday=Ar,a.utcSaturdays=Hr,a.utcMonth=Ir,a.utcMonths=Jr,a.utcYear=Kr,a.utcYears=Mr,a.timeFormatDefaultLocale=yh,a.timeFormatLocale=Eg,a.isoFormat=Rr,a.isoParse=Sr,a.now=kb,a.timer=nb,a.timerFlush=ob,a.timeout=Gl,a.interval=function(a,b,c){var d=new mb,e=b;return null==b?(d.restart(a,b,c),d):(b=+b,c=null==c?kb():+c,d.restart(function f(g){g+=e,d.restart(f,e+=b,c),a(g)},b,c),d)},a.transition=Yb,a.active=function(a,b){var c,d,e=a.__transition;if(e){b=null==b?null:b+"";for(d in e)if((c=e[d]).state>Kl&&c.name===b)return new Xb([[a]],rm,b,+d)}return null},a.interrupt=Rl,a.voronoi=function(){function a(a){return new aj(a.map(function(d,e){var f=[Math.round(b(d,e,a)/qt)*qt,Math.round(c(d,e,a)/qt)*qt];return f.index=e,f.data=d,f}),d)}var b=xi,c=yi,d=null;return a.polygons=function(b){return a(b).polygons()},a.links=function(b){return a(b).links()},a.triangles=function(b){return a(b).triangles()},a.x=function(c){return arguments.length?(b="function"==typeof c?c:it(+c),a):b},a.y=function(b){return arguments.length?(c="function"==typeof b?b:it(+b),a):c},a.extent=function(b){return arguments.length?(d=null==b?null:[[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]],a):d&&[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},a.size=function(b){return arguments.length?(d=null==b?null:[[0,0],[+b[0],+b[1]]],a):d&&[d[1][0]-d[0][0],d[1][1]-d[0][1]]},a},a.zoom=function(){function b(a){a.property("__zoom",hj).on("wheel.zoom",j).on("mousedown.zoom",k).on("dblclick.zoom",l).filter(v).on("touchstart.zoom",n).on("touchmove.zoom",o).on("touchend.zoom touchcancel.zoom",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(a,b){return(b=Math.max(w,Math.min(x,b)))===a.k?a:new cj(b,a.x,a.y)}function d(a,b,c){var d=b[0]-c[0]*a.k,e=b[1]-c[1]*a.k;return d===a.x&&e===a.y?a:new cj(a.k,d,e)}function e(a,b){var c=a.invertX(b[0][0])-y,d=a.invertX(b[1][0])-z,e=a.invertY(b[0][1])-B,f=a.invertY(b[1][1])-C;return a.translate(d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d),f>e?(e+f)/2:Math.min(0,e)||Math.max(0,f))}function f(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function g(a,b,c){a.on("start.zoom",function(){h(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){h(this,arguments).end()}).tween("zoom",function(){var a=this,d=arguments,e=h(a,d),g=t.apply(a,d),i=c||f(g),j=Math.max(g[1][0]-g[0][0],g[1][1]-g[0][1]),k=a.__zoom,l="function"==typeof b?b.apply(a,d):b,m=E(k.invert(i).concat(j/k.k),l.invert(i).concat(j/l.k));return function(a){if(1===a)a=l;else{var b=m(a),c=j/b[2];a=new cj(c,i[0]-b[0]*c,i[1]-b[1]*c)}e.zoom(null,a)}})}function h(a,b){for(var c,d=0,e=F.length;e>d;++d)if((c=F[d]).that===a)return c;return new i(a,b)}function i(a,b){this.that=a,this.args=b,this.index=-1,this.active=0,this.extent=t.apply(a,b)}function j(){if(s.apply(this,arguments)){var a=h(this,arguments),b=this.__zoom,f=Math.max(w,Math.min(x,b.k*Math.pow(2,u.apply(this,arguments)))),g=ak(this);if(a.wheel)a.mouse[0][0]===g[0]&&a.mouse[0][1]===g[1]||(a.mouse[1]=b.invert(a.mouse[0]=g)),clearTimeout(a.wheel);else{if(b.k===f)return;a.mouse=[g,b.invert(g)],Rl(this),a.start()}ut(),a.wheel=setTimeout(function(){a.wheel=null,a.end()},I),a.zoom("mouse",e(d(c(b,f),a.mouse[0],a.mouse[1]),a.extent))}}function k(){if(!r&&s.apply(this,arguments)){var b=h(this,arguments),c=ik(a.event.view).on("mousemove.zoom",function(){if(ut(),!b.moved){var c=a.event.clientX-g,f=a.event.clientY-i;b.moved=c*c+f*f>J}b.zoom("mouse",e(d(b.that.__zoom,b.mouse[0]=ak(b.that),b.mouse[1]),b.extent))},!0).on("mouseup.zoom",function(){c.on("mousemove.zoom mouseup.zoom",null),qa(a.event.view,b.moved),ut(),b.end()},!0),f=ak(this),g=a.event.clientX,i=a.event.clientY;lk(a.event.view),ej(),b.mouse=[f,this.__zoom.invert(f)],Rl(this),b.start()}}function l(){if(s.apply(this,arguments)){var f=this.__zoom,h=ak(this),i=f.invert(h),j=e(d(c(f,f.k*(a.event.shiftKey?.5:2)),h,i),t.apply(this,arguments));ut(),D>0?ik(this).transition().duration(D).call(g,j,h):ik(this).call(b.transform,j)}}function n(){if(s.apply(this,arguments)){var b,c,d,e,f=h(this,arguments),g=a.event.changedTouches,i=g.length;for(ej(),c=0;i>c;++c)d=g[c],e=[e=jk(this,g,d.identifier),this.__zoom.invert(e),d.identifier],f.touch0?f.touch1||(f.touch1=e):(f.touch0=e,b=!0);if(q&&(q=clearTimeout(q),!f.touch1))return f.end(),void((e=ik(this).on("dblclick.zoom"))&&e.apply(this,arguments));b&&(q=setTimeout(function(){q=null},H),Rl(this),f.start())}}function o(){var b,f,g,i,j=h(this,arguments),k=a.event.changedTouches,l=k.length;for(ut(),q&&(q=clearTimeout(q)),b=0;l>b;++b)f=k[b],g=jk(this,k,f.identifier),j.touch0&&j.touch0[2]===f.identifier?j.touch0[0]=g:j.touch1&&j.touch1[2]===f.identifier&&(j.touch1[0]=g);if(f=j.that.__zoom,j.touch1){var m=j.touch0[0],n=j.touch0[1],o=j.touch1[0],p=j.touch1[1],r=(r=o[0]-m[0])*r+(r=o[1]-m[1])*r,s=(s=p[0]-n[0])*s+(s=p[1]-n[1])*s;f=c(f,Math.sqrt(r/s)),g=[(m[0]+o[0])/2,(m[1]+o[1])/2],i=[(n[0]+p[0])/2,(n[1]+p[1])/2]}else{if(!j.touch0)return;g=j.touch0[0],i=j.touch0[1]}j.zoom("touch",e(d(f,g,i),j.extent))}function p(){var b,c,d=h(this,arguments),e=a.event.changedTouches,f=e.length;for(ej(),r&&clearTimeout(r),r=setTimeout(function(){r=null},H),b=0;f>b;++b)c=e[b],d.touch0&&d.touch0[2]===c.identifier?delete d.touch0:d.touch1&&d.touch1[2]===c.identifier&&delete d.touch1;d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0?d.touch0[1]=this.__zoom.invert(d.touch0[0]):d.end()}var q,r,s=fj,t=gj,u=ij,v=jj,w=0,x=1/0,y=-x,z=x,B=y,C=z,D=250,E=ql,F=[],G=m("start","zoom","end"),H=500,I=150,J=0;return b.transform=function(a,b){var c=a.selection?a.selection():a;c.property("__zoom",hj),a!==c?g(a,b):c.interrupt().each(function(){h(this,arguments).start().zoom(null,"function"==typeof b?b.apply(this,arguments):b).end()})},b.scaleBy=function(a,c){b.scaleTo(a,function(){return this.__zoom.k*("function"==typeof c?c.apply(this,arguments):c)})},b.scaleTo=function(a,g){b.transform(a,function(){var a=t.apply(this,arguments),b=this.__zoom,h=f(a),i=b.invert(h);return e(d(c(b,"function"==typeof g?g.apply(this,arguments):g),h,i),a)})},b.translateBy=function(a,c,d){b.transform(a,function(){return e(this.__zoom.translate("function"==typeof c?c.apply(this,arguments):c,"function"==typeof d?d.apply(this,arguments):d),t.apply(this,arguments))})},b.translateTo=function(a,c,d){b.transform(a,function(){var a=t.apply(this,arguments),b=this.__zoom,g=f(a);return e(tt.translate(g[0],g[1]).scale(b.k).translate("function"==typeof c?-c.apply(this,arguments):-c,"function"==typeof d?-d.apply(this,arguments):-d),a)})},i.prototype={start:function(){return 1==++this.active&&(this.index=F.push(this)-1,this.emit("start")),this},zoom:function(a,b){return this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return 0==--this.active&&(F.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(a){A(new bj(b,a,this.that.__zoom),G.apply,G,[a,this.that,this.args])}},b.wheelDelta=function(a){return arguments.length?(u="function"==typeof a?a:st(+a),b):u},b.filter=function(a){return arguments.length?(s="function"==typeof a?a:st(!!a),b):s},b.touchable=function(a){return arguments.length?(v="function"==typeof a?a:st(!!a),b):v},b.extent=function(a){return arguments.length?(t="function"==typeof a?a:st([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),b):t},b.scaleExtent=function(a){return arguments.length?(w=+a[0],x=+a[1],b):[w,x]},b.translateExtent=function(a){return arguments.length?(y=+a[0][0],z=+a[1][0],B=+a[0][1],C=+a[1][1],b):[[y,B],[z,C]]},b.duration=function(a){return arguments.length?(D=+a,b):D},b.interpolate=function(a){return arguments.length?(E=a,b):E},b.on=function(){var a=G.on.apply(G,arguments);return a===G?b:a},b.clickDistance=function(a){return arguments.length?(J=(a=+a)*a,b):Math.sqrt(J)},b},a.zoomTransform=dj,a.zoomIdentity=tt,Object.defineProperty(a,"__esModule",{value:!0})}),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.c3=b()}(this,function(){"use strict";function a(b){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(b)}function b(a){var b=this;b.d3=window.d3?window.d3:"undefined"!=typeof require?require("d3"):void 0,b.api=a,b.config=b.getDefaultConfig(),b.data={},b.cache={},b.axes={}}function c(a){var d=this.internal=new b(this);d.loadConfig(a),d.beforeInit(a),d.init(),d.afterInit(a),function e(a,b,c){Object.keys(a).forEach(function(d){b[d]=a[d].bind(c),0<Object.keys(a[d]).length&&e(a[d],b[d],c)})}(c.prototype,this,this)}function d(a,b){var c=this;c.component=a,c.params=b||{},c.d3=a.d3,c.scale=c.d3.scaleLinear(),c.range,c.orient="bottom",c.innerTickSize=6,c.outerTickSize=this.params.withOuterTick?6:0,c.tickPadding=3,c.tickValues=null,c.tickFormat,c.tickArguments,c.tickOffset=0,c.tickCulling=!0,c.tickCentered,c.tickTextCharSize,c.tickTextRotate=c.params.tickTextRotate,c.tickLength,c.axis=c.generateAxis()}d.prototype.axisX=function(a,b,c){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+c)+", 0)"})},d.prototype.axisY=function(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})},d.prototype.scaleExtent=function(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]},d.prototype.generateTicks=function(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,this.tickArguments);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return 0<d.length&&0<d[0]&&d.unshift(d[0]-(d[1]-d[0])),d},d.prototype.copyScale=function(){var a,b=this.scale.copy();return this.params.isCategory&&(a=this.scale.domain(),b.domain([a[0],a[1]-1])),b},d.prototype.textFormatted=function(a){var b=this.tickFormat?this.tickFormat(a):a;return void 0!==b?b:""},d.prototype.updateRange=function(){var a=this;return a.range=a.scale.rangeExtent?a.scale.rangeExtent():a.scaleExtent(a.scale.range()),a.range},d.prototype.updateTickTextCharSize=function(a){var b=this;if(b.tickTextCharSize)return b.tickTextCharSize;var c={h:11.5,w:5.5};return a.select("text").text(function(a){return b.textFormatted(a)}).each(function(a){var d=this.getBoundingClientRect(),e=b.textFormatted(a),f=d.height,g=e?d.width/e.length:void 0;f&&g&&(c.h=f,c.w=g)}).text(""),b.tickTextCharSize=c},d.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},d.prototype.tspanData=function(a,b,c){var d=this,e=d.params.tickMultiline?d.splitTickText(a,c):[].concat(d.textFormatted(a));return d.params.tickMultiline&&0<d.params.tickMultilineMax&&(e=d.ellipsify(e,d.params.tickMultilineMax)),e.map(function(a){return{index:b,splitted:a,length:e.length}})},d.prototype.splitTickText=function(a,b){var c,d,e,f=this,g=f.textFormatted(a),h=f.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(g)?g:((!h||0>=h)&&(h=f.isVertical()?95:f.params.isCategory?Math.ceil(b(1)-b(0))-12:110),
function i(a,b){d=void 0;for(var g=1;g<b.length;g++)if(" "===b.charAt(g)&&(d=g),c=b.substr(0,g+1),e=f.tickTextCharSize.w*c.length,e>h)return i(a.concat(b.substr(0,d||g)),b.slice(d?d+1:g));return a.concat(b)}([],g+""))},d.prototype.ellipsify=function(a,b){if(a.length<=b)return a;for(var c=a.slice(0,b),d=3,e=b-1;e>=0;e--){var f=c[e].length;if(c[e]=c[e].substr(0,f-d).padEnd(f,"."),(d-=f)<=0)break}return c},d.prototype.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},d.prototype.lineY2=function(a){var b=this,c=b.scale(a)+(b.tickCentered?0:b.tickOffset);return b.range[0]<c&&c<b.range[1]?b.innerTickSize:0},d.prototype.textY=function(){var a=this.tickTextRotate;return a?11.5-a/15*2.5*(a>0?1:-1):this.tickLength},d.prototype.textTransform=function(){var a=this.tickTextRotate;return a?"rotate("+a+")":""},d.prototype.textTextAnchor=function(){var a=this.tickTextRotate;return a?a>0?"start":"end":"middle"},d.prototype.tspanDx=function(){var a=this.tickTextRotate;return a?8*Math.sin(Math.PI*(a/180)):0},d.prototype.tspanDy=function(a,b){var c=this.tickTextCharSize.h;return 0===b&&(c=this.isVertical()?-((a.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),c},d.prototype.generateAxis=function(){function a(e,f){var g;return e.each(function(){var e,h,i,j=a.g=c.select(this),k=this.__chart__||b.scale,l=this.__chart__=b.copyScale(),m=b.tickValues?b.tickValues:b.generateTicks(l),n=j.selectAll(".tick").data(m,l),o=n.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),p=n.exit().remove(),q=n.merge(o);d.isCategory?(b.tickOffset=Math.ceil((l(1)-l(0))/2),h=b.tickCentered?0:b.tickOffset,i=b.tickCentered?b.tickOffset:0):b.tickOffset=h=0,b.updateRange(),b.updateTickLength(),b.updateTickTextCharSize(j.select(".tick"));var r=q.select("line").merge(o.append("line")),s=q.select("text").merge(o.append("text")),t=q.selectAll("text").selectAll("tspan").data(function(a,c){return b.tspanData(a,c,l)}),u=t.enter().append("tspan").merge(t).text(function(a){return a.splitted});t.exit().remove();var v=j.selectAll(".domain").data([0]),w=v.enter().append("path").merge(v).attr("class","domain");switch(b.orient){case"bottom":e=b.axisX,r.attr("x1",h).attr("x2",h).attr("y2",function(a,c){return b.lineY2(a,c)}),s.attr("x",0).attr("y",function(a,c){return b.textY(a,c)}).attr("transform",function(a,c){return b.textTransform(a,c)}).style("text-anchor",function(a,c){return b.textTextAnchor(a,c)}),u.attr("x",0).attr("dy",function(a,c){return b.tspanDy(a,c)}).attr("dx",function(a,c){return b.tspanDx(a,c)}),w.attr("d","M"+b.range[0]+","+b.outerTickSize+"V0H"+b.range[1]+"V"+b.outerTickSize);break;case"top":e=b.axisX,r.attr("x1",h).attr("x2",h).attr("y2",function(a,c){return-1*b.lineY2(a,c)}),s.attr("x",0).attr("y",function(a,c){return-1*b.textY(a,c)-(d.isCategory?2:b.tickLength-2)}).attr("transform",function(a,c){return b.textTransform(a,c)}).style("text-anchor",function(a,c){return b.textTextAnchor(a,c)}),u.attr("x",0).attr("dy",function(a,c){return b.tspanDy(a,c)}).attr("dx",function(a,c){return b.tspanDx(a,c)}),w.attr("d","M"+b.range[0]+","+-b.outerTickSize+"V0H"+b.range[1]+"V"+-b.outerTickSize);break;case"left":e=b.axisY,r.attr("x2",-b.innerTickSize).attr("y1",i).attr("y2",i),s.attr("x",-b.tickLength).attr("y",b.tickOffset).style("text-anchor","end"),u.attr("x",-b.tickLength).attr("dy",function(a,c){return b.tspanDy(a,c)}),w.attr("d","M"+-b.outerTickSize+","+b.range[0]+"H0V"+b.range[1]+"H"+-b.outerTickSize);break;case"right":e=b.axisY,r.attr("x2",b.innerTickSize).attr("y1",i).attr("y2",i),s.attr("x",b.tickLength).attr("y",b.tickOffset).style("text-anchor","start"),u.attr("x",b.tickLength).attr("dy",function(a,c){return b.tspanDy(a,c)}),w.attr("d","M"+b.outerTickSize+","+b.range[0]+"H0V"+b.range[1]+"H"+b.outerTickSize)}if(l.rangeBand){var x=l,y=x.rangeBand()/2;k=l=function(a){return x(a)+y}}else k.rangeBand?k=l:p.call(e,l,b.tickOffset);o.call(e,k,b.tickOffset),g=(f?q.transition(f):q).style("opacity",1).call(e,l,b.tickOffset)}),g}var b=this,c=b.d3,d=b.params;return a.scale=function(c){return arguments.length?(b.scale=c,a):b.scale},a.orient=function(c){return arguments.length?(b.orient=c in{top:1,right:1,bottom:1,left:1}?c+"":"bottom",a):b.orient},a.tickFormat=function(c){return arguments.length?(b.tickFormat=c,a):b.tickFormat},a.tickCentered=function(c){return arguments.length?(b.tickCentered=c,a):b.tickCentered},a.tickOffset=function(){return b.tickOffset},a.tickInterval=function(){var c;return(c=d.isCategory?2*b.tickOffset:(a.g.select("path.domain").node().getTotalLength()-2*b.outerTickSize)/a.g.selectAll("line").size())===1/0?0:c},a.ticks=function(){return arguments.length?(b.tickArguments=arguments,a):b.tickArguments},a.tickCulling=function(c){return arguments.length?(b.tickCulling=c,a):b.tickCulling},a.tickValues=function(c){if("function"==typeof c)b.tickValues=function(){return c(b.scale.domain())};else{if(!arguments.length)return b.tickValues;b.tickValues=c}return a},a};var e={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},f=function(a){return Math.ceil(a)+.5},g=function(a){return 10*Math.ceil(a/10)},h=function(a){return a[1]-a[0]},i=function(a,b,c){return l(a[b])?a[b]:c},j=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)];return{x:c[0].x,y:Math.min(c[0].y,c[1].y),width:b.width,height:b.height}},k=function(a){return Array.isArray(a)},l=function(a){return void 0!==a},m=function(b){return null==b||o(b)&&0===b.length||"object"===a(b)&&0===Object.keys(b).length},n=function(a){return"function"==typeof a},o=function(a){return"string"==typeof a},p=function(a){return void 0===a},q=function(a){return a||0===a},r=function(a){return!m(a)},s=function(a){return"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},t=function v(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,v),this.owner=a,this.d3=a.d3,this.internal=d};t.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",e.axis+" "+e.axisX).attr("clip-path",b.axis_x_inner?"":a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",e.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=c.append("g").attr("class",e.axis+" "+e.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",e.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",e.axis+" "+e.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",e.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},t.prototype.getXAxis=function(a,b,c,d,e,f,g){var h=this.owner,i=h.config,j={isCategory:h.isCategorized(),withOuterTick:e,tickMultiline:i.axis_x_tick_multiline,tickMultilineMax:i.axis_x_tick_multiline?Number(i.axis_x_tick_multilineMax):0,tickWidth:i.axis_x_tick_width,tickTextRotate:g?0:i.axis_x_tick_rotate,withoutTransition:f},k=new this.internal(this,j).axis.scale(a).orient(b);return h.isTimeSeries()&&d&&"function"!=typeof d&&(d=d.map(function(a){return h.parseDate(a)})),k.tickFormat(c).tickValues(d),h.isCategorized()&&(k.tickCentered(i.axis_x_tick_centered),m(i.axis_x_tick_culling)&&(i.axis_x_tick_culling=!1)),k},t.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},t.prototype.getYAxis=function(a,b,c,d,e,f,g){var h=this.owner,i=h.config,j={withOuterTick:e,withoutTransition:f,tickTextRotate:g?0:i.axis_y_tick_rotate},k=new this.internal(this,j).axis.scale(a).orient(b).tickFormat(c);return h.isTimeSeriesY()?k.ticks(i.axis_y_tick_time_type,i.axis_y_tick_time_interval):k.tickValues(d),k},t.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},t.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return a};return b.axis_x_tick_format&&(n(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""})),n(c)?function(b){return c.call(a,b)}:c},t.prototype.getTickValues=function(a,b){return a||(b?b.tickValues():void 0)},t.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},t.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},t.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},t.prototype.getLabelOptionByAxisId=function(a){var b,c=this.owner.config;return"y"===a?b=c.axis_y_label:"y2"===a?b=c.axis_y2_label:"x"===a&&(b=c.axis_x_label),b},t.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return o(b)?b:b?b.text:null},t.prototype.setLabelText=function(a,b){var c=this.owner.config,d=this.getLabelOptionByAxisId(a);o(d)?"y"===a?c.axis_y_label=b:"y2"===a?c.axis_y2_label=b:"x"===a&&(c.axis_x_label=b):d&&(d.text=b)},t.prototype.getLabelPosition=function(b,c){var d=this.getLabelOptionByAxisId(b),e=d&&"object"===a(d)&&d.position?d.position:c;return{isInner:0<=e.indexOf("inner"),isOuter:0<=e.indexOf("outer"),isLeft:0<=e.indexOf("left"),isCenter:0<=e.indexOf("center"),isRight:0<=e.indexOf("right"),isTop:0<=e.indexOf("top"),isMiddle:0<=e.indexOf("middle"),isBottom:0<=e.indexOf("bottom")}},t.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},t.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},t.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},t.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},t.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},t.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},t.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},t.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},t.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},t.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},t.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},t.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},t.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},t.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},t.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},t.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},t.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-(a.config.axis_x_inner?0:this.getMaxTickWidth("x")):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},t.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},t.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},t.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},t.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},t.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},t.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,g=this.owner,h=g.config,i=0;return b&&g.currentMaxTickWidths[a]||(g.svg&&(c=g.filterTargetsToShow(g.data.targets),"y"===a?(d=g.y.copy().domain(g.getYDomain(c,"y")),e=this.getYAxis(d,g.yOrient,h.axis_y_tick_format,g.yAxisTickValues,!1,!0,!0)):"y2"===a?(d=g.y2.copy().domain(g.getYDomain(c,"y2")),e=this.getYAxis(d,g.y2Orient,h.axis_y2_tick_format,g.y2AxisTickValues,!1,!0,!0)):(d=g.x.copy().domain(g.getXDomain(c)),e=this.getXAxis(d,g.xOrient,g.xAxisTickFormat,g.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),(f=g.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(e).each(function(){g.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();i<a.width&&(i=a.width)}),f.remove()})),g.currentMaxTickWidths[a]=0>=i?g.currentMaxTickWidths[a]:i),g.currentMaxTickWidths[a]},t.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+e.axisX+" ."+e.axisXLabel),d=b.main.select("."+e.axisY+" ."+e.axisYLabel),f=b.main.select("."+e.axisY2+" ."+e.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?f.transition():f).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},t.prototype.getPadding=function(a,b,c,d){var e="number"==typeof a?a:a[b];return q(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,d):c},t.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner;return b*(a/(c.config.axis_rotated?c.width:c.height))},t.prototype.generateTickValues=function(a,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(1===(d=n(b)?b():b))k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(d>2){for(g=d-2,e=a[0],h=((f=a[a.length-1])-e)/(g+1),k=[e],i=0;g>i;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},t.prototype.generateTransitions=function(a){var b=this.owner.axes;return{axisX:a?b.x.transition().duration(a):b.x,axisY:a?b.y.transition().duration(a):b.y,axisY2:a?b.y2.transition().duration(a):b.y2,axisSubX:a?b.subx.transition().duration(a):b.subx}},t.prototype.redraw=function(a,b){var c=this.owner,d=a?c.d3.transition().duration(a):null;c.axes.x.style("opacity",b?0:1).call(c.xAxis,d),c.axes.y.style("opacity",b?0:1).call(c.yAxis,d),c.axes.y2.style("opacity",b?0:1).call(c.y2Axis,d),c.axes.subx.style("opacity",b?0:1).call(c.subXAxis,d)};var u={version:"0.6.12",chart:{fn:c.prototype,internal:{fn:b.prototype,axis:{fn:t.prototype,internal:{fn:d.prototype}}}},generate:function(a){return new c(a)}};return b.prototype.beforeInit=function(){},b.prototype.afterInit=function(){},b.prototype.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_headers,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},b.prototype.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeParse=(c.data_xLocaltime?b.timeParse:b.utcParse)(a.config.data_xFormat),a.axisTimeFormat=c.axis_x_localtime?b.timeFormat:b.utcFormat,a.defaultAxisTimeFormat=function(a){return a.getMilliseconds()?b.timeFormat(".%L")(a):a.getSeconds()?b.timeFormat(":%S")(a):a.getMinutes()?b.timeFormat("%I:%M")(a):a.getHours()?b.timeFormat("%I %p")(a):a.getDay()&&1!==a.getDate()?b.timeFormat("%-m/%-d")(a):1!==a.getDate()?b.timeFormat("%-m/%-d")(a):a.getMonth()?b.timeFormat("%-m/%-d")(a):b.timeFormat("%Y/%-m/%-d")(a)},a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?c.axis_x_inner?"right":"left":c.axis_x_inner?"top":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},b.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},b.prototype.initWithData=function(a){var b,c,d=this,f=d.d3,g=d.config,h=!0;d.axis=new t(d),g.bindto?"function"==typeof g.bindto.node?d.selectChart=g.bindto:d.selectChart=f.select(g.bindto):d.selectChart=f.selectAll([]),d.selectChart.empty()&&(d.selectChart=f.select(document.createElement("div")).style("opacity",0),d.observeInserted(d.selectChart),h=!1),d.selectChart.html("").classed("c3",!0),d.data.xs={},d.data.targets=d.convertDataToTargets(a),g.data_filter&&(d.data.targets=d.data.targets.filter(g.data_filter)),g.data_hide&&d.addHiddenTargetIds(!0===g.data_hide?d.mapToIds(d.data.targets):g.data_hide),g.legend_hide&&d.addHiddenLegendIds(!0===g.legend_hide?d.mapToIds(d.data.targets):g.legend_hide),d.updateSizes(),d.updateScales(),d.x.domain(f.extent(d.getXDomain(d.data.targets))),d.y.domain(d.getYDomain(d.data.targets,"y")),d.y2.domain(d.getYDomain(d.data.targets,"y2")),d.subX.domain(d.x.domain()),d.subY.domain(d.y.domain()),d.subY2.domain(d.y2.domain()),d.orgXDomain=d.x.domain(),d.svg=d.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return g.onmouseover.call(d)}).on("mouseleave",function(){return g.onmouseout.call(d)}),d.config.svg_classname&&d.svg.attr("class",d.config.svg_classname),b=d.svg.append("defs"),d.clipChart=d.appendClip(b,d.clipId),d.clipXAxis=d.appendClip(b,d.clipIdForXAxis),d.clipYAxis=d.appendClip(b,d.clipIdForYAxis),d.clipGrid=d.appendClip(b,d.clipIdForGrid),d.clipSubchart=d.appendClip(b,d.clipIdForSubchart),d.updateSvgSize(),c=d.main=d.svg.append("g").attr("transform",d.getTranslate("main")),d.initPie&&d.initPie(),d.initDragZoom&&d.initDragZoom(),d.initSubchart&&d.initSubchart(),d.initTooltip&&d.initTooltip(),d.initLegend&&d.initLegend(),d.initTitle&&d.initTitle(),d.initZoom&&d.initZoom(),d.initSubchartBrush&&d.initSubchartBrush(),c.append("text").attr("class",e.text+" "+e.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),d.initRegion(),d.initGrid(),c.append("g").attr("clip-path",d.clipPath).attr("class",e.chart),g.grid_lines_front&&d.initGridLines(),d.initEventRect(),d.initChartElements(),d.axis.init(),d.updateTargets(d.data.targets),g.axis_x_selection&&d.brush.selectionAsValue(d.getDefaultSelection()),h&&(d.updateDimension(),d.config.oninit.call(d),d.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),d.bindResize(),d.bindWindowFocus(),d.api.element=d.selectChart.node()},b.prototype.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},b.prototype.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&!b.gauge_fullCircle&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},b.prototype.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},b.prototype.showTargets=function(){var a=this;a.svg.selectAll("."+e.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},b.prototype.redraw=function(a,b){var c,d,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=this,K=J.main,L=J.d3,M=J.config,N=J.getShapeIndices(J.isAreaType),O=J.getShapeIndices(J.isBarType),P=J.getShapeIndices(J.isLineType),Q=J.hasArcType(),R=J.filterTargetsToShow(J.data.targets),S=J.xv.bind(J);if(c=i(a=a||{},"withY",!0),d=i(a,"withSubchart",!0),f=i(a,"withTransition",!0),j=i(a,"withTransform",!1),k=i(a,"withUpdateXDomain",!1),l=i(a,"withUpdateOrgXDomain",!1),m=i(a,"withTrimXDomain",!0),q=i(a,"withUpdateXAxis",k),n=i(a,"withLegend",!1),o=i(a,"withEventRect",!0),p=i(a,"withDimension",!0),g=i(a,"withTransitionForExit",f),h=i(a,"withTransitionForAxis",f),w=f?M.transition_duration:0,x=g?w:0,y=h?w:0,b=b||J.axis.generateTransitions(y),n&&M.legend_show?J.updateLegend(J.mapToIds(J.data.targets),a,b):p&&J.updateDimension(!0),J.isCategorized()&&0===R.length&&J.x.domain([0,J.axes.x.selectAll(".tick").size()]),R.length?(J.updateXDomain(R,k,l,m),M.axis_x_tick_values||(D=J.axis.updateXAxisTickValues(R))):(J.xAxis.tickValues([]),J.subXAxis.tickValues([])),M.zoom_rescale&&!a.flow&&(G=J.x.orgDomain()),J.y.domain(J.getYDomain(R,"y",G)),J.y2.domain(J.getYDomain(R,"y2",G)),!M.axis_y_tick_values&&M.axis_y_tick_count&&J.yAxis.tickValues(J.axis.generateTickValues(J.y.domain(),M.axis_y_tick_count)),!M.axis_y2_tick_values&&M.axis_y2_tick_count&&J.y2Axis.tickValues(J.axis.generateTickValues(J.y2.domain(),M.axis_y2_tick_count)),J.axis.redraw(y,Q),J.axis.updateLabels(f),(k||q)&&R.length)if(M.axis_x_tick_culling&&D){for(E=1;E<D.length;E++)if(D.length/E<M.axis_x_tick_culling_max){F=E;break}J.svg.selectAll("."+e.axisX+" .tick text").each(function(a){var b=D.indexOf(a);b>=0&&L.select(this).style("display",b%F?"none":"block")})}else J.svg.selectAll("."+e.axisX+" .tick text").style("display","block");r=J.generateDrawArea?J.generateDrawArea(N,!1):void 0,s=J.generateDrawBar?J.generateDrawBar(O):void 0,t=J.generateDrawLine?J.generateDrawLine(P,!1):void 0,u=J.generateXYForText(N,O,P,!0),v=J.generateXYForText(N,O,P,!1),J.updateCircleY(),H=(J.config.axis_rotated?J.circleY:J.circleX).bind(J),I=(J.config.axis_rotated?J.circleX:J.circleY).bind(J),c&&(J.subY.domain(J.getYDomain(R,"y")),J.subY2.domain(J.getYDomain(R,"y2"))),J.updateXgridFocus(),K.select("text."+e.text+"."+e.empty).attr("x",J.width/2).attr("y",J.height/2).text(M.data_empty_label_text).transition().style("opacity",R.length?0:1),o&&J.redrawEventRect(),J.updateGrid(w),J.updateRegion(w),J.updateBar(x),J.updateLine(x),J.updateArea(x),J.updateCircle(H,I),J.hasDataLabel()&&J.updateText(u,v,x),J.redrawTitle&&J.redrawTitle(),J.redrawArc&&J.redrawArc(w,x,j),J.redrawSubchart&&J.redrawSubchart(d,b,w,x,N,O,P),K.selectAll("."+e.selectedCircles).filter(J.isBarType.bind(J)).selectAll("circle").remove(),a.flow&&(B=J.generateFlow({targets:R,flow:a.flow,duration:a.flow.duration,drawBar:s,drawLine:t,drawArea:r,cx:H,cy:I,xv:S,xForText:u,yForText:v})),J.isTabVisible()&&(w?(C=L.transition().duration(w),z=[],[J.redrawBar(s,!0,C),J.redrawLine(t,!0,C),J.redrawArea(r,!0,C),J.redrawCircle(H,I,!0,C),J.redrawText(u,v,a.flow,!0,C),J.redrawRegion(!0,C),J.redrawGrid(!0,C)].forEach(function(a){a.forEach(function(a){z.push(a)})}),A=J.generateWait(),z.forEach(function(a){A.add(a)}),A(function(){B&&B(),M.onrendered&&M.onrendered.call(J)})):(J.redrawBar(s),J.redrawLine(t),J.redrawArea(r),J.redrawCircle(H,I),J.redrawText(u,v,a.flow),J.redrawRegion(),J.redrawGrid(),B&&B(),M.onrendered&&M.onrendered.call(J))),J.mapToIds(J.data.targets).forEach(function(a){J.withoutFadeIn[a]=!0})},b.prototype.updateAndRedraw=function(a){var b,c=this,d=c.config;(a=a||{}).withTransition=i(a,"withTransition",!0),a.withTransform=i(a,"withTransform",!1),a.withLegend=i(a,"withLegend",!1),a.withUpdateXDomain=i(a,"withUpdateXDomain",!0),a.withUpdateOrgXDomain=i(a,"withUpdateOrgXDomain",!0),a.withTransitionForExit=!1,a.withTransitionForTransform=i(a,"withTransitionForTransform",a.withTransition),c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},b.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},b.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},b.prototype.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},b.prototype.isCustomX=function(){var a=this.config;return!this.isTimeSeries()&&(a.data_x||r(a.data_xs))},b.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},b.prototype.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=f(d.margin.left),c=f(d.margin.top)):"context"===a?(b=f(d.margin2.left),c=f(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2-(d.hasType("gauge")?6:0)),"translate("+b+","+c+")"},b.prototype.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},b.prototype.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},b.prototype.opacityForCircle=function(a){var b=(n(this.config.point_show)?this.config.point_show(a):this.config.point_show)?1:0;return q(a.value)?this.isScatterType(a)?.5:b:0},b.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},b.prototype.xx=function(a){return a?this.x(a.x):null},b.prototype.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},b.prototype.yv=function(a){var b=a.axis&&"y2"===a.axis?this.y2:this.y;return Math.ceil(b(a.value))},b.prototype.subxx=function(a){return a?this.subX(a.x):null},b.prototype.transformMain=function(a,b){var c,d,f,g=this;b&&b.axisX?c=b.axisX:(c=g.main.select("."+e.axisX),a&&(c=c.transition())),b&&b.axisY?d=b.axisY:(d=g.main.select("."+e.axisY),a&&(d=d.transition())),
b&&b.axisY2?f=b.axisY2:(f=g.main.select("."+e.axisY2),a&&(f=f.transition())),(a?g.main.transition():g.main).attr("transform",g.getTranslate("main")),c.attr("transform",g.getTranslate("x")),d.attr("transform",g.getTranslate("y")),f.attr("transform",g.getTranslate("y2")),g.main.select("."+e.chartArcs).attr("transform",g.getTranslate("arc"))},b.prototype.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},b.prototype.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .overlay");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0)},b.prototype.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},b.prototype.observeInserted=function(a){var b,c=this;"undefined"!=typeof MutationObserver?(b=new MutationObserver(function(d){d.forEach(function(d){"childList"===d.type&&d.previousSibling&&(b.disconnect(),c.intervalForObserveInserted=window.setInterval(function(){a.node().parentNode&&(window.clearInterval(c.intervalForObserveInserted),c.updateDimension(),c.brush&&c.brush.update(),c.config.oninit.call(c),c.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})})).observe(a.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},b.prototype.bindResize=function(){var a=this,b=a.config;if(a.resizeFunction=a.generateResize(),a.resizeFunction.add(function(){b.onresize.call(a)}),b.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&window.clearTimeout(a.resizeTimeout),a.resizeTimeout=window.setTimeout(function(){delete a.resizeTimeout,a.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.brush&&a.brush.update()},100)}),a.resizeFunction.add(function(){b.onresized.call(a)}),a.resizeIfElementDisplayed=function(){null!=a.api&&a.api.element.offsetParent&&a.resizeFunction()},window.attachEvent)window.attachEvent("onresize",a.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",a.resizeIfElementDisplayed,!1);else{var c=window.onresize;c?c.add&&c.remove||(c=a.generateResize()).add(window.onresize):c=a.generateResize(),c.add(a.resizeFunction),window.onresize=function(){a.api.element.offsetParent&&c()}}},b.prototype.bindWindowFocus=function(){var a=this;this.windowFocusHandler||(this.windowFocusHandler=function(){a.redraw()},window.addEventListener("focus",this.windowFocusHandler))},b.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},b.prototype.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}},a},b.prototype.endall=function(a,b){var c=0;a.each(function(){++c}).on("end",function(){--c||b.apply(this,arguments)})},b.prototype.generateWait=function(){var a=[],b=function(b){var c=setInterval(function(){var d=0;a.forEach(function(a){if(a.empty())d+=1;else try{a.transition()}catch(a){d+=1}}),d===a.length&&(clearInterval(c),b&&b())},50)};return b.add=function(b){a.push(b)},b},b.prototype.parseDate=function(b){var c;return b instanceof Date?c=b:"string"==typeof b?c=this.dataTimeParse(b):"object"===a(b)?c=new Date(+b):"number"!=typeof b||isNaN(b)||(c=new Date(+b)),c&&!isNaN(+c)||window.console.error("Failed to parse x '"+b+"' to Date object"),c},b.prototype.isTabVisible=function(){return!document.hidden},b.prototype.getPathBox=j,b.prototype.CLASS=e,"SVGPathSeg"in window||(window.SVGPathSeg=function(a,b,c){this.pathSegType=a,this.pathSegTypeAsLetter=b,this._owningPathSegList=c},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a),this._x=b,this._y=c},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",a),this._x=b,this._y=c},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",a),this._x=b,this._y=c},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",a),this._x=b,this._y=c},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f,g){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f,g){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(a,b,c,d,e,f,g,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(a,b,c,d,e,f,g,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(a,b){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a),this._x=b},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(a,b){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",a),this._x=b},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(a,b){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a),this._y=b},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(a,b){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a),this._y=b},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",a),this._x=b,this._y=c,this._x2=d,this._y2=e},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a),this._x=b,this._y=c,this._x2=d,this._y2=e},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a),this._x=b,this._y=c},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a),this._x=b,this._y=c},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,b){return new window.SVGPathSegMovetoAbs(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(a,b){return new window.SVGPathSegMovetoRel(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new window.SVGPathSegLinetoAbs(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new window.SVGPathSegLinetoRel(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f){return new window.SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,e,f)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f){return new window.SVGPathSegCurvetoCubicRel(void 0,a,b,c,d,e,f)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new window.SVGPathSegCurvetoQuadraticRel(void 0,a,b,c,d)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,e,f,g){return new window.SVGPathSegArcAbs(void 0,a,b,c,d,e,f,g)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,e,f,g){return new window.SVGPathSegArcRel(void 0,a,b,c,d,e,f,g)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new window.SVGPathSegLinetoHorizontalAbs(void 0,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new window.SVGPathSegLinetoHorizontalRel(void 0,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new window.SVGPathSegLinetoVerticalAbs(void 0,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new window.SVGPathSegLinetoVerticalRel(void 0,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,b){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(a){if(void 0===a||!isFinite(a))throw"Invalid arguments.";var b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("d",this.getAttribute("d"));var c=b.pathSegList.numberOfItems-1;if(0>=c)return 0;do{if(b.pathSegList.removeItem(c),a>b.getTotalLength())break;c--}while(c>0);return c})),"SVGPathSegList"in window||(window.SVGPathSegList=function(a){this._pathElement=a,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0
}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)}),b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(a){a._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(a){return this._checkPathSynchronizedToList(),this._list=[a],(a._owningPathSegList=this)._writeListToPath(),a},window.SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||0>a||a>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(a){return this._checkPathSynchronizedToList(),this._checkValidIndex(a),this._list[a]},window.SVGPathSegList.prototype.insertItemBefore=function(a,b){return this._checkPathSynchronizedToList(),b>this.numberOfItems&&(b=this.numberOfItems),a._owningPathSegList&&(a=a.clone()),this._list.splice(b,0,a),(a._owningPathSegList=this)._writeListToPath(),a},window.SVGPathSegList.prototype.replaceItem=function(a,b){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._checkValidIndex(b),((this._list[b]=a)._owningPathSegList=this)._writeListToPath(),a},window.SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList(),this._checkValidIndex(a);var b=this._list[a];return this._list.splice(a,1),this._writeListToPath(),b},window.SVGPathSegList.prototype.appendItem=function(a){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._list.push(a),(a._owningPathSegList=this)._writeListToPath(),a},window.SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;return a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()}),b},window.SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=this,c=function(){this.pathSegList=[]};c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var d=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};d.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return" ">=a&&(" "==a||"\n"==a||"	"==a||"\r"==a||"\f"==a)},d.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},d.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},d.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},d.prototype.peekSegmentType=function(){var a=this._string[this._currentIndex];return this._pathSegTypeFromChar(a)},d.prototype._pathSegTypeFromChar=function(a){switch(a){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},d.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||a>="0"&&"9">=a)&&b!=window.SVGPathSeg.PATHSEG_CLOSEPATH?b==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:b==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:b:window.SVGPathSeg.PATHSEG_UNKNOWN},d.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==window.SVGPathSeg.PATHSEG_MOVETO_ABS||a==window.SVGPathSeg.PATHSEG_MOVETO_REL},d.prototype._parseNumber=function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,e=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=h)for(var i=this._currentIndex-1,j=1;i>=h;)b+=j*(this._string.charAt(i--)-"0"),j*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)c*=10,d+=(this._string.charAt(this._currentIndex)-"0")/c,this._currentIndex+=1}if(this._currentIndex!=g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)a*=10,a+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var k=b+d;if(k*=e,a&&(k*=Math.pow(10,f*a)),g!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),k}},d.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=!1,b=this._string.charAt(this._currentIndex++);if("0"==b)a=!1;else{if("1"!=b)return;a=!0}return this._skipOptionalSpacesOrDelimiter(),a}},d.prototype.parseSegment=function(){var a=this._string[this._currentIndex],c=this._pathSegTypeFromChar(a);if(c==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((c=this._nextCommandHelper(a,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=c){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(b,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(b,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(b);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(b,d.x,d.y,d.x2,d.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(b,d.x,d.y,d.x2,d.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(b,d.x,d.y,d.x1,d.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(b,d.x,d.y,d.x1,d.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);default:throw"Unknown path seg type."}};var e=new c,f=new d(a);if(!f.initialCommandIsMoveTo())return[];for(;f.hasMoreData();){var g=f.parseSegment();if(!g)return[];e.appendSegment(g)}return e.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(a,b){return a>>=0,b=String(void 0!==b?b:" "),this.length>a?String(this):((a-=this.length)>b.length&&(b+=b.repeat(a/b.length)),String(this)+b.slice(0,a))}),(c.prototype.axis=function(){}).labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},c.prototype.axis.max=function(b){var c=this.internal,d=c.config;return arguments.length?("object"===a(b)?(q(b.x)&&(d.axis_x_max=b.x),q(b.y)&&(d.axis_y_max=b.y),q(b.y2)&&(d.axis_y2_max=b.y2)):d.axis_y_max=d.axis_y2_max=b,void c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:d.axis_x_max,y:d.axis_y_max,y2:d.axis_y2_max}},c.prototype.axis.min=function(b){var c=this.internal,d=c.config;return arguments.length?("object"===a(b)?(q(b.x)&&(d.axis_x_min=b.x),q(b.y)&&(d.axis_y_min=b.y),q(b.y2)&&(d.axis_y2_min=b.y2)):d.axis_y_min=d.axis_y2_min=b,void c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:d.axis_x_min,y:d.axis_y_min,y2:d.axis_y2_min}},c.prototype.axis.range=function(a){return arguments.length?(l(a.max)&&this.axis.max(a.max),void(l(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},c.prototype.category=function(a,b){var c=this.internal,d=c.config;return 1<arguments.length&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},c.prototype.categories=function(a){var b=this.internal,c=b.config;return arguments.length&&(c.axis_x_categories=a,b.redraw()),c.axis_x_categories},c.prototype.resize=function(a){var b=this.internal.config;b.size_width=a?a.width:null,b.size_height=a?a.height:null,this.flush()},c.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},c.prototype.destroy=function(){var a=this.internal;if(window.clearInterval(a.intervalForObserveInserted),void 0!==a.resizeTimeout&&window.clearTimeout(a.resizeTimeout),window.detachEvent)window.detachEvent("onresize",a.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",a.resizeIfElementDisplayed);else{var b=window.onresize;b&&b.add&&b.remove&&b.remove(a.resizeFunction)}return a.resizeFunction.remove(),a.unbindWindowFocus(),a.selectChart.classed("c3",!1).html(""),Object.keys(a).forEach(function(b){a[b]=null}),null},c.prototype.color=function(a){return this.internal.color(a)},(c.prototype.data=function(a){var b=this.internal.data.targets;return void 0===a?b:b.filter(function(b){return 0<=[].concat(a).indexOf(b.id)})}).shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},c.prototype.data.values=function(a){var b,c=null;return a&&(c=(b=this.data(a))[0]?b[0].values.map(function(a){return a.value}):null),c},c.prototype.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},c.prototype.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},c.prototype.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},c.prototype.flow=function(a){var b,c,d,e,f,g,h,i=this.internal,j=[],k=i.getMaxDataCount(),m=0,n=0;if(a.json)c=i.convertJsonToData(a.json,a.keys);else if(a.rows)c=i.convertRowsToData(a.rows);else{if(!a.columns)return;c=i.convertColumnsToData(a.columns)}b=i.convertDataToTargets(c,!0),i.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(n=a.values[a.values.length-1].index+1),m=b[c].values.length,d=0;m>d;d++)b[c].values[d].index=n+d,i.isTimeSeries()||(b[c].values[d].x=n+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||j.push(a.id)}),i.data.targets.forEach(function(a){var b,c;for(b=0;b<j.length;b++)if(a.id===j[b])for(n=a.values[a.values.length-1].index+1,c=0;m>c;c++)a.values.push({id:a.id,index:n+c,x:i.isTimeSeries()?i.getOtherTargetX(n+c):n+c,value:null})}),i.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=i.data.targets[0].values[0].index;n>b;b++)c.push({id:a.id,index:b,x:i.isTimeSeries()?i.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=n,i.isTimeSeries()||(a.x+=n)}),a.values=c.concat(a.values)}),i.data.targets=i.data.targets.concat(b),i.getMaxDataCount(),f=(e=i.data.targets[0]).values[0],l(a.to)?(m=0,h=i.isTimeSeries()?i.parseDate(a.to):a.to,e.values.forEach(function(a){a.x<h&&m++})):l(a.length)&&(m=a.length),k?1===k&&i.isTimeSeries()&&(g=(e.values[e.values.length-1].x-f.x)/2,d=[new Date(+f.x-g),new Date(+f.x+g)],i.updateXDomain(null,!0,!0,!1,d)):(g=i.isTimeSeries()?1<e.values.length?e.values[e.values.length-1].x-f.x:f.x-i.getXDomain(i.data.targets)[0]:1,d=[f.x-g,f.x],i.updateXDomain(null,!0,!0,!1,d)),i.updateTargets(i.data.targets),i.redraw({flow:{index:f.index,length:m,duration:q(a.duration)?a.duration:i.config.transition_duration,done:a.done,orgDataCount:k},withLegend:!0,withTransition:k>1,withTrimXDomain:!1,withUpdateXAxis:!0})},b.prototype.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var f,g,i,j,k,l,m,n,o,p,q=a.targets,r=a.flow,s=a.drawBar,t=a.drawLine,u=a.drawArea,v=a.cx,w=a.cy,x=a.xv,y=a.xForText,z=a.yForText,A=a.duration,B=r.index,C=r.length,D=b.getValueOnIndex(b.data.targets[0].values,B),E=b.getValueOnIndex(b.data.targets[0].values,B+C),F=b.x.domain(),G=r.duration||A,H=r.done||function(){},I=b.generateWait();b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,C)}),g=b.updateXDomain(q,!0,!0),b.updateXGrid&&b.updateXGrid(!0),i=b.xgrid||d.selectAll([]),j=b.xgridLines||d.selectAll([]),k=b.mainRegion||d.selectAll([]),l=b.mainText||d.selectAll([]),m=b.mainBar||d.selectAll([]),n=b.mainLine||d.selectAll([]),o=b.mainArea||d.selectAll([]),p=b.mainCircle||d.selectAll([]),f="translate("+(r.orgDataCount?1===r.orgDataCount||(D&&D.x)===(E&&E.x)?b.x(F[0])-b.x(g[0]):b.isTimeSeries()?b.x(F[0])-b.x(g[0]):b.x(D.x)-b.x(E.x):1!==b.data.targets[0].values.length?b.x(F[0])-b.x(g[0]):b.isTimeSeries()?(D=b.getValueOnIndex(b.data.targets[0].values,0),E=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),b.x(D.x)-b.x(E.x)):h(g)/2)+",0) scale("+h(F)/h(g)+",1)",b.hideXGridFocus();var J=d.transition().ease(d.easeLinear).duration(G);I.add(b.xAxis(b.axes.x,J)),I.add(m.transition(J).attr("transform",f)),I.add(n.transition(J).attr("transform",f)),I.add(o.transition(J).attr("transform",f)),I.add(p.transition(J).attr("transform",f)),I.add(l.transition(J).attr("transform",f)),I.add(k.filter(b.isRegionOnX).transition(J).attr("transform",f)),I.add(i.transition(J).attr("transform",f)),I.add(j.transition(J).attr("transform",f)),I(function(){var a,d=[],f=[];if(C){for(a=0;C>a;a++)d.push("."+e.shape+"-"+(B+a)),f.push("."+e.text+"-"+(B+a));b.svg.selectAll("."+e.shapes).selectAll(d).remove(),b.svg.selectAll("."+e.texts).selectAll(f).remove(),b.svg.select("."+e.xgrid).remove()}i.attr("transform",null).attr("x1",b.xgridAttr.x1).attr("x2",b.xgridAttr.x2).attr("y1",b.xgridAttr.y1).attr("y2",b.xgridAttr.y2).style("opacity",b.xgridAttr.opacity),j.attr("transform",null),j.select("line").attr("x1",c.axis_rotated?0:x).attr("x2",c.axis_rotated?b.width:x),j.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",x),m.attr("transform",null).attr("d",s),n.attr("transform",null).attr("d",t),o.attr("transform",null).attr("d",u),p.attr("transform",null).attr("cx",v).attr("cy",w),l.attr("transform",null).attr("x",y).attr("y",z).style("fill-opacity",b.opacityForText.bind(b)),k.attr("transform",null),k.filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),H(),b.flowing=!1})}},c.prototype.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(e.focused,!0).classed(e.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},c.prototype.defocus=function(a){var b=this.internal;a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b))).classed(e.focused,!1).classed(e.defocused,!0),b.hasArcType()&&b.unexpandArc(a),b.toggleFocusLegend(a,!1),b.focusedTargetIds=b.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),b.defocusedTargetIds=a},c.prototype.revert=function(a){var b=this.internal;a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a)).classed(e.focused,!1).classed(e.defocused,!1),b.hasArcType()&&b.unexpandArc(a),b.config.legend_show&&(b.showLegend(a.filter(b.isLegendToShow.bind(b))),b.legend.selectAll(b.selectorLegends(a)).filter(function(){return b.d3.select(this).classed(e.legendItemFocused)}).classed(e.legendItemFocused,!1)),b.focusedTargetIds=[],b.defocusedTargetIds=[]},(c.prototype.xgrids=function(a){var b=this.internal,c=b.config;return a&&(c.grid_x_lines=a,b.redrawWithoutRescale()),c.grid_x_lines}).add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a||[]))},c.prototype.xgrids.remove=function(a){this.internal.removeGridLines(a,!0)},(c.prototype.ygrids=function(a){var b=this.internal,c=b.config;return a&&(c.grid_y_lines=a,b.redrawWithoutRescale()),c.grid_y_lines}).add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a||[]))},c.prototype.ygrids.remove=function(a){this.internal.removeGridLines(a,!1)},c.prototype.groups=function(a){var b=this.internal,c=b.config;return p(a)||(c.data_groups=a,b.redraw()),c.data_groups},(c.prototype.legend=function(){}).show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},c.prototype.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!1})},c.prototype.load=function(a){var b=this.internal,d=b.config;a.xs&&b.addXs(a.xs),"names"in a&&c.prototype.data.names.bind(this)(a.names),"classes"in a&&Object.keys(a.classes).forEach(function(b){d.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(d.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){d.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){d.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?b.load(b.getCaches(a.cacheIds),a.done):"unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a)},c.prototype.unload=function(a){var b=this.internal;(a=a||{})instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},(c.prototype.regions=function(a){var b=this.internal,c=b.config;return a&&(c.regions=a,b.redrawWithoutRescale()),c.regions}).add=function(a){var b=this.internal,c=b.config;return a&&(c.regions=c.regions.concat(a),b.redrawWithoutRescale()),c.regions},c.prototype.regions.remove=function(a){var b,c,d,f=this.internal,g=f.config;return b=i(a=a||{},"duration",g.transition_duration),c=i(a,"classes",[e.region]),d=f.main.select("."+e.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),g.regions=g.regions.filter(function(a){var b=!1;return!a["class"]||(a["class"].split(" ").forEach(function(a){0<=c.indexOf(a)&&(b=!0)}),!b)}),g.regions},c.prototype.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+e.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+e.shape).filter(function(){return c.select(this).classed(e.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},c.prototype.select=function(a,b,c){var d=this.internal,f=d.d3,g=d.config;g.data_selection_enabled&&d.main.selectAll("."+e.shapes).selectAll("."+e.shape).each(function(h,i){var j=f.select(this),k=h.data?h.data.id:h.id,m=d.getToggle(this,h).bind(d),n=g.data_selection_grouped||!a||0<=a.indexOf(k),o=!b||0<=b.indexOf(i),p=j.classed(e.SELECTED);j.classed(e.line)||j.classed(e.area)||(n&&o?g.data_selection_isselectable(h)&&!p&&m(!0,j.classed(e.SELECTED,!0),h,i):l(c)&&c&&p&&m(!1,j.classed(e.SELECTED,!1),h,i))})},c.prototype.unselect=function(a,b){var c=this.internal,d=c.d3,f=c.config;f.data_selection_enabled&&c.main.selectAll("."+e.shapes).selectAll("."+e.shape).each(function(g,h){var i=d.select(this),j=g.data?g.data.id:g.id,k=c.getToggle(this,g).bind(c),l=f.data_selection_grouped||!a||0<=a.indexOf(j),m=!b||0<=b.indexOf(h),n=i.classed(e.SELECTED);i.classed(e.line)||i.classed(e.area)||l&&m&&f.data_selection_isselectable(g)&&n&&k(!1,i.classed(e.SELECTED,!1),g,h)})},c.prototype.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),(c=d.svg.selectAll(d.selectorTargets(a))).transition().style("display","initial","important").style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},c.prototype.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),(c=d.svg.selectAll(d.selectorTargets(a))).transition().style("opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0),c.style("display","none")}),b.withLegend&&d.hideLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},c.prototype.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},(c.prototype.tooltip=function(){}).show=function(a){var b,c,d=this.internal,e={};e=a.mouse?a.mouse:(a.data?c=a.data:void 0!==a.x&&(b=a.id?d.data.targets.filter(function(b){return b.id===a.id}):d.data.targets,c=d.filterByX(b,a.x).slice(0,1)[0]),c?d.getMousePosition(c):null),d.dispatchEvent("mousemove",e),d.config.tooltip_onshow.call(d,c)},c.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},c.prototype.transform=function(a,b){var c=this.internal,d=0<=["pie","donut"].indexOf(a)?{withTransform:!0}:null;c.transformTo(b,a,d)},b.prototype.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},c.prototype.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},c.prototype.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},(c.prototype.zoom=function(a){var b=this.internal;return a?(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.config.subchart_show?b.brush.selectionAsValue(a,!0):(b.updateXDomain(null,!0,!1,!1,a),b.redraw({withY:b.config.zoom_rescale,withSubchart:!1})),b.config.zoom_onzoom.call(this,b.x.orgDomain()),a):b.x.domain()}).enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},c.prototype.unzoom=function(){var a=this.internal;a.config.subchart_show?a.brush.clear():(a.updateXDomain(null,!0,!1,!1,a.subX.domain()),a.redraw({withY:a.config.zoom_rescale,withSubchart:!1}))},c.prototype.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_max=d.max([b.orgXDomain[1],a])):c.zoom_x_max},c.prototype.zoom.min=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_min=d.min([b.orgXDomain[0],a])):c.zoom_x_min},c.prototype.zoom.range=function(a){return arguments.length?(l(a.max)&&this.domain.max(a.max),void(l(a.min)&&this.domain.min(a.min))):{max:this.domain.max(),min:this.domain.min()}},b.prototype.initPie=function(){var a=this,b=a.d3;a.pie=b.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)});var c=a.getOrderFunction();if(c&&(a.isOrderAsc()||a.isOrderDesc())){var d=c;c=function(a,b){return-1*d(a,b)}}a.pie.sort(c||null)},b.prototype.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width,d=a.filterTargetsToShow(a.data.targets).length*a.config.gauge_arcs_minWidth;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2*(a.hasType("gauge")?.85:1),a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0,a.gaugeArcWidth=c||(d<=a.radius-a.innerRadius?a.radius-a.innerRadius:d<=a.radius?d:a.radius)},b.prototype.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},b.prototype.updateAngle=function(a){var b,c,d,e,f=this,g=f.config,h=!1,i=0;return g?(f.pie(f.filterTargetsToShow(f.data.targets)).forEach(function(b){h||b.data.id!==a.data.id||(h=!0,(a=b).index=i),i++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),f.isGaugeType(a.data)&&(b=g.gauge_min,c=g.gauge_max,d=Math.PI*(g.gauge_fullCircle?2:1)/(c-b),e=a.value<b?0:a.value<c?a.value-b:c-b,a.startAngle=g.gauge_startingAngle,a.endAngle=a.startAngle+d*e),h?a:null):null},b.prototype.getSvgArc=function(){var a=this,b=a.hasType("gauge"),c=a.gaugeArcWidth/a.filterTargetsToShow(a.data.targets).length,d=a.d3.arc().outerRadius(function(d){return b?a.radius-c*d.index:a.radius}).innerRadius(function(d){return b?a.radius-c*(d.index+1):a.innerRadius}),e=function(b,c){var e;return c?d(b):(e=a.updateAngle(b))?d(e):"M 0 0"};return e.centroid=d.centroid,e},b.prototype.getSvgArcExpanded=function(a){a=a||1;var b=this,c=b.hasType("gauge"),d=b.gaugeArcWidth/b.filterTargetsToShow(b.data.targets).length,e=Math.min(b.radiusExpanded*a-b.radius,.8*d-100*(1-a)),f=b.d3.arc().outerRadius(function(f){return c?b.radius-d*f.index+e:b.radiusExpanded*a}).innerRadius(function(a){return c?b.radius-d*(a.index+1):b.innerRadius});return function(a){var c=b.updateAngle(a);return c?f(c):"M 0 0"}},b.prototype.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},b.prototype.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.config,i=g.updateAngle(a),j="",k=g.hasType("gauge");if(i&&!k)b=this.svgArc.centroid(i),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),j="translate("+c*(f=g.hasType("donut")&&h.donut_label_ratio?n(h.donut_label_ratio)?h.donut_label_ratio(a,g.radius,e):h.donut_label_ratio:g.hasType("pie")&&h.pie_label_ratio?n(h.pie_label_ratio)?h.pie_label_ratio(a,g.radius,e):h.pie_label_ratio:g.radius&&e?(.375<36/g.radius?1.175-36/g.radius:.8)*g.radius/e:0)+","+d*f+")";else if(i&&k&&1<g.filterTargetsToShow(g.data.targets).length){var l=Math.sin(i.endAngle-Math.PI/2);j="translate("+(c=Math.cos(i.endAngle-Math.PI/2)*(g.radiusExpanded+25))+","+(d=l*(g.radiusExpanded+15-Math.abs(10*l))+3)+")"}return j},b.prototype.getArcRatio=function(a){var b=this.config,c=Math.PI*(this.hasType("gauge")&&!b.gauge_fullCircle?1:2);return a?(a.endAngle-a.startAngle)/c:null},b.prototype.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},b.prototype.textForArcLabel=function(a){var b,c,d,e,f,g=this;return g.shouldShowArcLabel()?(c=(b=g.updateAngle(a))?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat())?f(c,d,e):g.defaultArcValueFormat(c,d):""):""},b.prototype.textForGaugeMinMax=function(a,b){var c=this.getGaugeLabelExtents();return c?c(a,b):a},b.prototype.expandArc=function(a){var b,c=this;c.transiting?b=window.setInterval(function(){c.transiting||(window.clearInterval(b),0<c.legend.selectAll(".c3-legend-item-focused").size()&&c.expandArc(a))},10):(a=c.mapToTargetIds(a),c.svg.selectAll(c.selectorTargets(a,"."+e.chartArc)).each(function(a){c.shouldExpand(a.data.id)&&c.d3.select(this).selectAll("path").transition().duration(c.expandDuration(a.data.id)).attr("d",c.svgArcExpanded).transition().duration(2*c.expandDuration(a.data.id)).attr("d",c.svgArcExpandedSub).each(function(a){
c.isDonutType(a.data)})}))},b.prototype.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+e.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+e.arc))},b.prototype.expandDuration=function(a){var b=this.config;return this.isDonutType(a)?b.donut_expand_duration:this.isGaugeType(a)?b.gauge_expand_duration:this.isPieType(a)?b.pie_expand_duration:50},b.prototype.shouldExpand=function(a){var b=this.config;return this.isDonutType(a)&&b.donut_expand||this.isGaugeType(a)&&b.gauge_expand||this.isPieType(a)&&b.pie_expand},b.prototype.shouldShowArcLabel=function(){var a=this.config,b=!0;return this.hasType("donut")?b=a.donut_label_show:this.hasType("pie")&&(b=a.pie_label_show),b},b.prototype.meetsArcLabelThreshold=function(a){var b=this.config;return(this.hasType("donut")?b.donut_label_threshold:b.pie_label_threshold)<=a},b.prototype.getArcLabelFormat=function(){var a=this.config,b=a.pie_label_format;return this.hasType("gauge")?b=a.gauge_label_format:this.hasType("donut")&&(b=a.donut_label_format),b},b.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},b.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},b.prototype.updateTargetsForArc=function(a){var b,c=this,d=c.main,f=c.classChartArc.bind(c),g=c.classArcs.bind(c),h=c.classFocus.bind(c);(b=d.select("."+e.chartArcs).selectAll("."+e.chartArc).data(c.pie(a)).attr("class",function(a){return f(a)+h(a.data)}).enter().append("g").attr("class",f)).append("g").attr("class",g),b.append("text").attr("dy",c.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},b.prototype.initArc=function(){var a=this;a.arcs=a.main.select("."+e.chart).append("g").attr("class",e.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",e.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},b.prototype.redrawArc=function(a,b,c){var d,f,g,h,i=this,j=i.d3,k=i.config,l=i.main,m=i.hasType("gauge");if(f=(d=l.selectAll("."+e.arcs).selectAll("."+e.arc).data(i.arcData.bind(i))).enter().append("path").attr("class",i.classArc.bind(i)).style("fill",function(a){return i.color(a.data)}).style("cursor",function(a){return k.interaction_enabled&&k.data_selection_isselectable(a)?"pointer":null}).each(function(a){i.isGaugeType(a.data)&&(a.startAngle=a.endAngle=k.gauge_startingAngle),this._current=a}).merge(d),m&&(h=(g=l.selectAll("."+e.arcs).selectAll("."+e.arcLabelLine).data(i.arcData.bind(i))).enter().append("rect").attr("class",function(a){return e.arcLabelLine+" "+e.target+" "+e.target+"-"+a.data.id}).merge(g),1===i.filterTargetsToShow(i.data.targets).length?h.style("display","none"):h.style("fill",function(a){return i.levelColor?i.levelColor(a.data.values[0].value):i.color(a.data)}).style("display",k.gauge_labelLine_show?"":"none").each(function(a){var b=0,c=0,d=0,e="";if(i.hiddenTargetIds.indexOf(a.data.id)<0){var f=i.updateAngle(a),g=i.gaugeArcWidth/i.filterTargetsToShow(i.data.targets).length*(f.index+1),h=f.endAngle-Math.PI/2,k=i.radius-g,l=h-(0===k?0:1/k);b=i.radiusExpanded-i.radius+g,c=Math.cos(l)*k,d=Math.sin(l)*k,e="rotate("+180*h/Math.PI+", "+c+", "+d+")"}j.select(this).attr("x",c).attr("y",d).attr("width",b).attr("height",2).attr("transform",e).style("stroke-dasharray","0, "+(b+2)+", 0")})),f.attr("transform",function(a){return!i.isGaugeType(a.data)&&c?"scale(0)":""}).on("mouseover",k.interaction_enabled?function(a){var b,c;i.transiting||(b=i.updateAngle(a))&&(c=i.convertToArcData(b),i.expandArc(b.data.id),i.api.focus(b.data.id),i.toggleFocusLegend(b.data.id,!0),i.config.data_onmouseover(c,this))}:null).on("mousemove",k.interaction_enabled?function(a){var b,c=i.updateAngle(a);c&&(b=[i.convertToArcData(c)],i.showTooltip(b,this))}:null).on("mouseout",k.interaction_enabled?function(a){var b,c;i.transiting||(b=i.updateAngle(a))&&(c=i.convertToArcData(b),i.unexpandArc(b.data.id),i.api.revert(),i.revertLegend(),i.hideTooltip(),i.config.data_onmouseout(c,this))}:null).on("click",k.interaction_enabled?function(a,b){var c,d=i.updateAngle(a);d&&(c=i.convertToArcData(d),i.toggleShape&&i.toggleShape(this,c,b),i.config.data_onclick.call(i.api,c,this))}:null).each(function(){i.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=i.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=j.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,i.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return i.levelColor?i.levelColor(a.data.values[0].value):i.color(a.data.id)}).call(i.endall,function(){i.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),l.selectAll("."+e.chartArc).select("text").style("opacity",0).attr("class",function(a){return i.isGaugeType(a.data)?e.gaugeValue:""}).text(i.textForArcLabel.bind(i)).attr("transform",i.transformForArcLabel.bind(i)).style("font-size",function(a){return i.isGaugeType(a.data)&&1===i.filterTargetsToShow(i.data.targets).length?Math.round(i.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return i.isTargetToShow(a.data.id)&&i.isArcType(a.data)?1:0}),l.select("."+e.chartArcsTitle).style("opacity",i.hasType("donut")||m?1:0),m){var n=0,o=i.arcs.select("g."+e.chartArcsBackground).selectAll("path."+e.chartArcsBackground).data(i.data.targets);o.enter().append("path").attr("class",function(a,b){return e.chartArcsBackground+" "+e.chartArcsBackground+"-"+b}).merge(o).attr("d",function(a){if(0<=i.hiddenTargetIds.indexOf(a.id))return"M 0 0";var b={data:[{value:k.gauge_max}],startAngle:k.gauge_startingAngle,endAngle:-1*k.gauge_startingAngle*(k.gauge_fullCircle?Math.PI:1),index:n++};return i.getArc(b,!0,!0)}),o.exit().remove(),i.arcs.select("."+e.chartArcsGaugeUnit).attr("dy",".75em").text(k.gauge_label_show?k.gauge_units:""),i.arcs.select("."+e.chartArcsGaugeMin).attr("dx",-1*(i.innerRadius+(i.radius-i.innerRadius)/(k.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(k.gauge_label_show?i.textForGaugeMinMax(k.gauge_min,!1):""),i.arcs.select("."+e.chartArcsGaugeMax).attr("dx",i.innerRadius+(i.radius-i.innerRadius)/(k.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(k.gauge_label_show?i.textForGaugeMinMax(k.gauge_max,!0):"")}},b.prototype.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("g").attr("class",e.chartArcsBackground),a.append("text").attr("class",e.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",e.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",e.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},b.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},b.prototype.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},b.prototype.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},b.prototype.getCaches=function(a){var b,c=[];for(b=0;b<a.length;b++)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c},b.prototype.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},b.prototype.generateTargetClass=function(a){return a||0===a?("-"+a).replace(/\s/g,"-"):""},b.prototype.generateClass=function(a,b){return" "+a+" "+a+this.generateTargetClass(b)},b.prototype.classText=function(a){return this.generateClass(e.text,a.index)},b.prototype.classTexts=function(a){return this.generateClass(e.texts,a.id)},b.prototype.classShape=function(a){return this.generateClass(e.shape,a.index)},b.prototype.classShapes=function(a){return this.generateClass(e.shapes,a.id)},b.prototype.classLine=function(a){return this.classShape(a)+this.generateClass(e.line,a.id)},b.prototype.classLines=function(a){return this.classShapes(a)+this.generateClass(e.lines,a.id)},b.prototype.classCircle=function(a){return this.classShape(a)+this.generateClass(e.circle,a.index)},b.prototype.classCircles=function(a){return this.classShapes(a)+this.generateClass(e.circles,a.id)},b.prototype.classBar=function(a){return this.classShape(a)+this.generateClass(e.bar,a.index)},b.prototype.classBars=function(a){return this.classShapes(a)+this.generateClass(e.bars,a.id)},b.prototype.classArc=function(a){return this.classShape(a.data)+this.generateClass(e.arc,a.data.id)},b.prototype.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(e.arcs,a.data.id)},b.prototype.classArea=function(a){return this.classShape(a)+this.generateClass(e.area,a.id)},b.prototype.classAreas=function(a){return this.classShapes(a)+this.generateClass(e.areas,a.id)},b.prototype.classRegion=function(a,b){return this.generateClass(e.region,b)+" "+("class"in a?a["class"]:"")},b.prototype.classEvent=function(a){return this.generateClass(e.eventRect,a.index)},b.prototype.classTarget=function(a){var b=this.config.data_classes[a],c="";return b&&(c=" "+e.target+"-"+b),this.generateClass(e.target,a)+c},b.prototype.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},b.prototype.classFocused=function(a){return" "+(0<=this.focusedTargetIds.indexOf(a.id)?e.focused:"")},b.prototype.classDefocused=function(a){return" "+(0<=this.defocusedTargetIds.indexOf(a.id)?e.defocused:"")},b.prototype.classChartText=function(a){return e.chartText+this.classTarget(a.id)},b.prototype.classChartLine=function(a){return e.chartLine+this.classTarget(a.id)},b.prototype.classChartBar=function(a){return e.chartBar+this.classTarget(a.id)},b.prototype.classChartArc=function(a){return e.chartArc+this.classTarget(a.data.id)},b.prototype.getTargetSelectorSuffix=function(a){return this.generateTargetClass(a).replace(/([?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},b.prototype.selectorTarget=function(a,b){return(b||"")+"."+e.target+this.getTargetSelectorSuffix(a)},b.prototype.selectorTargets=function(a,b){var c=this;return(a=a||[]).length?a.map(function(a){return c.selectorTarget(a,b)}):null},b.prototype.selectorLegend=function(a){return"."+e.legendItem+this.getTargetSelectorSuffix(a)},b.prototype.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null},b.prototype.getClipPath=function(a){return"url("+(0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+a+")"},b.prototype.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},b.prototype.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},b.prototype.getAxisClipY=function(a){return a?-20:-this.margin.top},b.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},b.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},b.prototype.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},b.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},b.prototype.getAxisClipWidth=function(a){var b=Math.max(30,this.margin.left),c=Math.max(30,this.margin.right);return a?this.width+2+b+c:this.margin.left+20},b.prototype.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},b.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},b.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},b.prototype.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},b.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},b.prototype.generateColor=function(){var a=this.config,b=this.d3,c=a.data_colors,d=r(a.color_pattern)?a.color_pattern:b.schemeCategory10,e=a.data_color,f=[];return function(a){var b,g=a.id||a.data&&a.data.id||a;return c[g]instanceof Function?b=c[g](a):c[g]?b=c[g]:(f.indexOf(g)<0&&f.push(g),b=d[f.indexOf(g)%d.length],c[g]=b),e instanceof Function?e(b,a):b}},b.prototype.generateLevelColor=function(){var a=this.config,b=a.color_pattern,c=a.color_threshold,d="value"===c.unit,e=c.values&&c.values.length?c.values:[],f=c.max||100;return r(c)&&r(b)?function(a){var c,g=b[b.length-1];for(c=0;c<e.length;c++)if((d?a:100*a/f)<e[c]){g=b[c];break}return g}:null},b.prototype.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},b.prototype.additionalConfig={},b.prototype.loadConfig=function(b){var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=b,d=g.split("_"),e=function h(){var b=d.shift();return b&&c&&"object"===a(c)&&b in c?(c=c[b],h()):b?void 0:c}(),l(e)&&(f[g]=e)})},b.prototype.convertUrlToData=function(a,b,c,d,e){var f,g,h=this,i=b||"csv";g="json"===i?(f=h.d3.json,h.convertJsonToData):(f="tsv"===i?h.d3.tsv:h.d3.csv,h.convertXsvToData),f(a,c).then(function(a){e.call(h,g.call(h,a,d))})["catch"](function(a){throw a})},b.prototype.convertXsvToData=function(a){var b=a.columns;return 0===a.length?{keys:b,rows:[b.reduce(function(a,b){return Object.assign(a,(e=null,(d=b)in(c={})?Object.defineProperty(c,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):c[d]=e,c));var c,d,e},{})]}:{keys:b,rows:[].concat(a)}},b.prototype.convertJsonToData=function(a,b){var c,d=this,e=[];return b?(b.x?(c=b.value.concat(b.x),d.config.data_x=b.x):c=b.value,e.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var e=d.findValueInJson(a,c);p(e)&&(e=null),b.push(e)}),e.push(b)}),d.convertRowsToData(e)):(Object.keys(a).forEach(function(b){e.push([b].concat(a[b]))}),d.convertColumnsToData(e))},b.prototype.findValueInJson=function(a,b){for(var c=(b=(b=b.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),d=0;d<c.length;++d){var e=c[d];if(!(e in a))return;a=a[e]}return a},b.prototype.convertRowsToData=function(a){for(var b=[],c=a[0],d=1;d<a.length;d++){for(var e={},f=0;f<a[d].length;f++){if(p(a[d][f]))throw new Error("Source data is missing a component at ("+d+","+f+")!");e[c[f]]=a[d][f]}b.push(e)}return{keys:c,rows:b}},b.prototype.convertColumnsToData=function(a){for(var b=[],c=[],d=0;d<a.length;d++){for(var e=a[d][0],f=1;f<a[d].length;f++){if(p(b[f-1])&&(b[f-1]={}),p(a[d][f]))throw new Error("Source data is missing a component at ("+d+","+f+")!");b[f-1][e]=a[d][f]}c.push(e)}return{keys:c,rows:b}},b.prototype.convertDataToTargets=function(a,b){var c,d,e,f,g=this,h=g.config;return k(a)?f=Object.keys(a[0]):(f=a.keys,a=a.rows),d=f.filter(g.isNotX,g),e=f.filter(g.isX,g),d.forEach(function(c){var d=g.getXKey(c);g.isCustomX()||g.isTimeSeries()?0<=e.indexOf(d)?g.data.xs[c]=(b&&g.data.xs[c]?g.data.xs[c]:[]).concat(a.map(function(a){return a[d]}).filter(q).map(function(a,b){return g.generateTargetX(a,c,b)})):h.data_x?g.data.xs[c]=g.getOtherTargetXs():r(h.data_xs)&&(g.data.xs[c]=g.getXValuesOfXKey(d,g.data.targets)):g.data.xs[c]=a.map(function(a,b){return b})}),d.forEach(function(a){if(!g.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),(c=d.map(function(b,c){var d=h.data_idConverter(b);return{id:d,id_org:b,values:a.map(function(a,e){var f,i=a[g.getXKey(b)],j=null===a[b]||isNaN(a[b])?null:+a[b];return g.isCustomX()&&g.isCategorized()&&!p(i)?(0===c&&0===e&&(h.axis_x_categories=[]),-1===(f=h.axis_x_categories.indexOf(i))&&(f=h.axis_x_categories.length,h.axis_x_categories.push(i))):f=g.generateTargetX(i,b,e),(p(a[b])||g.data.xs[b].length<=e)&&(f=void 0),{x:f,value:j,id:d}}).filter(function(a){return l(a.x)})}})).forEach(function(a){var b;h.data_xSort&&(a.values=a.values.sort(function(a,b){return(a.x||0===a.x?a.x:1/0)-(b.x||0===b.x?b.x:1/0)})),b=0,a.values.forEach(function(a){a.index=b++}),g.data.xs[a.id].sort(function(a,b){return a-b})}),g.hasNegativeValue=g.hasNegativeValueInTargets(c),g.hasPositiveValue=g.hasPositiveValueInTargets(c),h.data_type&&g.setTargetType(g.mapToIds(c).filter(function(a){return!(a in h.data_types)}),h.data_type),c.forEach(function(a){g.addCache(a.id_org,a)}),c},b.prototype.isX=function(a){var b,c,d,e=this.config;return e.data_x&&a===e.data_x||r(e.data_xs)&&(b=e.data_xs,c=a,d=!1,Object.keys(b).forEach(function(a){b[a]===c&&(d=!0)}),d)},b.prototype.isNotX=function(a){return!this.isX(a)},b.prototype.getXKey=function(a){var b=this.config;return b.data_x?b.data_x:r(b.data_xs)?b.data_xs[a]:null},b.prototype.getXValuesOfXKey=function(a,b){var c,d=this;return(b&&r(b)?d.mapToIds(b):[]).forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},b.prototype.getXValue=function(a,b){return a in this.data.xs&&this.data.xs[a]&&q(this.data.xs[a][b])?this.data.xs[a][b]:b},b.prototype.getOtherTargetXs=function(){var a=Object.keys(this.data.xs);return a.length?this.data.xs[a[0]]:null},b.prototype.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},b.prototype.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},b.prototype.addName=function(a){var b;return a&&(b=this.config.data_names[a.id],a.name=void 0!==b?b:a.id),a},b.prototype.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},b.prototype.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},b.prototype.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},b.prototype.generateTargetX=function(a,b,c){var d=this;return d.isTimeSeries()?a?d.parseDate(a):d.parseDate(d.getXValue(b,c)):d.isCustomX()&&!d.isCategorized()?q(a)?+a:d.getXValue(b,c):c},b.prototype.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},b.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(a){return a.values.length})},b.prototype.mapToIds=function(a){return a.map(function(a){return a.id})},b.prototype.mapToTargetIds=function(a){return a?[].concat(a):this.mapToIds(this.data.targets)},b.prototype.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},b.prototype.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},b.prototype.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},b.prototype.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},b.prototype.mapTargetsToUniqueXs=function(a){var b=this.d3.set(this.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return(b=this.isTimeSeries()?b.map(function(a){return new Date(+a)}):b.map(function(a){return+a})).sort(function(a,b){return b>a?-1:a>b?1:a>=b?0:NaN})},b.prototype.addHiddenTargetIds=function(a){a=a instanceof Array?a:new Array(a);for(var b=0;b<a.length;b++)this.hiddenTargetIds.indexOf(a[b])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(a[b]))},b.prototype.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},b.prototype.addHiddenLegendIds=function(a){a=a instanceof Array?a:new Array(a);for(var b=0;b<a.length;b++)this.hiddenLegendIds.indexOf(a[b])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(a[b]))},b.prototype.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},b.prototype.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},b.prototype.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},b.prototype.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})},b.prototype.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},b.prototype.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},b.prototype.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},b.prototype.getOrderFunction=function(){var a=this.config,b=this.isOrderAsc(),c=this.isOrderDesc();if(b||c){var d=function(a,b){return a+Math.abs(b.value)};return function(a,c){var e=a.values.reduce(d,0),f=c.values.reduce(d,0);return b?f-e:e-f}}if(n(a.data_order))return a.data_order;if(k(a.data_order)){var e=a.data_order;return function(a,b){return e.indexOf(a.id)-e.indexOf(b.id)}}},b.prototype.orderTargets=function(a){var b=this.getOrderFunction();return b&&a.sort(b),a},b.prototype.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b==0})},b.prototype.filterRemoveNull=function(a){return a.filter(function(a){return q(a.value)})},b.prototype.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},b.prototype.hasDataLabel=function(){var b=this.config;return!("boolean"!=typeof b.data_labels||!b.data_labels)||!("object"!==a(b.data_labels)||!r(b.data_labels))},b.prototype.getDataLabelLength=function(a,b,c){var d=this,e=[0,0];return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=1.3*this.getBoundingClientRect()[c]}).remove(),e},b.prototype.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},b.prototype.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},b.prototype.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},b.prototype.findClosest=function(a,b){var c,d=this,f=d.config.point_sensitivity;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+e.bars+d.getTargetSelectorSuffix(a.id)+" ."+e.bar+"-"+a.index).node();!c&&d.isWithinBar(d.d3.mouse(b),b)&&(c=a)}),a.filter(function(a){return a&&!d.isBarType(a.id)}).forEach(function(a){var e=d.dist(a,b);f>e&&(f=e,c=a)}),c},b.prototype.dist=function(a,b){var c=this.config,d=c.axis_rotated?1:0,e=c.axis_rotated?0:1,f=this.circleY(a,a.index),g=this.x(a.x);return Math.sqrt(Math.pow(g-b[d],2)+Math.pow(f-b[e],2))},b.prototype.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;b>0;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},b.prototype.updateDataAttributes=function(a,b){var c=this.config["data_"+a];return void 0===b||(Object.keys(b).forEach(function(a){c[a]=b[a]}),this.redraw({withLegend:!0})),c},b.prototype.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},b.prototype.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.headers,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},b.prototype.unload=function(a,b){var c=this;b||(b=function(){}),(a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}))&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+e.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):b()},b.prototype.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(0<i.data_groups.length)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(0!==(e=i.data_groups[b].filter(function(a){return 0<=j.indexOf(a)})).length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=0>a?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a>0||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},b.prototype.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(0<i.data_groups.length)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(0!==(e=i.data_groups[b].filter(function(a){return 0<=j.indexOf(a)})).length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a>0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&0>+a||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},b.prototype.getYDomain=function(a,b,c){var d,e,f,g,i,j,k,l,m,n,o=this,p=o.config,s=a.filter(function(a){return o.axis.getId(a.id)===b}),t=c?o.filterByXDomain(s,c):s,u="y2"===b?p.axis_y2_min:p.axis_y_min,v="y2"===b?p.axis_y2_max:p.axis_y_max,w=o.getYDomainMin(t),x=o.getYDomainMax(t),y="y2"===b?p.axis_y2_center:p.axis_y_center,z=o.hasType("bar",t)&&p.bar_zerobased||o.hasType("area",t)&&p.area_zerobased,A="y2"===b?p.axis_y2_inverted:p.axis_y_inverted,B=o.hasDataLabel()&&p.axis_rotated,C=o.hasDataLabel()&&!p.axis_rotated;return w=q(u)?u:q(v)?v>w?w:v-10:w,x=q(v)?v:q(u)?x>u?x:u+10:x,0===t.length?"y2"===b?o.y2.domain():o.y.domain():(isNaN(w)&&(w=0),isNaN(x)&&(x=w),w===x&&(0>w?x=0:w=0),m=w>=0&&x>=0,n=0>=w&&0>=x,(q(u)&&m||q(v)&&n)&&(z=!1),z&&(m&&(w=0),n&&(x=0)),f=g=.1*(e=Math.abs(x-w)),void 0!==y&&(x=y+(i=Math.max(Math.abs(w),Math.abs(x))),w=y-i),B?(j=o.getDataLabelLength(w,x,"width"),k=h(o.y.range()),f+=e*((l=[j[0]/k,j[1]/k])[1]/(1-l[0]-l[1])),g+=e*(l[0]/(1-l[0]-l[1]))):C&&(j=o.getDataLabelLength(w,x,"height"),f+=o.axis.convertPixelsToAxisPadding(j[1],e),g+=o.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&r(p.axis_y_padding)&&(f=o.axis.getPadding(p.axis_y_padding,"top",f,e),g=o.axis.getPadding(p.axis_y_padding,"bottom",g,e)),"y2"===b&&r(p.axis_y2_padding)&&(f=o.axis.getPadding(p.axis_y2_padding,"top",f,e),g=o.axis.getPadding(p.axis_y2_padding,"bottom",g,e)),z&&(m&&(g=w),n&&(f=-x)),d=[w-g,x+f],A?d.reverse():d)},b.prototype.getXDomainMin=function(a){var b=this,c=b.config;return l(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},b.prototype.getXDomainMax=function(a){var b=this,c=b.config;return l(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){
return b.d3.max(a.values,function(a){return a.x})})},b.prototype.getXDomainPadding=function(b){var c,d,e,f,g=this.config,h=b[1]-b[0];return d=this.isCategorized()?0:this.hasType("bar")?1<(c=this.getMaxDataCount())?h/(c-1)/2:.5:.01*h,"object"===a(g.axis_x_padding)&&r(g.axis_x_padding)?(e=q(g.axis_x_padding.left)?g.axis_x_padding.left:d,f=q(g.axis_x_padding.right)?g.axis_x_padding.right:d):e=f="number"==typeof g.axis_x_padding?g.axis_x_padding:d,{left:e,right:f}},b.prototype.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!=0||b.isCategorized()||(e=b.isTimeSeries()?(d=new Date(.5*d.getTime()),new Date(1.5*e.getTime())):(d=0===d?1:.5*d,0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},b.prototype.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e||f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.update(),f.subX.domain(f.x.domain()),f.brush&&f.brush.updateScale(f.subX)),b&&f.x.domain(e||(!f.brush||f.brush.empty()?f.orgXDomain:f.brush.selectionAsValue())),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},b.prototype.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0],d=b[1];return a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c),d<=a[1]&&(a[0]=+a[0]-(a[1]-d),a[1]=d),a},b.prototype.drag=function(a){var b,c,d,f,g,h,i,k,l=this,m=l.config,n=l.main,o=l.d3;l.hasArcType()||m.data_selection_enabled&&m.data_selection_multiple&&(b=l.dragStart[0],c=l.dragStart[1],d=a[0],f=a[1],g=Math.min(b,d),h=Math.max(b,d),i=m.data_selection_grouped?l.margin.top:Math.min(c,f),k=m.data_selection_grouped?l.height:Math.max(c,f),n.select("."+e.dragarea).attr("x",g).attr("y",i).attr("width",h-g).attr("height",k-i),n.selectAll("."+e.shapes).selectAll("."+e.shape).filter(function(a){return m.data_selection_isselectable(a)}).each(function(a,b){var c,d,f,m,n,p,q=o.select(this),r=q.classed(e.SELECTED),s=q.classed(e.INCLUDED),t=!1;if(q.classed(e.circle))c=1*q.attr("cx"),d=1*q.attr("cy"),n=l.togglePoint,t=c>g&&h>c&&d>i&&k>d;else{if(!q.classed(e.bar))return;c=(p=j(this)).x,d=p.y,f=p.width,m=p.height,n=l.togglePath,t=!(c>h||g>c+f||d>k||i>d+m)}t^s&&(q.classed(e.INCLUDED,!s),q.classed(e.SELECTED,!r),n.call(l,!r,q,a,b))}))},b.prototype.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+e.chart).append("rect").attr("class",e.dragarea).style("opacity",.1),b.dragging=!0)},b.prototype.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+e.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+e.shape).classed(e.INCLUDED,!1),a.dragging=!1)},b.prototype.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){return("y2"===b.axis.getId(f)?d:c).call(b,a,e)}},b.prototype.yFormat=function(a){var b=this.config;return(b.axis_y_tick_format?b.axis_y_tick_format:this.defaultValueFormat)(a)},b.prototype.y2Format=function(a){var b=this.config;return(b.axis_y2_tick_format?b.axis_y2_tick_format:this.defaultValueFormat)(a)},b.prototype.defaultValueFormat=function(a){return q(a)?+a:""},b.prototype.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},b.prototype.dataLabelFormat=function(b){var c=this.config.data_labels,d=function(a){return q(a)?+a:""};return"function"==typeof c.format?c.format:"object"===a(c.format)?c.format[b]?!0===c.format[b]?d:c.format[b]:function(){return""}:d},b.prototype.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",e.grid),b.grid_x_show&&a.grid.append("g").attr("class",e.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",e.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",e.xgridFocus).append("line").attr("class",e.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},b.prototype.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",e.grid+" "+e.gridLines),a.gridLines.append("g").attr("class",e.xgridLines),a.gridLines.append("g").attr("class",e.ygridLines),a.xgridLines=b.selectAll([])},b.prototype.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,f=b.generateGridData(c.grid_x_type,b.x),g=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-g},y2:function(a){return b.x(a)-g}}:{x1:function(a){return b.x(a)+g},x2:function(a){return b.x(a)+g},y1:0,y2:b.height},b.xgridAttr.opacity=function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1};var h=b.main.select("."+e.xgrids).selectAll("."+e.xgrid).data(f),i=h.enter().append("line").attr("class",e.xgrid).attr("x1",b.xgridAttr.x1).attr("x2",b.xgridAttr.x2).attr("y1",b.xgridAttr.y1).attr("y2",b.xgridAttr.y2).style("opacity",0);b.xgrid=i.merge(h),a||b.xgrid.attr("x1",b.xgridAttr.x1).attr("x2",b.xgridAttr.x2).attr("y1",b.xgridAttr.y1).attr("y2",b.xgridAttr.y2).style("opacity",b.xgridAttr.opacity),h.exit().remove()},b.prototype.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks),d=a.main.select("."+e.ygrids).selectAll("."+e.ygrid).data(c),f=d.enter().append("line").attr("class",e.ygrid);a.ygrid=f.merge(d),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),d.exit().remove(),a.smoothLines(a.ygrid,"grid")},b.prototype.gridTextAnchor=function(a){return a.position?a.position:"end"},b.prototype.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},b.prototype.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},b.prototype.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},b.prototype.updateGrid=function(a){var b,c,d,f,g=this,h=g.main,i=g.config,j=g.xv.bind(g),k=g.yv.bind(g),l=g.xGridTextX.bind(g),m=g.yGridTextX.bind(g);g.grid.style("visibility",g.hasArcType()?"hidden":"visible"),h.select("line."+e.xgridFocus).style("visibility","hidden"),i.grid_x_show&&g.updateXGrid(),(c=(b=h.select("."+e.xgridLines).selectAll("."+e.xgridLine).data(i.grid_x_lines)).enter().append("g").attr("class",function(a){return e.xgridLine+(a["class"]?" "+a["class"]:"")})).append("line").attr("x1",i.axis_rotated?0:j).attr("x2",i.axis_rotated?g.width:j).attr("y1",i.axis_rotated?j:0).attr("y2",i.axis_rotated?j:g.height).style("opacity",0),c.append("text").attr("text-anchor",g.gridTextAnchor).attr("transform",i.axis_rotated?"":"rotate(-90)").attr("x",i.axis_rotated?m:l).attr("y",j).attr("dx",g.gridTextDx).attr("dy",-5).style("opacity",0),g.xgridLines=c.merge(b),b.exit().transition().duration(a).style("opacity",0).remove(),i.grid_y_show&&g.updateYGrid(),(f=(d=h.select("."+e.ygridLines).selectAll("."+e.ygridLine).data(i.grid_y_lines)).enter().append("g").attr("class",function(a){return e.ygridLine+(a["class"]?" "+a["class"]:"")})).append("line").attr("x1",i.axis_rotated?k:0).attr("x2",i.axis_rotated?k:g.width).attr("y1",i.axis_rotated?0:k).attr("y2",i.axis_rotated?g.height:k).style("opacity",0),f.append("text").attr("text-anchor",g.gridTextAnchor).attr("transform",i.axis_rotated?"rotate(-90)":"").attr("x",i.axis_rotated?l:m).attr("y",k).attr("dx",g.gridTextDx).attr("dy",-5).style("opacity",0),g.ygridLines=f.merge(d),g.ygridLines.select("line").transition().duration(a).attr("x1",i.axis_rotated?k:0).attr("x2",i.axis_rotated?k:g.width).attr("y1",i.axis_rotated?0:k).attr("y2",i.axis_rotated?g.height:k).style("opacity",1),g.ygridLines.select("text").transition().duration(a).attr("x",i.axis_rotated?g.xGridTextX.bind(g):g.yGridTextX.bind(g)).attr("y",k).text(function(a){return a.text}).style("opacity",1),d.exit().transition().duration(a).style("opacity",0).remove()},b.prototype.redrawGrid=function(a,b){var c=this,d=c.config,e=c.xv.bind(c),f=c.xgridLines.select("line"),g=c.xgridLines.select("text");return[(a?f.transition(b):f).attr("x1",d.axis_rotated?0:e).attr("x2",d.axis_rotated?c.width:e).attr("y1",d.axis_rotated?e:0).attr("y2",d.axis_rotated?e:c.height).style("opacity",1),(a?g.transition(b):g).attr("x",d.axis_rotated?c.yGridTextX.bind(c):c.xGridTextX.bind(c)).attr("y",e).text(function(a){return a.text}).style("opacity",1)]},b.prototype.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&q(a.value)}),f=b.main.selectAll("line."+e.xgridFocus),g=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(f.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",g).attr(c.axis_rotated?"y2":"x2",g),b.smoothLines(f,"grid")))},b.prototype.hideXGridFocus=function(){this.main.select("line."+e.xgridFocus).style("visibility","hidden")},b.prototype.updateXgridFocus=function(){var a=this.config;this.main.select("line."+e.xgridFocus).attr("x1",a.axis_rotated?0:-10).attr("x2",a.axis_rotated?this.width:-10).attr("y1",a.axis_rotated?-10:0).attr("y2",a.axis_rotated?-10:this.height)},b.prototype.generateGridData=function(a,b){var c,d,f,g,h=[],i=this.main.select("."+e.axisX).selectAll(".tick").size();if("year"===a)for(d=(c=this.getXDomain())[0].getFullYear(),f=c[1].getFullYear(),g=d;f>=g;g++)h.push(new Date(g+"-01-01 00:00:00"));else(h=b.ticks(10)).length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}));return h},b.prototype.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])&&(c=!0)}),c}:function(){return!0}},b.prototype.removeGridLines=function(a,b){var c=this.config,d=this.getGridFilterToRemove(a),f=function(a){return!d(a)},g=b?e.xgridLines:e.ygridLines,h=b?e.xgridLine:e.ygridLine;this.main.select("."+g).selectAll("."+h).filter(d).transition().duration(c.transition_duration).style("opacity",0).remove(),b?c.grid_x_lines=c.grid_x_lines.filter(f):c.grid_y_lines=c.grid_y_lines.filter(f)},b.prototype.initEventRect=function(){var a=this,b=a.config;a.main.select("."+e.chart).append("g").attr("class",e.eventRects).style("fill-opacity",0),a.eventRect=a.main.select("."+e.eventRects).append("rect").attr("class",e.eventRect),b.zoom_enabled&&a.zoom&&(a.eventRect.call(a.zoom).on("dblclick.zoom",null),b.zoom_initialRange&&a.eventRect.transition().duration(0).call(a.zoom.transform,a.zoomTransform(b.zoom_initialRange)))},b.prototype.redrawEventRect=function(){function a(){d.svg.select("."+e.eventRect).style("cursor",null),d.hideXGridFocus(),d.hideTooltip(),d.unexpandCircles(),d.unexpandBars()}var b,c,d=this,f=d.d3,g=d.config;b=d.width,c=d.height,d.main.select("."+e.eventRects).style("cursor",g.zoom_enabled?g.axis_rotated?"ns-resize":"ew-resize":null),d.eventRect.attr("x",0).attr("y",0).attr("width",b).attr("height",c).on("mouseout",g.interaction_enabled?function(){g&&(d.hasArcType()||a())}:null).on("mousemove",g.interaction_enabled?function(){var b,c,h,i;d.dragging||d.hasArcType(b)||(b=d.filterTargetsToShow(d.data.targets),c=f.mouse(this),h=d.findClosestFromTargets(b,c),!d.mouseover||h&&h.id===d.mouseover.id||(g.data_onmouseout.call(d.api,d.mouseover),d.mouseover=void 0),h?(i=(d.isScatterType(h)||!g.tooltip_grouped?[h]:d.filterByX(b,h.x)).map(function(a){return d.addName(a)}),d.showTooltip(i,this),g.point_focus_expand_enabled&&(d.unexpandCircles(),i.forEach(function(a){d.expandCircles(a.index,a.id,!1)})),d.expandBars(h.index,h.id,!0),d.showXGridFocus(i),(d.isBarType(h.id)||d.dist(h,c)<g.point_sensitivity)&&(d.svg.select("."+e.eventRect).style("cursor","pointer"),d.mouseover||(g.data_onmouseover.call(d.api,h),d.mouseover=h))):a())}:null).on("click",g.interaction_enabled?function(){var a,b,c;d.hasArcType(a)||(a=d.filterTargetsToShow(d.data.targets),b=f.mouse(this),(c=d.findClosestFromTargets(a,b))&&(d.isBarType(c.id)||d.dist(c,b)<g.point_sensitivity)&&(d.isScatterType(c)||!g.data_selection_grouped?[c]:d.filterByX(a,c.x)).forEach(function(a){d.main.selectAll("."+e.shapes+d.getTargetSelectorSuffix(a.id)).selectAll("."+e.shape+"-"+a.index).each(function(){(g.data_selection_grouped||d.isWithinShape(this,a))&&(d.toggleShape(this,a,a.index),g.data_onclick.call(d.api,a,this))})}))}:null).call(g.interaction_enabled&&g.data_selection_draggable&&d.drag?f.drag().on("drag",function(){d.drag(f.mouse(this))}).on("start",function(){d.dragstart(f.mouse(this))}).on("end",function(){d.dragend()}):function(){})},b.prototype.getMousePosition=function(a){return[this.x(a.x),this.getYScale(a.id)(a.value)]},b.prototype.dispatchEvent=function(a,b){var c="."+e.eventRect,d=this.main.select(c).node(),f=d.getBoundingClientRect(),g=f.left+(b?b[0]:0),h=f.top+(b?b[1]:0),i=document.createEvent("MouseEvents");i.initMouseEvent(a,!0,!0,window,0,g,h,g,h,!1,!1,!1,!1,0,null),d.dispatchEvent(i)},b.prototype.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},b.prototype.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},b.prototype.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},b.prototype.transformLegend=function(a){(a?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},b.prototype.updateLegendStep=function(a){this.legendStep=a},b.prototype.updateLegendItemWidth=function(a){this.legendItemWidth=a},b.prototype.updateLegendItemHeight=function(a){this.legendItemHeight=a},b.prototype.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},b.prototype.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},b.prototype.opacityForLegend=function(a){return a.classed(e.legendItemHidden)?null:1},b.prototype.opacityForUnfocusedLegend=function(a){return a.classed(e.legendItemHidden)?null:.3},b.prototype.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+e.legendItem).filter(function(b){return 0<=a.indexOf(b)}).classed(e.legendItemFocused,b).transition().duration(100).style("opacity",function(){return(b?c.opacityForLegend:c.opacityForUnfocusedLegend).call(c,c.d3.select(this))})},b.prototype.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+e.legendItem).classed(e.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},b.prototype.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},b.prototype.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&m(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},b.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},b.prototype.updateLegend=function(a,b,c){function d(b,c,d){function f(a,b){b||(g=(q-F-p)/2)<D&&(g=(q-p)/2,F=0,L++),K[a]=L,J[L]=x.isLegendInset?10:g,G[a]=F,F+=p}var g,h,i,j,k=0===d,l=d===a.length-1,m=(i=b,j=c,x.legendItemTextBox[j]||(x.legendItemTextBox[j]=x.getTextRect(i.textContent,e.legendItem,i)),x.legendItemTextBox[j]),n=m.width+E+(!l||x.isLegendRight||x.isLegendInset?A:0)+y.legend_padding,o=m.height+z,p=x.isLegendRight||x.isLegendInset?o:n,q=x.isLegendRight||x.isLegendInset?x.getLegendHeight():x.getLegendWidth();k&&(C=B=L=F=0),!y.legend_show||x.isLegendToShow(c)?(H[c]=n,I[c]=o,(!B||n>=B)&&(B=n),(!C||o>=C)&&(C=o),h=x.isLegendRight||x.isLegendInset?C:B,y.legend_equally?(Object.keys(H).forEach(function(a){H[a]=B}),Object.keys(I).forEach(function(a){I[a]=C}),(g=(q-h*a.length)/2)<D?(L=F=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)):H[c]=I[c]=K[c]=G[c]=0}var f,g,h,j,k,m,n,o,p,q,r,s,t,u,v,w,x=this,y=x.config,z=4,A=10,B=0,C=0,D=10,E=y.legend_item_tile_width+5,F=0,G={},H={},I={},J=[0],K={},L=0;a=a.filter(function(a){return!l(y.data_names[a])||null!==y.data_names[a]}),r=i(b=b||{},"withTransition",!0),s=i(b,"withTransitionForTransform",!0),x.isLegendInset&&(L=y.legend_inset_step?y.legend_inset_step:a.length,x.updateLegendStep(L)),j=x.isLegendRight?(f=function(a){return B*K[a]},function(a){return J[K[a]]+G[a]}):x.isLegendInset?(f=function(a){return B*K[a]+10},function(a){return J[K[a]]+G[a]}):(f=function(a){return J[K[a]]+G[a]},function(a){return C*K[a]}),g=function(a,b){return f(a,b)+4+y.legend_item_tile_width},k=function(a,b){return j(a,b)+9},h=function(a,b){return f(a,b)},m=function(a,b){return j(a,b)-5},n=function(a,b){return f(a,b)-2},o=function(a,b){return f(a,b)-2+y.legend_item_tile_width},p=function(a,b){return j(a,b)+4},(q=x.legend.selectAll("."+e.legendItem).data(a).enter().append("g").attr("class",function(a){return x.generateClass(e.legendItem,a)}).style("visibility",function(a){return x.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){y.legend_item_onclick?y.legend_item_onclick.call(x,a):x.d3.event.altKey?(x.api.hide(),x.api.show(a)):(x.api.toggle(a),x.isTargetToShow(a)?x.api.focus(a):x.api.revert())}).on("mouseover",function(a){y.legend_item_onmouseover?y.legend_item_onmouseover.call(x,a):(x.d3.select(this).classed(e.legendItemFocused,!0),!x.transiting&&x.isTargetToShow(a)&&x.api.focus(a))}).on("mouseout",function(a){y.legend_item_onmouseout?y.legend_item_onmouseout.call(x,a):(x.d3.select(this).classed(e.legendItemFocused,!1),x.api.revert())})).append("text").text(function(a){return l(y.data_names[a])?y.data_names[a]:a}).each(function(a,b){d(this,a,b)}).style("pointer-events","none").attr("x",x.isLegendRight||x.isLegendInset?g:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:k),q.append("rect").attr("class",e.legendItemEvent).style("fill-opacity",0).attr("x",x.isLegendRight||x.isLegendInset?h:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:m),q.append("line").attr("class",e.legendItemTile).style("stroke",x.color).style("pointer-events","none").attr("x1",x.isLegendRight||x.isLegendInset?n:-200).attr("y1",x.isLegendRight||x.isLegendInset?-200:p).attr("x2",x.isLegendRight||x.isLegendInset?o:-200).attr("y2",x.isLegendRight||x.isLegendInset?-200:p).attr("stroke-width",y.legend_item_tile_height),w=x.legend.select("."+e.legendBackground+" rect"),x.isLegendInset&&B>0&&0===w.size()&&(w=x.legend.insert("g","."+e.legendItem).attr("class",e.legendBackground).append("rect")),t=x.legend.selectAll("text").data(a).text(function(a){return l(y.data_names[a])?y.data_names[a]:a}).each(function(a,b){d(this,a,b)}),(r?t.transition():t).attr("x",g).attr("y",k),u=x.legend.selectAll("rect."+e.legendItemEvent).data(a),(r?u.transition():u).attr("width",function(a){return H[a]}).attr("height",function(a){return I[a]}).attr("x",h).attr("y",m),v=x.legend.selectAll("line."+e.legendItemTile).data(a),(r?v.transition():v).style("stroke",x.levelColor?function(a){return x.levelColor(x.cache[a].values[0].value)}:x.color).attr("x1",n).attr("y1",p).attr("x2",o).attr("y2",p),w&&(r?w.transition():w).attr("height",x.getLegendHeight()-12).attr("width",B*(L+1)+10),x.legend.selectAll("."+e.legendItem).classed(e.legendItemHidden,function(a){return!x.isTargetToShow(a)}),x.updateLegendItemWidth(B),x.updateLegendItemHeight(C),x.updateLegendStep(L),x.updateSizes(),x.updateScales(),x.updateSvgSize(),x.transformAll(s,c),x.legendHasRendered=!0},b.prototype.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",e.regions)},b.prototype.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible");var d=b.main.select("."+e.regions).selectAll("."+e.region).data(c.regions),f=d.enter().append("rect").attr("x",b.regionX.bind(b)).attr("y",b.regionY.bind(b)).attr("width",b.regionWidth.bind(b)).attr("height",b.regionHeight.bind(b)).style("fill-opacity",0);b.mainRegion=f.merge(d).attr("class",b.classRegion.bind(b)),d.exit().transition().duration(a).style("opacity",0).remove()},b.prototype.redrawRegion=function(a,b){var c=this,d=c.mainRegion;return[(a?d.transition(b):d).attr("x",c.regionX.bind(c)).attr("y",c.regionY.bind(c)).attr("width",c.regionWidth.bind(c)).attr("height",c.regionHeight.bind(c)).style("fill-opacity",function(a){return q(a.opacity)?a.opacity:.1})]},b.prototype.regionX=function(a){var b=this,c=b.config,d="y"===a.axis?b.y:b.y2;return"y"===a.axis||"y2"===a.axis?c.axis_rotated&&"start"in a?d(a.start):0:c.axis_rotated?0:"start"in a?b.x(b.isTimeSeries()?b.parseDate(a.start):a.start):0},b.prototype.regionY=function(a){var b=this,c=b.config,d="y"===a.axis?b.y:b.y2;return"y"===a.axis||"y2"===a.axis?c.axis_rotated?0:"end"in a?d(a.end):0:c.axis_rotated&&"start"in a?b.x(b.isTimeSeries()?b.parseDate(a.start):a.start):0},b.prototype.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return(b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width)<e?0:b-e},b.prototype.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return(b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height)<e?0:b-e},b.prototype.isRegionOnX=function(a){return!a.axis||"x"===a.axis},b.prototype.getScale=function(a,b,c){return(c?this.d3.scaleTime():this.d3.scaleLinear()).range([a,b])},b.prototype.getX=function(a,b,c,d){var e,f=this.getScale(a,b,this.isTimeSeries()),g=c?f.domain(c):f;for(e in f=this.isCategorized()?(d=d||function(){return 0},function(a,b){var c=g(a)+d(a);return b?c:Math.ceil(c)}):function(a,b){var c=g(a);return b?c:Math.ceil(c)},g)f[e]=g[e];return f.orgDomain=function(){return g.domain()},this.isCategorized()&&(f.domain=function(a){return arguments.length?(g.domain(a),f):[(a=this.orgDomain())[0],a[1]+1]}),f},b.prototype.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},b.prototype.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},b.prototype.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},b.prototype.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||a.brush&&a.brush.updateScale(a.subX),a.updateArc&&a.updateArc()},b.prototype.selectPoint=function(a,b,c){var d=this,f=d.config,g=(f.axis_rotated?d.circleY:d.circleX).bind(d),h=(f.axis_rotated?d.circleX:d.circleY).bind(d),i=d.pointSelectR.bind(d);f.data_onselected.call(d.api,b,a.node()),d.main.select("."+e.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+e.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(e.selectedCircle,c)}).attr("cx",g).attr("cy",h).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",i)},b.prototype.unselectPoint=function(a,b,c){this.config.data_onunselected.call(this.api,b,a.node()),this.main.select("."+e.selectedCircles+this.getTargetSelectorSuffix(b.id)).selectAll("."+e.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},b.prototype.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},b.prototype.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},b.prototype.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.color(b)})},b.prototype.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},b.prototype.getToggle=function(a,b){var c;return"circle"===a.nodeName?c=this.isStepType(b)?function(){}:this.togglePoint:"path"===a.nodeName&&(c=this.togglePath),c},b.prototype.toggleShape=function(a,b,c){var d=this,f=d.d3,g=d.config,h=f.select(a),i=h.classed(e.SELECTED),j=d.getToggle(a,b).bind(d);g.data_selection_enabled&&g.data_selection_isselectable(b)&&(g.data_selection_multiple||d.main.selectAll("."+e.shapes+(g.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+e.shape).each(function(a,b){var c=f.select(this);c.classed(e.SELECTED)&&j(!1,c.classed(e.SELECTED,!1),a,b)}),h.classed(e.SELECTED,!i),j(!i,h,b,c))},b.prototype.initBar=function(){this.main.select("."+e.chart).append("g").attr("class",e.chartBars)},b.prototype.updateTargetsForBar=function(a){var b=this,c=b.config,d=b.classChartBar.bind(b),f=b.classBars.bind(b),g=b.classFocus.bind(b);b.main.select("."+e.chartBars).selectAll("."+e.chartBar).data(a).attr("class",function(a){return d(a)+g(a)}).enter().append("g").attr("class",d).style("pointer-events","none").append("g").attr("class",f).style("cursor",function(a){return c.data_selection_isselectable(a)?"pointer":null})},b.prototype.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),f=b.initialOpacity.bind(b),g=function(a){return b.color(a.id)},h=b.main.selectAll("."+e.bars).selectAll("."+e.bar).data(c),i=h.enter().append("path").attr("class",d).style("stroke",g).style("fill",g);b.mainBar=i.merge(h).style("opacity",f),h.exit().transition().duration(a).style("opacity",0)},b.prototype.redrawBar=function(a,b,c){return[(b?this.mainBar.transition(c):this.mainBar).attr("d",a).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},b.prototype.getBarW=function(a,b){var c=this.config,d="number"==typeof c.bar_width?c.bar_width:b?a.tickInterval()*c.bar_width_ratio/b:0;return c.bar_width_max&&d>c.bar_width_max?c.bar_width_max:d},b.prototype.getBars=function(a,b){return(b?this.main.selectAll("."+e.bars+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+e.bar+(q(a)?"-"+a:""))},b.prototype.expandBars=function(a,b,c){c&&this.unexpandBars(),this.getBars(a,b).classed(e.EXPANDED,!0)},b.prototype.unexpandBars=function(a){this.getBars(a).classed(e.EXPANDED,!1)},b.prototype.generateDrawBar=function(a,b){var c=this.config,d=this.generateGetBarPoints(a,b);return function(a,b){var e=d(a,b),f=c.axis_rotated?1:0,g=c.axis_rotated?0:1;return"M "+e[0][f]+","+e[0][g]+" L"+e[1][f]+","+e[1][g]+" L"+e[2][f]+","+e[2][g]+" L"+e[3][f]+","+e[3][g]+" z"}},b.prototype.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=f*(c.config.bar_space/2),k=b?c.getSubYScale:c.getYScale;return function(a,b){var d=k.call(c,a.id)(0),e=i(a,b)||d,l=g(a),m=h(a);return c.config.axis_rotated&&(0<a.value&&d>m||a.value<0&&m>d)&&(m=d),[[l+j,e],[l+j,m-(d-e)],[l+f-j,m-(d-e)],[l+f-j,e]]}},b.prototype.isWithinBar=function(a,b){var c=b.getBoundingClientRect(),d=b.pathSegList.getItem(0),e=b.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=f+c.width+2,i=g+c.height+2,j=g-2;return f-2<a[0]&&a[0]<h&&j<a[1]&&a[1]<i},b.prototype.getShapeIndices=function(a){var b,c,d=this.config,e={},f=0;return this.filterTargetsToShow(this.data.targets.filter(a,this)).forEach(function(a){for(b=0;b<d.data_groups.length;b++)if(!(d.data_groups[b].indexOf(a.id)<0))for(c=0;c<d.data_groups[b].length;c++)if(d.data_groups[b][c]in e){e[a.id]=e[d.data_groups[b][c]];break}p(e[a.id])&&(e[a.id]=f++)}),e.__max__=f-1,e},b.prototype.getShapeX=function(a,b,c,d){var e=d?this.subX:this.x;return function(d){var f=d.id in c?c[d.id]:0;return d.x||0===d.x?e(d.x)-a*(b/2-f):0}},b.prototype.getShapeY=function(a){var b=this;return function(c){return(a?b.getSubYScale(c.id):b.getYScale(c.id))(c.value)}},b.prototype.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&(void 0!==e[g]&&+e[g].x==+a.x||(g=-1,e.forEach(function(b,c){b.x===a.x&&(g=c)})),g in e&&0<=e[g].value*a.value&&(j+=h(e[g].value)-i))}),j}},b.prototype.isWithinShape=function(a,b){var c,d=this,f=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=!f.classed(e.bar)||d.isWithinBar(d.d3.mouse(a),a)):c=!1,c},b.prototype.getInterpolate=function(a){var b=this,c=b.d3,d={linear:c.curveLinear,"linear-closed":c.curveLinearClosed,basis:c.curveBasis,"basis-open":c.curveBasisOpen,"basis-closed":c.curveBasisClosed,bundle:c.curveBundle,cardinal:c.curveCardinal,"cardinal-open":c.curveCardinalOpen,"cardinal-closed":c.curveCardinalClosed,monotone:c.curveMonotoneX,step:c.curveStep,"step-before":c.curveStepBefore,"step-after":c.curveStepAfter};return b.isSplineType(a)?d[b.config.spline_interpolation_type]||d.cardinal:b.isStepType(a)?d[b.config.line_step_type]:d.linear},b.prototype.initLine=function(){this.main.select("."+e.chart).append("g").attr("class",e.chartLines)},b.prototype.updateTargetsForLine=function(a){var b,c=this,d=c.config,f=c.classChartLine.bind(c),g=c.classLines.bind(c),h=c.classAreas.bind(c),i=c.classCircles.bind(c),j=c.classFocus.bind(c);(b=c.main.select("."+e.chartLines).selectAll("."+e.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}).enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none")).append("g").attr("class",g),
b.append("g").attr("class",h),b.append("g").attr("class",function(a){return c.generateClass(e.selectedCircles,a.id)}),b.append("g").attr("class",i).style("cursor",function(a){return d.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){c.main.selectAll("."+e.selectedCircles+c.getTargetSelectorSuffix(a.id)).selectAll("."+e.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},b.prototype.updateLine=function(a){var b=this,c=b.main.selectAll("."+e.lines).selectAll("."+e.line).data(b.lineData.bind(b)),d=c.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color);b.mainLine=d.merge(c).style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),c.exit().transition().duration(a).style("opacity",0)},b.prototype.redrawLine=function(a,b,c){return[(b?this.mainLine.transition(c):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},b.prototype.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return 0<d.data_groups.length?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,h=b?c.subX:c.x,i=g.call(c,a.id),j=0,k=0;return(c.isLineType(a)?d.data_regions[a.id]?c.lineWithRegions(f,h,i,d.data_regions[a.id]):(c.isStepType(a)&&(f=c.convertValuesToStep(f)),e.curve(c.getInterpolate(a))(f)):(f[0]&&(j=h(f[0].x),k=i(f[0].value)),d.axis_rotated?"M "+k+" "+j:"M "+j+" "+k))||"M 0 0"}},b.prototype.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},b.prototype.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,m,n,o,q,r,s,t=this,u=t.config,v="M",w=t.isCategorized()?.5:0,x=[];if(l(d))for(g=0;g<d.length;g++)x[g]={},p(d[g].start)?x[g].start=a[0].x:x[g].start=t.isTimeSeries()?t.parseDate(d[g].start):d[g].start,p(d[g].end)?x[g].end=a[a.length-1].x:x[g].end=t.isTimeSeries()?t.parseDate(d[g].end):d[g].end;for(r=u.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},s=u.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=t.isTimeSeries()?function(a,d,e,g){var h=a.x.getTime(),i=d.x-a.x,j=new Date(h+i*e),l=new Date(h+i*(e+g));return f(u.axis_rotated?[[c(k(e)),b(j)],[c(k(e+g)),b(l)]]:[[b(j),c(k(e))],[b(l),c(k(e+g))]])}:function(a,d,e,g){return f(u.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]])},g=0;g<a.length;g++){if(p(x)||!e(a[g].x,x))v+=" "+r(a[g])+" "+s(a[g]);else for(j=t.getScale(a[g-1].x+w,a[g].x+w,t.isTimeSeries()),k=t.getScale(a[g-1].value,a[g].value),m=b(a[g].x)-b(a[g-1].x),n=c(a[g].value)-c(a[g-1].value),q=2*(o=2/Math.sqrt(Math.pow(m,2)+Math.pow(n,2))),h=o;1>=h;h+=q)v+=i(a[g-1],a[g],h,o);a[g].x}return v},b.prototype.updateArea=function(a){var b=this,c=b.d3,d=b.main.selectAll("."+e.areas).selectAll("."+e.area).data(b.lineData.bind(b)),f=d.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0});b.mainArea=f.merge(d).style("opacity",b.orgAreaOpacity),d.exit().transition().duration(a).style("opacity",0)},b.prototype.redrawArea=function(a,b,c){return[(b?this.mainArea.transition(c):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},b.prototype.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return 0<d.data_groups.length?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return 0<d.data_groups.length?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(d.area_above?0:i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var b=d.line_connectNull?c.filterRemoveNull(a.values):a.values,f=0,g=0;return(c.isAreaType(a)?(c.isStepType(a)&&(b=c.convertValuesToStep(b)),e.curve(c.getInterpolate(a))(b)):(b[0]&&(f=c.x(b[0].x),g=c.getYScale(a.id)(b[0].value)),d.axis_rotated?"M "+g+" "+f:"M "+f+" "+g))||"M 0 0"}},b.prototype.getAreaBaseValue=function(){return 0},b.prototype.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},b.prototype.updateCircle=function(a,b){var c=this,d=c.main.selectAll("."+e.circles).selectAll("."+e.circle).data(c.lineOrScatterData.bind(c)),f=d.enter().append("circle").attr("class",c.classCircle.bind(c)).attr("cx",a).attr("cy",b).attr("r",c.pointR.bind(c)).style("fill",c.color);c.mainCircle=f.merge(d).style("opacity",c.initialOpacityForCircle.bind(c)),d.exit().style("opacity",0)},b.prototype.redrawCircle=function(a,b,c,d){var f=this,g=f.main.selectAll("."+e.selectedCircle);return[(c?f.mainCircle.transition(d):f.mainCircle).style("opacity",this.opacityForCircle.bind(f)).style("fill",f.color).attr("cx",a).attr("cy",b),(c?g.transition(d):g).attr("cx",a).attr("cy",b)]},b.prototype.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},b.prototype.updateCircleY=function(){var a,b,c=this;0<c.config.data_groups.length?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},b.prototype.getCircles=function(a,b){return(b?this.main.selectAll("."+e.circles+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+e.circle+(q(a)?"-"+a:""))},b.prototype.expandCircles=function(a,b,c){var d=this.pointExpandedR.bind(this);c&&this.unexpandCircles(),this.getCircles(a,b).classed(e.EXPANDED,!0).attr("r",d)},b.prototype.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(e.EXPANDED)}).classed(e.EXPANDED,!1).attr("r",c)},b.prototype.pointR=function(a){var b=this.config;return this.isStepType(a)?0:n(b.point_r)?b.point_r(a):b.point_r},b.prototype.pointExpandedR=function(a){var b=this.config;return b.point_focus_expand_enabled?n(b.point_focus_expand_r)?b.point_focus_expand_r(a):b.point_focus_expand_r?b.point_focus_expand_r:1.75*this.pointR(a):this.pointR(a)},b.prototype.pointSelectR=function(a){var b=this.config;return n(b.point_select_r)?b.point_select_r(a):b.point_select_r?b.point_select_r:4*this.pointR(a)},b.prototype.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},b.prototype.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},b.prototype.getCurrentWidth=function(){var a=this.config;return a.size_width?a.size_width:this.getParentWidth()},b.prototype.getCurrentHeight=function(){var a=this.config,b=a.size_height?a.size_height:this.getParentHeight();return b>0?b:320/(this.hasType("gauge")&&!a.gauge_fullCircle?2:1)},b.prototype.getCurrentPaddingTop=function(){var a=this.config,b=q(a.padding_top)?a.padding_top:0;return this.title&&this.title.node()&&(b+=this.getTitlePadding()),b},b.prototype.getCurrentPaddingBottom=function(){var a=this.config;return q(a.padding_bottom)?a.padding_bottom:0},b.prototype.getCurrentPaddingLeft=function(a){var b=this.config;return q(b.padding_left)?b.padding_left:b.axis_rotated?!b.axis_x_show||b.axis_x_inner?1:Math.max(g(this.getAxisWidthByAxisId("x",a)),40):!b.axis_y_show||b.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:g(this.getAxisWidthByAxisId("y",a))},b.prototype.getCurrentPaddingRight=function(){var a=this,b=a.config,c=a.isLegendRight?a.getLegendWidth()+20:0;return q(b.padding_right)?b.padding_right+1:b.axis_rotated?10+c:!b.axis_y2_show||b.axis_y2_inner?2+c+(a.axis.getY2AxisLabelPosition().isOuter?20:0):g(a.getAxisWidthByAxisId("y2"))+c},b.prototype.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},b.prototype.getParentWidth=function(){return this.getParentRectValue("width")},b.prototype.getParentHeight=function(){return this.getParentRectValue("height")},b.prototype.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,f=c.axis_rotated?e.axisX:e.axisY,g=b.main.select("."+f).node(),h=g&&d?g.getBoundingClientRect():{right:0},i=b.selectChart.node().getBoundingClientRect(),j=b.hasArcType(),k=h.right-i.left-(j?0:b.getCurrentPaddingLeft(a));return k>0?k:0},b.prototype.getAxisWidthByAxisId=function(a,b){var c=this.axis.getLabelPositionById(a);return this.axis.getMaxTickWidth(a,b)+(c.isInner?20:40)},b.prototype.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-Math.abs(c.axis_x_tick_rotate))/180)),"y"===a&&c.axis_rotated&&c.axis_y_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-Math.abs(c.axis_y_tick_rotate))/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},b.prototype.initBrush=function(a){var b=this,c=b.d3;return b.brush=(b.config.axis_rotated?c.brushY():c.brushX()).on("brush",function(){var a=c.event.sourceEvent;a&&"zoom"===a.type||b.redrawForBrush()}).on("end",function(){var a=c.event.sourceEvent;a&&"zoom"===a.type||b.brush.empty()&&a&&"end"!==a.type&&b.brush.clear()}),b.brush.updateExtent=function(){var a,c=this.scale.range();return a=b.config.axis_rotated?[[0,c[0]],[b.width2,c[1]]]:[[c[0],0],[c[1],b.height2]],this.extent(a),this},b.brush.updateScale=function(a){return this.scale=a,this},b.brush.update=function(a){this.updateScale(a||b.subX).updateExtent(),b.context.select("."+e.brush).call(this)},b.brush.clear=function(){b.context.select("."+e.brush).call(b.brush.move,null)},b.brush.selection=function(){return c.brushSelection(b.context.select("."+e.brush).node())},b.brush.selectionAsValue=function(a,c){var d,f;return a?(b.context&&(d=[this.scale(a[0]),this.scale(a[1])],f=b.context.select("."+e.brush),c&&(f=f.transition()),b.brush.move(f,d)),[]):(d=b.brush.selection()||[0,0],[this.scale.invert(d[0]),this.scale.invert(d[1])])},b.brush.empty=function(){var a=b.brush.selection();return!a||a[0]===a[1]},b.brush.updateScale(a)},b.prototype.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context")),d=b.subchart_show?"visible":"hidden";c.style("visibility",d),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",e.chart),c.select("."+e.chart).append("g").attr("class",e.chartBars),c.select("."+e.chart).append("g").attr("class",e.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",e.brush),a.axes.subx=c.append("g").attr("class",e.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis)},b.prototype.initSubchartBrush=function(){this.initBrush(this.subX).updateExtent(),this.context.select("."+e.brush).call(this.brush)},b.prototype.updateTargetsForSubchart=function(a){var b,c,d,f,g=this,h=g.context,i=g.config,j=g.classChartBar.bind(g),k=g.classBars.bind(g),l=g.classChartLine.bind(g),m=g.classLines.bind(g),n=g.classAreas.bind(g);i.subchart_show&&((d=(f=h.select("."+e.chartBars).selectAll("."+e.chartBar).data(a)).enter().append("g").style("opacity",0)).merge(f).attr("class",j),d.append("g").attr("class",k),(b=(c=h.select("."+e.chartLines).selectAll("."+e.chartLine).data(a)).enter().append("g").style("opacity",0)).merge(c).attr("class",l),b.append("g").attr("class",m),b.append("g").attr("class",n),h.selectAll("."+e.brush+" rect").attr(i.axis_rotated?"width":"height",i.axis_rotated?g.width2:g.height2))},b.prototype.updateBarForSubchart=function(a){var b=this,c=b.context.selectAll("."+e.bars).selectAll("."+e.bar).data(b.barData.bind(b)),d=c.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color);c.exit().transition().duration(a).style("opacity",0).remove(),b.contextBar=d.merge(c).style("opacity",b.initialOpacity.bind(b))},b.prototype.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)},b.prototype.updateLineForSubchart=function(a){var b=this,c=b.context.selectAll("."+e.lines).selectAll("."+e.line).data(b.lineData.bind(b)),d=c.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color);c.exit().transition().duration(a).style("opacity",0).remove(),b.contextLine=d.merge(c).style("opacity",b.initialOpacity.bind(b))},b.prototype.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)},b.prototype.updateAreaForSubchart=function(a){var b=this,c=b.d3,d=b.context.selectAll("."+e.areas).selectAll("."+e.area).data(b.lineData.bind(b)),f=d.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0});d.exit().transition().duration(a).style("opacity",0).remove(),b.contextArea=f.merge(d).style("opacity",0)},b.prototype.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},b.prototype.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.selectionAsValue(k.x.orgDomain()),a&&(k.brush.empty()||k.brush.selectionAsValue(k.x.orgDomain()),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},b.prototype.redrawForBrush=function(){var a,b=this,c=b.x,d=b.d3;b.redraw({withTransition:!1,withY:b.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),a=d.event.selection||b.brush.scale.range(),b.main.select("."+e.eventRect).call(b.zoom.transform,d.zoomIdentity.scale(b.width/(a[1]-a[0])).translate(-a[0],0)),b.config.subchart_onbrush.call(b.api,c.orgDomain())},b.prototype.transformContext=function(a,b){var c;b&&b.axisSubX?c=b.axisSubX:(c=this.context.select("."+e.axisX),a&&(c=c.transition())),this.context.attr("transform",this.getTranslate("context")),c.attr("transform",this.getTranslate("subx"))},b.prototype.getDefaultSelection=function(){var a=this,b=a.config,c=n(b.axis_x_selection)?b.axis_x_selection(a.getXDomain(a.data.targets)):b.axis_x_selection;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},b.prototype.initText=function(){this.main.select("."+e.chart).append("g").attr("class",e.chartTexts),this.mainText=this.d3.selectAll([])},b.prototype.updateTargetsForText=function(a){var b=this,c=b.classChartText.bind(b),d=b.classTexts.bind(b),f=b.classFocus.bind(b),g=b.main.select("."+e.chartTexts).selectAll("."+e.chartText).data(a),h=g.enter().append("g").attr("class",c).style("opacity",0).style("pointer-events","none");h.append("g").attr("class",d),h.merge(g).attr("class",function(a){return c(a)+f(a)})},b.prototype.updateText=function(a,b,c){var d=this,f=d.config,g=d.barOrLineData.bind(d),h=d.classText.bind(d),i=d.main.selectAll("."+e.texts).selectAll("."+e.text).data(g),j=i.enter().append("text").attr("class",h).attr("text-anchor",function(a){return f.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").attr("x",a).attr("y",b).style("fill",function(a){return d.color(a)}).style("fill-opacity",0);d.mainText=j.merge(i).text(function(a,b,c){return d.dataLabelFormat(a.id)(a.value,a.id,b,c)}),i.exit().transition().duration(c).style("fill-opacity",0).remove()},b.prototype.redrawText=function(a,b,c,d,e){return[(d?this.mainText.transition(e):this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},b.prototype.getTextRect=function(a,b,c){var d,e=this.d3.select("body").append("div").classed("c3",!0),f=e.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g=this.d3.select(c).style("font");return f.selectAll(".dummy").data([a]).enter().append("text").classed(b||"",!0).style("font",g).text(a).each(function(){d=this.getBoundingClientRect()}),e.remove(),d},b.prototype.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},b.prototype.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect();return d=f.config.axis_rotated?(e=f.isBarType(b)?4:6,a[2][1]+e*(b.value<0?-1:1)):f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:0>d&&(d=4)),d},b.prototype.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0||0===b.value&&!e.hasPositiveValue?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},b.prototype.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},b.prototype.redrawTitle=function(){var a=this;a.title.attr("x",a.xForTitle.bind(a)).attr("y",a.yForTitle.bind(a))},b.prototype.xForTitle=function(){var a=this,b=a.config,c=b.title_position||"left";return 0<=c.indexOf("right")?a.currentWidth-a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).width-b.title_padding.right:0<=c.indexOf("center")?(a.currentWidth-a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).width)/2:b.title_padding.left},b.prototype.yForTitle=function(){var a=this;return a.config.title_padding.top+a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).height},b.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},b.prototype.initTooltip=function(){var a,b=this,c=b.config;if(b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",e.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&o(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!=0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",c.tooltip_init_position.left).style("display","block")}},b.prototype.getTooltipSortFunction=function(){var a=this,b=a.config;if(0!==b.data_groups.length&&void 0===b.tooltip_order){var c=a.orderTargets(a.data.targets).map(function(a){return a.id});return(a.isOrderAsc()||a.isOrderDesc())&&(c=c.reverse()),function(a,b){return c.indexOf(a.id)-c.indexOf(b.id)}}var d=b.tooltip_order;void 0===d&&(d=b.data_order);var e=function(a){return a?a.value:null};if(o(d)&&"asc"===d.toLowerCase())return function(a,b){return e(a)-e(b)};if(o(d)&&"desc"===d.toLowerCase())return function(a,b){return e(b)-e(a)};if(n(d)){var f=d;return void 0===b.tooltip_order&&(f=function(a,b){return d(a?{id:a.id,values:[a]}:null,b?{id:b.id,values:[b]}:null)}),f}return k(d)?function(a,b){return d.indexOf(a.id)-d.indexOf(b.id)}:void 0},b.prototype.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},o=l.tooltip_format_value||c,p=this.getTooltipSortFunction();for(p&&a.sort(p),f=0;f<a.length;f++)if(a[f]&&(a[f].value||0===a[f].value)&&(e||(g=s(m?m(a[f].x,a[f].index):a[f].x),e="<table class='"+k.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),void 0!==(h=s(o(a[f].value,a[f].ratio,a[f].id,a[f].index,a))))){if(null===a[f].name)continue;i=s(n(a[f].name,a[f].ratio,a[f].id,a[f].index)),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+k.CLASS.tooltipName+"-"+k.getTargetSelectorSuffix(a[f].id)+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"}return e+"</table>"},b.prototype.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=(j.hasType("gauge")?j.height:j.height/2)+n[1]+20):(e=j.getSvgLeft(!0),h=k.axis_rotated?(g=(f=e+n[0]+100)+b,i=j.currentWidth-j.getCurrentPaddingRight(),j.x(a[0].x)+20):(g=(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20)+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),n[1]+15),g>i&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),0>h&&(h=0),{top:h,left:f}},b.prototype.showTooltip=function(a,c){var d,e,f,g=this,h=g.config,i=g.hasArcType(),j=a.filter(function(a){return a&&q(a.value)}),k=h.tooltip_position||b.prototype.tooltipPosition;0!==j.length&&h.tooltip_show&&(g.tooltip.html(h.tooltip_contents.call(g,a,g.axis.getXAxisTickFormat(),g.getYFormat(i),g.color)).style("display","block"),d=g.tooltip.property("offsetWidth"),e=g.tooltip.property("offsetHeight"),f=k.call(this,j,d,e,c),g.tooltip.style("top",f.top+"px").style("left",f.left+"px"))},b.prototype.hideTooltip=function(){this.tooltip.style("display","none")},b.prototype.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},b.prototype.hasType=function(a,b){var c=this.config.data_types,d=!1;return(b=b||this.data.targets)&&b.length?b.forEach(function(b){var e=c[b.id];(e&&0<=e.indexOf(a)||!e&&"line"===a)&&(d=!0)}):Object.keys(c).length?Object.keys(c).forEach(function(b){c[b]===a&&(d=!0)}):d=this.config.data_type===a,d},b.prototype.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},b.prototype.isLineType=function(a){var b=this.config,c=o(a)?a:a.id;return!b.data_types[c]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])},b.prototype.isStepType=function(a){var b=o(a)?a:a.id;return 0<=["step","area-step"].indexOf(this.config.data_types[b])},b.prototype.isSplineType=function(a){var b=o(a)?a:a.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[b])},b.prototype.isAreaType=function(a){var b=o(a)?a:a.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[b])},b.prototype.isBarType=function(a){var b=o(a)?a:a.id;return"bar"===this.config.data_types[b]},b.prototype.isScatterType=function(a){var b=o(a)?a:a.id;return"scatter"===this.config.data_types[b]},b.prototype.isPieType=function(a){var b=o(a)?a:a.id;return"pie"===this.config.data_types[b]},b.prototype.isGaugeType=function(a){var b=o(a)?a:a.id;return"gauge"===this.config.data_types[b]},b.prototype.isDonutType=function(a){var b=o(a)?a:a.id;return"donut"===this.config.data_types[b]},b.prototype.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},b.prototype.lineData=function(a){return this.isLineType(a)?[a]:[]},b.prototype.arcData=function(a){return this.isArcType(a.data)?[a]:[]},b.prototype.barData=function(a){return this.isBarType(a)?a.values:[]},b.prototype.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},b.prototype.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},b.prototype.isSafari=function(){var a=window.navigator.userAgent;return 0<=a.indexOf("Safari")&&a.indexOf("Chrome")<0},b.prototype.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},b.prototype.initZoom=function(){var a,b=this,c=b.d3,d=b.config;return b.zoom=c.zoom().on("start",function(){if("scroll"===d.zoom_type){var e=c.event.sourceEvent;e&&"brush"===e.type||(a=e,d.zoom_onzoomstart.call(b.api,e))}}).on("zoom",function(){if("scroll"===d.zoom_type){var a=c.event.sourceEvent;a&&"brush"===a.type||(b.redrawForZoom(),d.zoom_onzoom.call(b.api,b.x.orgDomain()))}}).on("end",function(){if("scroll"===d.zoom_type){var e=c.event.sourceEvent;e&&"brush"===e.type||e&&a.clientX===e.clientX&&a.clientY===e.clientY||d.zoom_onzoomend.call(b.api,b.x.orgDomain())}}),b.zoom.updateDomain=function(){return c.event&&c.event.transform&&b.x.domain(c.event.transform.rescaleX(b.subX).domain()),this},b.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[b.width,b.height]]).extent([[0,0],[b.width,b.height]]),this},b.zoom.update=function(){return this.updateExtent().updateDomain()},b.zoom.updateExtent()},b.prototype.zoomTransform=function(a){var b=[this.x(a[0]),this.x(a[1])];return this.d3.zoomIdentity.scale(this.width/(b[1]-b[0])).translate(-b[0],0)},b.prototype.initDragZoom=function(){var a=this,b=a.d3,c=a.config,d=a.context=a.svg,f=a.margin.left+20.5,g=a.margin.top+.5;if("drag"===c.zoom_type&&c.zoom_enabled){var h=function(b){return b&&b.map(function(b){return a.x.invert(b)})},i=a.dragZoomBrush=b.brushX().on("start",function(){a.api.unzoom(),a.svg.select("."+e.dragZoom).classed("disabled",!1),c.zoom_onzoomstart.call(a.api,b.event.sourceEvent)}).on("brush",function(){c.zoom_onzoom.call(a.api,h(b.event.selection))}).on("end",function(){if(null!=b.event.selection){var d=h(b.event.selection);c.zoom_disableDefaultBehavior||a.api.zoom(d),a.svg.select("."+e.dragZoom).classed("disabled",!0),c.zoom_onzoomend.call(a.api,d)}});d.append("g").classed(e.dragZoom,!0).attr("clip-path",a.clipPath).attr("transform","translate("+f+","+g+")").call(i)}},b.prototype.getZoomDomain=function(){var a=this.config,b=this.d3;return[b.min([this.orgXDomain[0],a.zoom_x_min]),b.max([this.orgXDomain[1],a.zoom_x_max])]},b.prototype.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length&&(d.update(),c.zoom_disableDefaultBehavior||(a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),b.event.sourceEvent&&"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0)))},u}),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.scrollama=b()}(this,function(){"use strict";function a(a){for(var b=a.length,c=[],d=0;b>d;d+=1)c.push(a[d]);return c}function b(a){return a instanceof Element?a:"string"==typeof a?document.querySelector(a):null}function c(a){return"scrollama__debug-offset--"+a.id}function d(a){!function(a){var b=a.id,d=a.offsetVal,e=a.stepClass,f=document.createElement("div");f.setAttribute("id",c({id:b})),f.setAttribute("class","scrollama__debug-offset"),f.style.position="fixed",f.style.left="0",f.style.width="100%",f.style.height="0px",f.style.borderTop="2px dashed black",f.style.zIndex="9999";var g=document.createElement("p");g.innerText='".'+e+'" trigger: '+d,g.style.fontSize="12px",g.style.fontFamily="monospace",g.style.color="black",g.style.margin="0",g.style.padding="6px",f.appendChild(g),document.body.appendChild(f)}({id:a.id,offsetVal:a.offsetVal,stepClass:a.stepEl[0].getAttribute("class")})}function e(a){var b=a.id,d=(a.stepOffsetHeight,a.offsetMargin);a.offsetVal,!function(a){var b=a.id,d=a.offsetMargin,e=(a.offsetVal,c({id:b}));document.querySelector("#"+e).style.top=d+"px"}({id:b,offsetMargin:d})}function f(a){var b=a.id,c=a.index,d=a.state,e=function(a){return"scrollama__debug-step--"+a.id+"-"+a.i}({id:b,i:c}),f=document.querySelector("#"+e+"_above"),g=document.querySelector("#"+e+"_below"),h="enter"===d?"block":"none";f&&(f.style.display=h),g&&(g.style.display=h)}return function(){function c(a){var b=0;if(a.offsetParent)do b+=a.offsetTop,a=a.offsetParent;while(a);return 0>b?0:b}function g(a){return+a.getAttribute("data-scrollama-index")}function h(){window.pageYOffset>W?X="down":window.pageYOffset<W&&(X="up"),W=window.pageYOffset}function i(){var a,b;I=window.innerHeight,a=document.body,b=document.documentElement,J=Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight),M=D?D.getBoundingClientRect():null,H=G*I,K=E?E.map(function(a){return a.offsetHeight}):[],L=E?E.map(c):[],O&&N&&y(),P&&e({id:F,stepOffsetHeight:K,offsetMargin:H,offsetVal:G})}function j(a){a&&!O?(N&&y(),O=!0):a||(B.top&&B.top.disconnect(),B.bottom&&B.bottom.disconnect(),B.stepAbove&&B.stepAbove.forEach(function(a){return a.disconnect()}),B.stepBelow&&B.stepBelow.forEach(function(a){return a.disconnect()}),B.stepProgress&&B.stepProgress.forEach(function(a){return a.disconnect()}),B.viewportAbove&&B.viewportAbove.forEach(function(a){return a.disconnect()}),B.viewportBelow&&B.viewportBelow.forEach(function(a){return a.disconnect()}),O=!1)}function k(a,b){if("above"===b)for(var c=0;a>c;c++){var d=U[c];"enter"===d.state&&m(E[c],"down"),"up"===d.direction&&(l(E[c],"down",!1),m(E[c],"down"))}else if("below"===b)for(var e=U.length-1;e>a;e--){var f=U[e];"enter"===f.state&&m(E[e],"up"),"down"===f.direction&&(l(E[e],"up",!1),m(E[e],"up"))}}function l(a,b,c){void 0===c&&(c=!0);var d=g(a),e={element:a,index:d,direction:b};U[d].direction=b,U[d].state="enter",S&&c&&"down"===b&&k(d,"above"),S&&c&&"up"===b&&k(d,"below"),A.stepEnter&&"function"==typeof A.stepEnter&&!Y[d]&&(A.stepEnter(e,U),P&&f({id:F,index:d,state:"enter"}),T&&(Y[d]=!0)),Q&&n(a,"down"===b?0:1)}function m(a,b){var c=g(a),d={element:a,index:c,direction:b};U[c].direction=b,U[c].state="exit",Q&&n(a,"down"===b?1:0),A.stepExit&&"function"==typeof A.stepExit&&(A.stepExit(d,U),P&&f({id:F,index:c,state:"exit"}))}function n(a,b){var c={element:a,index:g(a),progress:b};A.stepProgress&&"function"==typeof A.stepProgress&&A.stepProgress(c)}function o(){var a={direction:X};V.direction=X,V.state="enter",A.containerEnter&&"function"==typeof A.containerEnter&&A.containerEnter(a)}function p(){var a={direction:X};V.direction=X,V.state="exit",A.containerExit&&"function"==typeof A.containerExit&&A.containerExit(a)}function q(a){h(),a.forEach(function(a){var b=a.isIntersecting,c=a.boundingClientRect,d=a.target,e=c.bottom,f=c.height,h=e-H,i=g(d),j=U[i];h>=-z&&(b&&"down"===X&&"enter"!==j.state?l(d,X):b||"up"!==X||"enter"!==j.state?!b&&h>=f&&"down"===X&&"enter"===j.state&&m(d,X):m(d,X))})}function r(a){h(),a.forEach(function(a){var b=a.isIntersecting,c=a.boundingClientRect,d=a.target,e=c.bottom,f=c.height,h=e-H,i=g(d),j=U[i];
h>=-z&&f>h&&b&&"up"===X&&"enter"!==j.state?l(d,X):z>=h&&!b&&"down"===X&&"enter"===j.state&&m(d,X)})}function s(a){h(),a.forEach(function(a){var b=a.isIntersecting,c=a.target,d=g(c),e=U[d];b&&"down"===X&&"enter"!==e.state&&"down"!==e.direction&&(l(c,"down"),m(c,"down"))})}function t(a){h(),a.forEach(function(a){var b=a.isIntersecting,c=a.target,d=g(c),e=U[d];b&&"up"===X&&"enter"!==e.state&&"up"!==e.direction&&(l(c,"up"),m(c,"up"))})}function u(a){h(),a.forEach(function(a){var b=a.isIntersecting,c=a.intersectionRatio,d=a.boundingClientRect,e=a.target,f=d.bottom;b&&f-H>=-z&&n(e,+c.toFixed(3))})}function v(a){h();var b=a[0],c=b.isIntersecting,d=b.boundingClientRect;d.top,d.bottom>-z&&(c?o():"enter"===V.state&&p())}function w(a){h();var b=a[0],c=b.isIntersecting;b.boundingClientRect.top<z&&(c?o():"enter"===V.state&&p())}function x(){B.stepProgress&&B.stepProgress.forEach(function(a){return a.disconnect()}),B.stepProgress=E.map(function(a,b){var c=K[b]-H+"px 0px "+(-I+H)+"px 0px",d=function(a){for(var b=Math.ceil(a/R),c=[],d=1/b,e=0;b>e;e++)c.push(e*d);return c}(K[b]),e=new IntersectionObserver(u,{root:null,rootMargin:c,threshold:d});return e.observe(a),e})}function y(){B.viewportAbove&&B.viewportAbove.forEach(function(a){return a.disconnect()}),B.viewportAbove=E.map(function(a,b){var c=L[b],d=-(I-H+K[b]),e=new IntersectionObserver(s,{root:null,rootMargin:c+"px 0px "+d+"px 0px",threshold:0});return e.observe(a),e}),B.viewportBelow&&B.viewportBelow.forEach(function(a){return a.disconnect()}),B.viewportBelow=E.map(function(a,b){var c=-(H+K[b]),d=J-L[b]-K[b]-H,e=new IntersectionObserver(t,{root:null,rootMargin:c+"px 0px "+d+"px 0px",threshold:0});return e.observe(a),e}),B.stepAbove&&B.stepAbove.forEach(function(a){return a.disconnect()}),B.stepAbove=E.map(function(a,b){var c=K[b],d=new IntersectionObserver(q,{root:null,rootMargin:c+"px 0px "+(-I+H)+"px 0px",threshold:0});return d.observe(a),d}),B.stepBelow&&B.stepBelow.forEach(function(a){return a.disconnect()}),B.stepBelow=E.map(function(a,b){var c=-H,d=J-I+K[b]+H,e=new IntersectionObserver(r,{root:null,rootMargin:c+"px 0px "+d+"px 0px",threshold:0});return e.observe(a),e}),Q&&x(),C&&D&&(function(){B.top&&B.top.unobserve(C);var a={root:null,rootMargin:I+"px 0px -"+I+"px 0px",threshold:0};B.top=new IntersectionObserver(v,a),B.top.observe(C)}(),function(){B.bottom&&B.bottom.unobserve(C);var a={root:null,rootMargin:"-"+M.height+"px 0px "+M.height+"px 0px",threshold:0};B.bottom=new IntersectionObserver(w,a),B.bottom.observe(C)}())}var z=1,A={},B={},C=null,D=null,E=null,F=null,G=0,H=0,I=0,J=0,K=null,L=null,M=null,N=!1,O=!1,P=!1,Q=!1,R=0,S=!1,T=!1,U=null,V=null,W=-1,X=null,Y=[],Z={};return Z.setup=function(c){var e=c.container,f=c.graphic,g=c.step,h=c.offset;void 0===h&&(h=.5);var k=c.progress;void 0===k&&(k=!1);var l=c.threshold;void 0===l&&(l=4);var m=c.debug;void 0===m&&(m=!1);var n=c.order;void 0===n&&(n=!0);var o,p,q,r,s,t=c.once;return void 0===t&&(t=!1),p=(o="abcdefghijklmnopqrstuv").length,q=(new Date).getTime(),F=""+[0,0,0].map(function(a){return o[Math.floor(Math.random()*p)]}).join("")+q,r=g,void 0===s&&(s=document),E="string"==typeof r?a(s.querySelectorAll(r)):r instanceof Element?a([r]):r instanceof NodeList?a(r):r instanceof Array?r:[],C=e?b(e):null,D=f?b(f):null,E.length?(P=m,Q=k,S=n,T=t,Z.offsetTrigger(h),R=Math.max(1,+l),N=!0,P&&d({id:F,stepEl:E,offsetVal:G}),E.forEach(function(a,b){return a.setAttribute("data-scrollama-index",b)}),U=E.map(function(){return{direction:null,state:null}}),V={direction:null,state:null},i(),j(!0),Z):(console.error("scrollama error: no step elements"),Z)},Z.resize=function(){return i(),Z},Z.enable=function(){return j(!0),Z},Z.disable=function(){return j(!1),Z},Z.destroy=function(){j(!1),Object.keys(A).forEach(function(a){return A[a]=null}),Object.keys(B).forEach(function(a){return B[a]=null})},Z.offsetTrigger=function(a){return a&&!isNaN(a)?(G=Math.min(Math.max(0,a),1),Z):G},Z.onStepEnter=function(a){return A.stepEnter=a,Z},Z.onStepExit=function(a){return A.stepExit=a,Z},Z.onStepProgress=function(a){return A.stepProgress=a,Z},Z.onContainerEnter=function(a){return A.containerEnter=a,Z},Z.onContainerExit=function(a){return A.containerExit=a,Z},Z}});var isMobile=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i),prefix=isMobile?"mobile":"desktop",mappedLoads=[],tryLoad=function(a){var b=mappedLoads[a];if(!b){mappedLoads[a]=!0;var c=$(a).attr("class"),d=document.createElement("video");d.src="images/"+c+"_"+prefix+".mp4",d.setAttribute("autoplay",!1),d.setAttribute("playsinline",!0),d.muted=!0,d.setAttribute("loop",!0),$(a).append(d)}},startVideos=function(){$("li video.show-m").map(function(a,b){b.play()}),$("body").off("click",startVideos)};isMobile&&$("body").on("click",startVideos);var eventBus=[];eventBus.stepMap0=function(){$(".slides li").hide(),$(".slides li.arriba").show(),tryLoad(".slides li.jetson")},eventBus.stepLS=function(){$(".slides li").hide(),$(".slides li.jetson").show(),tryLoad(".slides li.jetson"),tryLoad(".slides li.blade")},eventBus.stepBR=function(){$(".slides li").hide(),$(".slides li.blade").show(),tryLoad(".slides li.blade"),tryLoad(".slides li.back"),tryLoad(".slides li.jetson")},eventBus.stepBB=function(){$(".slides li").hide(),$(".slides li.back").show(),tryLoad(".slides li.back"),tryLoad(".slides li.blade"),tryLoad(".slides li.demolition")},eventBus.stepDM=function(){$(".slides li").hide(),$(".slides li.demolition").show(),tryLoad(".slides li.demolition"),tryLoad(".slides li.back"),tryLoad(".slides li.nt-f")},eventBus.stepIntro=function(){$(".slider-2 .slides li").hide(),$(".slider-2 .slides li.nt-f").show(),tryLoad(".slides li.nt-f"),tryLoad(".slides li.demolition"),tryLoad(".slides li.estacionar")},eventBus.stepEstacionar=function(){$(".slider-2 .slides li").hide(),$(".slider-2 .slides li.estacionar").show(),tryLoad(".slides li.estacionar"),tryLoad(".slides li.prender")},eventBus.stepKey=function(){$(".slider-2 .slides li").hide(),$(".slider-2 .slides li.prender").show(),tryLoad(".slides li.prender"),tryLoad(".slides li.estacionar"),tryLoad(".slides li.fatiga")},eventBus.stepFatiga=function(){$(".slider-2 .slides li").hide(),$(".slider-2 .slides li.fatiga").show(),tryLoad(".slides li.fatiga"),tryLoad(".slides li.prender"),tryLoad(".slides li.seguridad")},eventBus.stepSeguridad=function(){$(".slider-2 .slides li").hide(),$(".slider-2 .slides li.seguridad").show(),tryLoad(".slides li.seguridad"),tryLoad(".slides li.fatiga"),tryLoad(".slides li.ruedas")},eventBus.stepRuedas=function(){$(".slider-2 .slides li").hide(),$(".slider-2 .slides li.ruedas").show(),tryLoad(".slides li.ruedas"),tryLoad(".slides li.seguridad"),tryLoad(".slides li.pantalla")},eventBus.stepPantalla=function(){$(".slider-2 .slides li").hide(),$(".slider-2 .slides li.pantalla").show(),tryLoad(".slides li.pantalla"),tryLoad(".slides li.ruedas"),tryLoad(".slides li.detalles")},eventBus.stepDestalles=function(){$(".slider-2 .slides li").hide(),$(".slider-2 .slides li.detalles").show(),tryLoad(".slides li.detalles"),tryLoad(".slides li.pantalla")};var readyMap=function(){$(".cargando").hide(),$(".start").show(),$("#timelineScroll").show(),$("#secondTimelineScroll").show(),$("#publicosScroll").show()};$("#timelineScroll").hide(),$("#secondTimelineScroll").hide(),$("#publicosScroll").hide(),readyMap(),init("#scroll"),init("#timelineScroll"),(new WOW).init();var script=document.createElement("script"),scripts=document.getElementsByTagName("script")[0];script.src="https://aframe.io/releases/0.9.2/aframe.min.js",scripts.parentNode.insertBefore(script,scripts),setTimeout(function(){var a='<a-scene loading-screen="enabled: false; dotsColor: orange; backgroundColor: black" embedded><a-assets><img id="sky" src="images/360/interior-t-cross.eac6bb32.jpg">';a+='</a-assets><a-sky src="#sky" animation="property: rotation; to: 0 360 0; loop: true; dur: 150000"></a-sky></a-scene>',$("#aframe-space").append(a)},3e3);